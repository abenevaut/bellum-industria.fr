<html>
<head>
	<title>cvepdbJS #index</title>

	<script>
		var cvepdb_config = {
			ENV: 'development',
			ENV_REF: 'dev',
			ENV_THEME: '',
			IDUSER: 0,
			LANG: 'fr',
			URI_BASE: '',
			URL_BASE: '',
			URL_SITE: '',
			URL_THEME: './',
			BASE_PATH: './',
			LIVEREALOAD: {
				//			url: '',
				//			port: '',
				project: '0'
			},
			UA: {
				MOBILE: false,
				BROWSER: true
			}
		};
	</script>
</head>
<body>

	<h1>#CVEPDB JS</h1>

	<fieldset>
		<legend>Basics</legend>
		<div>

			<p>CVEPDBjs est une library qui rassemble des fonctionnalites courantes pour la creation web. Son but est de proposer une library facile d'acces, avec des elements personnalisables pour les developpeurs et les integrateurs.</p>


			<p>
				Prerequis : Il doit toujours y avoir, dans les balises heads de votre feuille HTML, l'objet 'cvepdb_config'

				<pre><code>
					<\script>
						var cvepdb_config = {
							ENV: 'development', // development | staging | production
							ENV_REF: 'dev', // nom de l'evironnement courant 'Site 1', 'Mon blog'
							ENV_THEME: '', // chemin vers le repertoire de votre theme
							IDUSER: 0, // ID de l'utilisateur connecte - sinon 0
							LANG: 'fr', // la langue courante du site
							URI_BASE: '', // l'URI de base de votre site - souvent '/'
							URL_BASE: '', // l'URL de base votre site
							URL_SITE: '', // l'URL courante de votre site
							URL_THEME: './', // l'URL vers le repertoire de votre theme
							BASE_PATH: './', // PATH vers le repertoire de la library cvepdbjs [ URL_THEME + BASE_PATH = chemin complet vers la library ]
							FILTERS: {
								startup_load_filters: false // Permet de rafraichir les filtres directement apres le premier chargement
							},
							LIVEREALOAD: {
								//       url: '', // URL du serveur livereload
								//       port: '', // PORT du serveur livereload
								project: '0' // ID PROJET du serveur livereload, si '0' alors livereload n'est pas initializer
							},
							UA: { // User agent
								MOBILE: false, // true/false pour indique si oui/non votre site est en mode mobile
								BROWSER: true // true/false pour indique si oui/non votre site est en mode navigateur
							}
						};
					<\/script>

					<!-- JS -->
					<\script type="text/javascript" src="js/cvepdb/libs/jquery/dist/jquery.min.js"><\/script>
					<\script type="text/javascript" src="js/cvepdb/libs/jquery-ui/jquery-ui.min.js"><\/script>
					<\script type="text/javascript" src="js/cvepdb/libs/headjs/dist/1.0.0/head.min.js"><\/script>
					<\script type="text/javascript" src="js/cvepdb/cvepdb.js"><\/script>
				</code></pre>

				Et pour L'integration PyroCMS

				Pour fonctionner, les themes PyroCMS nescessite le plugin agent disponible sur le store officiel https://www.pyrocms.com/store/details/agent_plugin

				<pre><code>
					<!-- #CVPEBD touch! -->

					{{ theme:js file="cvepdbjs/libs/jquery/dist/jquery.min.js" }}

					{{ theme:js file="cvepdbjs/libs/jquery-ui/jquery-ui.min.js" }}
					{{ theme:js file="cvepdbjs/libs/headjs/dist/1.0.0/head.min.js" }}

					{{ template:metadata }}

					<\script>
						var cvepdb_config = {
							ENV: '{{ global:environment }}',
							ENV_REF: '{{ global:site_ref }}',
							ENV_THEME: '{{ theme:path }}',
							IDUSER: 0,
							LANG: '{{ global:current_language }}',
							URI_BASE: '{{ global:base_uri }}',
							URL_BASE: '{{ url:base }}',
							URL_SITE: '{{ url:site }}',
							URL_THEME: '{{ url:base }}{{ theme:path }}',
							BASE_PATH: '/js/cvepdbjs/',
						{{ agent:is_mobile_show }}UA: {
							MOBILE: true,
							  BROWSER: false
						}{{ /agent:is_mobile_show }}{{ agent:is_mobile_hide }}UA: {
							MOBILE: false,
							  BROWSER: true
						}{{ /agent:is_mobile_hide }}
						};
					<\/script>

					{{ theme:js file="cvepdbjs/cvepdb.js" }}
				</code></pre>
			</p>

			<fieldset>
				<legend>Reserved HeadJS events</legend>

				<p>
					Fired HeadJS events apres un chargement reussi d'une library
				</p>

				<ul>

					<li>CVEPDB_GLOBALIZE_LOADED</li>
					<li>CVEPDB_DICTIONARY_LOADED</li>

					<li>CVEPDB_SENTRY_LOADED</li>

					<li>CVEPDB_FORM_VALIDATION</li>
					<li>CVEPDB_TINYMCE</li>
					<li>CVEPDB_MULTIDATESPICKER</li>
					<li>CVEPDB_PYROCMS_FILTER</li>
					<li>CVEPDB_LAZYLOAD</li>
					<li>CVEPDB_TIPSY</li>
					<li>CVEPDB_HIGHCHARTS</li>
					
				</ul>

			</fieldset>

			<fieldset>
				<legend>Reserved events name</legend>

				<p>
					CVEPDBjs fired events a la fin des chargements reussi d'une library
				</p>	

				<ul>
					<li>CVEPDB_GLOBALIZE_READY</li>
					<li>CVEPDB_GLOB_MESS_READY</li>
					<li>CVEPDB_DICTIONARY_READY</li>
					<li>CVEPDB_SENTRY_READY</li>

					<li>CVEPDB_ONLOAD</li>
					<li>CVEPDB_READY</li>

					<li>CVEPDB_FORM_VALIDATION_READY</li>
					<li>CVEPDB_LAZYLOAD_READY</li>
					<li>CVEPDB_TIPSY_READY</li>
					<li>CVEPDB_TINYMCE_READY</li>
					<li>CVEPDB_MULTIDATESPICKER_READY</li>
					<li>CVEPDB_PYROCMS_FILTER_READY</li>
					<li>CVEPDB_HIGHCHARTS_READY</li>

				</ul>

			</fieldset>

			<p>
				Les exceptions : Permet d'afficher un rapport le plus complet que possible pour faciliter le debug.

				<code><pre>
				try {
				    throw new CVEPDBException("Test TRY");
				 }
				 catch (error) {
				    cvepdb.exception(error);
				 }
				 </code></pre>
			</p>

			<p>
				L'objet cvepdb :

				<p>
					debug console :

					<code><pre>
						cvepdb.debug('DEBUG MESSAGE');
					</pre></code>
				</p>

				<p>
					warning console :

					<code><pre>
						cvepdb.warning('WARNING MESSAGE');
					</pre></code>
				</p>

				<p>
					error console :

					<code><pre>
						cvepdb.error('ERROR MESSAGE');
					</pre></code>
				</p>

				<p>
					clear console :

					<code><pre>
						cvepdb.clear_console();
					</pre></code>
				</p>

				<p>
					redirect :

					<code><pre>
						cvepdb.redirect('http://cavaencoreparlerdebits.fr'); // redirige immediatement vers l'url passer en argument
					</pre></code>
				</p>

				<p>
					unbeforeunload :

					<code><pre>
						cvepdb.unbeforeunload(function(){ alert('Vous allez quitter la page!'); }); //
						cvepdb.unbeforeunload('Vous allez quitter la page!'); // yes/no question
						cvepdb.unbeforeunload(null); // Desactive la fonctionnalite
					</pre></code>
				</p>

				<p>
					cvepdb.string

					<p>
						 slugify :

						<code><pre>
							cvepdb.string.slugify('String to slugify '); // return 'string-to-slugify'
						</pre></code>
					</p>

					<p>
						ucfirst :

						<code><pre>
							cvepdb.string.ucfirst('string'); // return 'String'
						</pre></code>
					</p>

					<p>
						jsprintf :

						<code><pre>
							cvepdb.string.jsprintf(
								'String %arg_1% %arg_2%',
								[ 'arg_1', 'arg_2' ],
								[ 'to', 'complete' ]
							); // return 'String to complete'
						</pre></code>
					</p>
				</p>

				<p>
					cvepdb.array

					<p>
						 in_array (pas recursif) :

						<code><pre>
							cvepdb.array.in_array(
								[ 'test', 'in_array' ],
								'in_array'
							); // return true/false  si la donnee a ete trouve
						</pre></code>
					</p>

				</p>

				<p>
					cvepdb.object

					<p>
						 dump (recursif) :

						<code><pre>
							cvepdb.object.dump(
								{ test: true, tab: ['test', 'dump']}
							); // affiche en bas de page l'objet donnee en argument
						</pre></code>
					</p>

				</p>

				<p>
					cvepdb.maths

					<p>
						 number :

						<code><pre>
							cvepdb.maths.number('45,50'); // return valid JS Number -> 45.5
							cvepdb.maths.number('45.50'); // return valid JS Number -> 45.5
						</pre></code>
					</p>

					<p>
						 sum :

						<code><pre>
							cvepdb.maths.sum(
								['50,90', '49.10']
							); // return valid JS Number -> 100
						</pre></code>
					</p>

					<p>
						 pourcentage (ex: A revoir):

						<code><pre>
							cvepdb.maths.pourcentage('75', '50'); // return (75 * 100 / 50 = 150)
						</pre></code>
					</p>

					<p>
						 remise (ex: 25 euros de remise sur 100 euros):

						<code><pre>
							cvepdb.maths.remise('25', '100'); // return (100 - 25) * 100 / 100 = 75
						</pre></code>
					</p>

				</p>

				<p>
					cvepdb.checks

					<p>
						 isInt :

						<code><pre>
							cvepdb.checks.isInt(42); // return true/false si l'argument est un int valide
						</pre></code>
					</p>

					<p>
						 isValidId :

						<code><pre>
							cvepdb.checks.isValidId(42); // return l'argument si l'argument est un id valide sinon 0
						</pre></code>
					</p>

				</p>

				<p>
					cvepdb.globalize

					<p>
						 translate :

						<code><pre>
							cvepdb.globalize.translate('FIELD_REQUIRED'); // return
						</pre></code>
					</p>

					<p>
						 loadDictionary :

						<code><pre>
							cvepdb.globalize.loadDictionary({ key: word, ... }, 'en'); // return
						</pre></code>
					</p>

				</p>

				<p>
					cvepdb.headjs

					<p>
						 loadjs, permet de charger un script js/css de facon asynchrone :

						<code><pre>
							cvepdb.headjs.loadjs(
								{
									script: {
										HEADJS_EVENT_NAME: // HeadJS fired event name
										  (cvepdb_config.URL_THEME + '/js/cvepdb/scripts/form_validation.js') // script css/js a charger
									},
									trigger: '.js-call-AUTOMATED_NAME_TO_LOAD_STANDALONE', // 'always' pour charger la library tout le temps
									mobile: false, // true si script mobile
									browser: true // true si script navigateur
								}
							);
						</pre></code>
					</p>

				</p>

				<p>
					cvepdb.dates [A completer]

					<p>
						  :

						<code><pre>
							cvepdb.dates.();
						</pre></code>
					</p>

				</p>

				<p>
					cvepdb.sentry [A completer]


					<p>
						 basics :

						<code><pre>
							cvepdb.sentry.is_active: false;

							cvepdb.sentry.development: {
								key: null,
								url: null,
								project: 0
							};

							cvepdb.sentry.staging: {
								key: null,
								url: null,
								project: 0
							};

							cvepdb.sentry.production: {
								key: null,
								url: null,
								project: 0
							};
						</pre></code>
					</p>

					<p>
						 report :

						<code><pre>
							cvepdb.sentry.report();
						</pre></code>
					</p>

				</p>


			</p>


		</div>
	</fieldset>

	<fieldset>
		<legend>Tipsy - ToolTips</legend>
		<div>

			<p>Integration (partiel) de tipsy, library qui permet d'afficher des tooltips sur les elements du DOM.</p>
			<p>
				<ul>
					<li>Class de chargement : Toujours charge pour un contexte web</li>
					<li>Event de fin de chargement de la library : Toujours charge pour un contexte web</li>
					<li>Reference : assigner les tags 'id="gwi-back" title="TOOLTIP"' a un element du DOM</li>
				</ul>
			</p>

			<a href="#" id="gwi-back" title="Tipsy JS exemple">Tipsy JS exemple</a>

		</div>
	</fieldset>


	<fieldset>
		<legend>Form_validation</legend>
		<div>

			<p>Integration de jquery-validation, library qui permet de verifier la validite des formulaires avant soumission.</p>
			<p>
				<ul>
					<li>Class de chargement : js-call-form_validation</li>
					<li>Event de fin de chargement de la library : CVEPDB_FORM_VALIDATION_JQREADY</li>
					<li>Reference : voir le fichier js/demo/form_validation.js</li>
				</ul>
			</p>

			<form class="cmxform js-call-form_validation" id="commentForm2" method="post" action="" novalidate="novalidate">
				<fieldset>
					<legend>Please enter your email address</legend>
					<p>
						<label for="cemail">E-Mail *</label>
						<input id="cemail" name="email" />
					</p>
					<p>
						<input class="submit" type="submit" value="Submit">
					</p>
				</fieldset>
			</form>


		</div>
	</fieldset>

	<fieldset>
		<legend>Filters</legend>
		<div>

			<p>Integration de lal library filters.</p>
			<p>
				<ul>
					<li>Class de chargement : js-call-pyrofilters</li>
					<li>Event de fin de chargement de la library : CVEPDB_PYROCMS_FILTER_READY</li>
					<li>Reference : /</li>
				</ul>
			</p>

			<p>
				<code><pre>
				$(D).bind('CVEPDB_PYROCMS_FILTER_READY', function(){
					cvepdb.filter.display_get_filters = false; // Affiche (true) ou masque (false) la requete GET du filtre
				dans l'url pour le partage de recherche
				});
				</pre></code>
			</p>

			<div id="filters">
				<form action="#url-to-page-to-refresh-table" method="post" accept-charset="utf-8">
					<input type="hidden" name="f_module" value="customers">

					<div style="width:50px; float:left; margin-right: 10px; padding-top: 5px;">Filters</div>

						<div style="width:250px; float:left; margin-right: 10px;">
							<div class="input">
								<select name="f_status">
									<option value="0">Tous</option>
									<option value="draft">Draft</option>
									<option value="acompte">Waiting first paiement</option>
									<option value="development">Development</option>
									<option value="test">Tests and quality assurance</option>
									<option value="paiement">Waiting paiement</option>
									<option value="delivered">Delivered</option>
								</select>
							</div>
						</div>
						<div style="width:50px; float:left;">
							<div class="input">
								<a href="#url-to-current-page" class="button green cancel ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button">
									<span class="ui-button-text">Cancel</span>
								</a>
						</div>
					</div>
				</form>
			</div>

			<div class="js-call-pyrofilters">

					<div id="filter-stage" style="display: block;">
						



					</div>

			</div>


		</div>
	</fieldset>





	<!-- JS -->
	<script type="text/javascript" src="./libs/jquery/dist/jquery.min.js"></script>
	<script type="text/javascript" src="./libs/jquery-ui/jquery-ui.min.js"></script>
	<script type="text/javascript" src="./libs/headjs/dist/1.0.0/head.min.js"></script>
	<script type="text/javascript" src="./cvepdb.js"></script>

	<!-- JS DEMO -->
	<script type="text/javascript" src="demo/form_validation.js"></script>

</body>
</html>
