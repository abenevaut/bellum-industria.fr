d3=function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function n(t){for(var e=1;t*e%1;)e*=10;return e}function r(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(n){t.prototype=e}}function i(){}function a(){}function o(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function s(){}function l(t){function e(){for(var e,r=n,i=-1,a=r.length;++i<a;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new i;return e.on=function(e,i){var a,o=r.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function c(){ca.event.stopPropagation(),ca.event.preventDefault()}function u(){for(var t,e=ca.event;t=e.sourceEvent;)e=t;return e}function h(t,e){function n(){t.on(e,null)}t.on(e,function(){c(),n()},!0),setTimeout(n,0)}function d(t){for(var e=new s,n=0,r=arguments.length;++n<r;)e[arguments[n]]=l(e);return e.of=function(n,r){return function(i){try{var a=i.sourceEvent=ca.event;i.target=t,ca.event=i,e[i.type].apply(n,r)}finally{ca.event=a}}},e}function f(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>ma&&(ha.scrollX||ha.scrollY)){n=ca.select(ua.body).append("svg").style("position","absolute").style("top",0).style("left",0);var i=n[0][0].getScreenCTM();ma=!(i.f||i.e),n.remove()}return ma?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function p(t){for(var e=-1,n=t.length,r=[];++e<n;)r.push(t[e]);return r}function g(t){return Array.prototype.slice.call(t)}function v(t){return xa(t,Ca),t}function m(t){return function(){return ba(t,this)}}function y(t){return function(){return wa(t,this)}}function x(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=ca.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?s:o:t.local?a:i}function w(t){return t.trim().replace(/\s+/g," ")}function k(t){return new RegExp("(?:^|\\s+)"+ca.requote(t)+"(?:\\s+|$)","g")}function M(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=t.trim().split(/\s+/).map(S);var i=t.length;return"function"==typeof e?r:n}function S(t){var e=k(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",w(i+" "+t))):n.setAttribute("class",w(i.replace(e," ")))}}function C(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function a(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?a:i}function A(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function _(t){return{__data__:t}}function E(t){return function(){return Sa(this,t)}}function D(t){return arguments.length||(t=ca.ascending),function(e,n){return!e-!n||t(e.__data__,n.__data__)}}function T(){}function N(t,e,n){function r(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function i(){var i=l(e,ya(arguments));r.call(this),this.addEventListener(t,this[o]=i,i.$=n),i._=e}function a(){var e,n=new RegExp("^__on([^.]+)"+ca.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var o="__on"+t,s=t.indexOf("."),l=F;s>0&&(t=t.substring(0,s));var c=Ea.get(t);return c&&(t=c,l=z),s?e?i:r:e?T:a}function F(t,e){return function(n){var r=ca.event;ca.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{ca.event=r}}}function z(t,e){var n=F(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function I(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,a=t[n],o=0,s=a.length;s>o;o++)(i=a[o])&&e(i,o,n);return t}function R(t){return xa(t,Da),t}function L(){}function H(t,e,n){return new P(t,e,n)}function P(t,e,n){this.h=t,this.s=e,this.l=n}function W(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(o-a)*t/60:180>t?o:240>t?a+(o-a)*(240-t)/60:a}function i(t){return Math.round(255*r(t))}var a,o;return t%=360,0>t&&(t+=360),e=0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,a=2*n-o,nt(i(t+120),i(t),i(t-120))}function B(t){return t>0?1:0>t?-1:0}function Y(t){return Math.acos(Math.max(-1,Math.min(1,t)))}function G(t){return t>1?Ra/2:-1>t?-Ra/2:Math.asin(t)}function V(t){return(Math.exp(t)-Math.exp(-t))/2}function O(t){return(Math.exp(t)+Math.exp(-t))/2}function j(t){return(t=Math.sin(t/2))*t}function q(t,e,n){return new X(t,e,n)}function X(t,e,n){this.h=t,this.c=e,this.l=n}function U(t,e,n){return Z(n,Math.cos(t*=Ha)*e,Math.sin(t)*e)}function Z(t,e,n){return new K(t,e,n)}function K(t,e,n){this.l=t,this.a=e,this.b=n}function Q(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return i=$(i)*Ya,r=$(r)*Ga,a=$(a)*Va,nt(et(3.2404542*i-1.5371385*r-.4985314*a),et(-.969266*i+1.8760108*r+.041556*a),et(.0556434*i-.2040259*r+1.0572252*a))}function J(t,e,n){return q(Math.atan2(n,e)*Pa,Math.sqrt(e*e+n*n),t)}function $(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function tt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function et(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function nt(t,e,n){return new rt(t,e,n)}function rt(t,e,n){this.r=t,this.g=e,this.b=n}function it(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function at(t,e,n){var r,i,a,o=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(ct(i[0]),ct(i[1]),ct(i[2]))}return(a=qa.get(t))?e(a.r,a.g,a.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(o=t.charAt(1),o+=o,s=t.charAt(2),s+=s,l=t.charAt(3),l+=l):7===t.length&&(o=t.substring(1,3),s=t.substring(3,5),l=t.substring(5,7)),o=parseInt(o,16),s=parseInt(s,16),l=parseInt(l,16)),e(o,s,l))}function ot(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,l=(o+a)/2;return s?(i=.5>l?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(n>e?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):i=r=0,H(r,i,l)}function st(t,e,n){t=lt(t),e=lt(e),n=lt(n);var r=tt((.4124564*t+.3575761*e+.1804375*n)/Ya),i=tt((.2126729*t+.7151522*e+.072175*n)/Ga);return Z(116*i-16,500*(r-i),200*(i-tt((.0193339*t+.119192*e+.9503041*n)/Va)))}function lt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ct(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function ut(t){return"function"==typeof t?t:function(){return t}}function ht(t){return t}function dt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function ft(t,e){function n(t,n,a){arguments.length<3&&(a=n,n=null);var o=ca.xhr(t,e,a);return o.row=function(t){return arguments.length?o.response(null==(n=t)?r:i(t)):n},o.row(n)}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(s).join(t)}function s(t){return l.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var l=new RegExp('["'+t+"\n]"),c=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(u>=l)return o;if(i)return i=!1,a;var e=u;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}u=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++u):10===r&&(i=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;l>u;){var r=t.charCodeAt(u++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(u)&&(++u,++s);else if(r!==c)continue;return t.substring(e,u-s)}return t.substring(e)}for(var r,i,a={},o={},s=[],l=t.length,u=0,h=0;(r=n())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=n();(!e||(d=e(d,h++)))&&s.push(d)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new a,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(s).join(t)].concat(e.map(function(e){return i.map(function(t){return s(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n}function pt(){for(var t,e=Date.now(),n=Qa;n;)t=e-n.then,t>=n.delay&&(n.flush=n.callback(t)),n=n.next;var r=gt()-e;r>24?(isFinite(r)&&(clearTimeout(Ua),Ua=setTimeout(pt,r)),Xa=0):(Xa=1,Ja(pt))}function gt(){for(var t=null,e=Qa,n=1/0;e;)e.flush?(delete Ka[e.callback.id],e=t?t.next=e.next:Qa=e.next):(n=Math.min(n,e.then+e.delay),e=(t=e).next);return n}function vt(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function mt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function yt(t){return t+""}function xt(t,e){t&&oo.hasOwnProperty(t.type)&&oo[t.type](t,e)}function bt(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1]);e.lineEnd()}function wt(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)bt(t[n],e,1);e.polygonEnd()}function kt(){function t(t,e){t*=Ha,e=e*Ha/2+Ra/4;var n=t-r,o=Math.cos(e),s=Math.sin(e),l=a*s,c=lo,u=co,h=i*o+l*Math.cos(n),d=l*Math.sin(n);lo=c*h-u*d,co=u*h+c*d,r=t,i=o,a=s}var e,n,r,i,a;uo.point=function(o,s){uo.point=t,r=(e=o)*Ha,i=Math.cos(s=(n=s)*Ha/2+Ra/4),a=Math.sin(s)},uo.lineEnd=function(){t(e,n)}}function Mt(t){function e(t,e){r>t&&(r=t),t>a&&(a=t),i>e&&(i=e),e>o&&(o=e)}function n(){s.point=s.lineEnd=T}var r,i,a,o,s={point:e,lineStart:T,lineEnd:T,polygonStart:function(){s.lineEnd=n},polygonEnd:function(){s.point=e}};return function(e){return o=a=-(r=i=1/0),ca.geo.stream(e,t(s)),[[r,i],[a,o]]}}function St(t,e){if(!ho){++fo,t*=Ha;var n=Math.cos(e*=Ha);po+=(n*Math.cos(t)-po)/fo,go+=(n*Math.sin(t)-go)/fo,vo+=(Math.sin(e)-vo)/fo}}function Ct(){var t,e;ho=1,At(),ho=2;var n=mo.point;mo.point=function(r,i){n(t=r,e=i)},mo.lineEnd=function(){mo.point(t,e),_t(),mo.lineEnd=_t}}function At(){function t(t,i){t*=Ha;var a=Math.cos(i*=Ha),o=a*Math.cos(t),s=a*Math.sin(t),l=Math.sin(i),c=Math.atan2(Math.sqrt((c=n*l-r*s)*c+(c=r*o-e*l)*c+(c=e*s-n*o)*c),e*o+n*s+r*l);fo+=c,po+=c*(e+(e=o)),go+=c*(n+(n=s)),vo+=c*(r+(r=l))}var e,n,r;ho>1||(1>ho&&(ho=1,fo=po=go=vo=0),mo.point=function(i,a){i*=Ha;var o=Math.cos(a*=Ha);e=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),mo.point=t})}function _t(){mo.point=St}function Et(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Dt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Tt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Nt(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ft(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function zt(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function It(){return!0}function Rt(t){return[Math.atan2(t[1],t[0]),Math.asin(Math.max(-1,Math.min(1,t[2])))]}function Lt(t,e){return Math.abs(t[0]-e[0])<La&&Math.abs(t[1]-e[1])<La}function Ht(t,e,n,r,i){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Lt(n,r)){i.lineStart();for(var s=0;e>s;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var l={point:n,points:t,other:null,visited:!1,entry:!0,subject:!0},c={point:n,points:[n],other:l,visited:!1,entry:!1,subject:!1};l.other=c,a.push(l),o.push(c),l={point:r,points:[r],other:null,visited:!1,entry:!1,subject:!0},c={point:r,points:[r],other:l,visited:!1,entry:!0,subject:!1},l.other=c,a.push(l),o.push(c)}}),o.sort(e),Pt(a),Pt(o),a.length){if(n)for(var s=1,l=!n(o[0].point),c=o.length;c>s;++s)o[s].entry=l=!l;for(var u,h,d,f=a[0];;){for(u=f;u.visited;)if((u=u.next)===f)return;h=u.points,i.lineStart();do{if(u.visited=u.other.visited=!0,u.entry){if(u.subject)for(var s=0;s<h.length;s++)i.point((d=h[s])[0],d[1]);else r(u.point,u.next.point,1,i);u=u.next}else{if(u.subject){h=u.prev.points;for(var s=h.length;--s>=0;)i.point((d=h[s])[0],d[1])}else r(u.point,u.prev.point,-1,i);u=u.prev}u=u.other,h=u.points}while(!u.visited);i.lineEnd()}}}function Pt(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.next=n=t[r],n.prev=i,i=n;i.next=n=t[0],n.prev=i}}function Wt(t,e,n){return function(r){function i(e,n){t(e,n)&&r.point(e,n)}function a(t,e){v.point(t,e)}function o(){m.point=a,v.lineStart()}function s(){m.point=i,v.lineEnd()}function l(t,e){x.point(t,e),g.push([t,e])}function c(){x.lineStart(),g=[]}function u(){l(g[0][0],g[0][1]),x.lineEnd();var t,e=x.clean(),n=y.buffer(),i=n.length;if(!i)return p=!0,f+=Gt(g,-1),void(g=null);if(g=null,1&e){t=n[0],d+=Gt(t,1);var a,i=t.length-1,o=-1;for(r.lineStart();++o<i;)r.point((a=t[o])[0],a[1]);return void r.lineEnd()}i>1&&2&e&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Bt))}var h,d,f,p,g,v=e(r),m={point:i,lineStart:o,lineEnd:s,polygonStart:function(){m.point=l,m.lineStart=c,m.lineEnd=u,p=!1,f=d=0,h=[],r.polygonStart()},polygonEnd:function(){m.point=i,m.lineStart=o,m.lineEnd=s,h=ca.merge(h),h.length?Ht(h,Vt,null,n,r):(-La>d||p&&-La>f)&&(r.lineStart(),n(null,null,1,r),r.lineEnd()),r.polygonEnd(),h=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}},y=Yt(),x=e(y);return m}}function Bt(t){return t.length>1}function Yt(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:T,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Gt(t,e){if(!(n=t.length))return 0;for(var n,r,i,a=0,o=0,s=t[0],l=s[0],c=s[1],u=Math.cos(c),h=Math.atan2(e*Math.sin(l)*u,Math.sin(c)),d=1-e*Math.cos(l)*u,f=h;++a<n;)s=t[a],u=Math.cos(c=s[1]),r=Math.atan2(e*Math.sin(l=s[0])*u,Math.sin(c)),i=1-e*Math.cos(l)*u,Math.abs(d-2)<La&&Math.abs(i-2)<La||(Math.abs(i)<La||Math.abs(d)<La||(Math.abs(Math.abs(r-h)-Ra)<La?i+d>2&&(o+=4*(r-h)):o+=Math.abs(d-2)<La?4*(r-f):((3*Ra+r-h)%(2*Ra)-Ra)*(d+i)),f=h,h=r,d=i);return o}function Vt(t,e){return((t=t.point)[0]<0?t[1]-Ra/2-La:Ra/2-t[1])-((e=e.point)[0]<0?e[1]-Ra/2-La:Ra/2-e[1])}function Ot(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Ra:-Ra,l=Math.abs(a-n);Math.abs(l-Ra)<La?(t.point(n,r=(r+o)/2>0?Ra/2:-Ra/2),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&l>=Ra&&(Math.abs(n-i)<La&&(n-=i*La),Math.abs(a-s)<La&&(a-=s*La),r=jt(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function jt(t,e,n,r){var i,a,o=Math.sin(t-n);return Math.abs(o)>La?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}function qt(t,e,n,r){var i;if(null==t)i=n*Ra/2,r.point(-Ra,i),r.point(0,i),r.point(Ra,i),r.point(Ra,0),r.point(Ra,-i),r.point(0,-i),r.point(-Ra,-i),r.point(-Ra,0),r.point(-Ra,i);else if(Math.abs(t[0]-e[0])>La){var a=(t[0]<e[0]?1:-1)*Ra;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function Xt(t){function e(t,e){return Math.cos(t)*Math.cos(e)>a}function n(t){var n,a,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,d){var f,p=[h,d],g=e(h,d),v=o?g?0:i(h,d):g?i(h+(0>h?Ra:-Ra),d):0;if(!n&&(c=l=g)&&t.lineStart(),g!==l&&(f=r(n,p),(Lt(n,f)||Lt(p,f))&&(p[0]+=La,p[1]+=La,g=e(p[0],p[1]))),g!==l)u=0,g?(t.lineStart(),f=r(p,n),t.point(f[0],f[1])):(f=r(n,p),t.point(f[0],f[1]),t.lineEnd()),n=f;else if(s&&n&&o^g){var m;v&a||!(m=r(p,n,!0))||(u=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||n&&Lt(n,p)||t.point(p[0],p[1]),n=p,l=g,a=v},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return u|(c&&l)<<1}}}function r(t,e,n){var r=Et(t),i=Et(e),o=[1,0,0],s=Tt(r,i),l=Dt(s,s),c=s[0],u=l-c*c;if(!u)return!n&&t;var h=a*l/u,d=-a*c/u,f=Tt(o,s),p=Ft(o,h);Nt(p,Ft(s,d));var g=f,v=Dt(p,g),m=Dt(g,g),y=v*v-m*(Dt(p,p)-1);if(!(0>y)){var x=Math.sqrt(y),b=Ft(g,(-v-x)/m);if(Nt(b,p),b=Rt(b),!n)return b;var w,k=t[0],M=e[0],S=t[1],C=e[1];k>M&&(w=k,k=M,M=w);var A=M-k,_=Math.abs(A-Ra)<La,E=_||La>A;if(!_&&S>C&&(w=S,S=C,C=w),E?_?S+C>0^b[1]<(Math.abs(b[0]-k)<La?S:C):S<=b[1]&&b[1]<=C:A>Ra^(k<=b[0]&&b[0]<=M)){var D=Ft(g,(-v+x)/m);return Nt(D,p),[b,Rt(D)]}}}function i(e,n){var r=o?t:Ra-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var a=Math.cos(t),o=a>0,s=Math.abs(a)>La;return Wt(e,n,oe(t,6*Ha))}function Ut(t,e,n,r){function i(r,i){return Math.abs(r[0]-t)<La?i>0?0:3:Math.abs(r[0]-n)<La?i>0?2:1:Math.abs(r[1]-e)<La?i>0?1:0:i>0?3:2}function a(t,e){return o(t.point,e.point)}function o(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}function s(i,a){var o=a[0]-i[0],s=a[1]-i[1],l=[0,1];return Math.abs(o)<La&&Math.abs(s)<La?t<=i[0]&&i[0]<=n&&e<=i[1]&&i[1]<=r:!!(Zt(t-i[0],o,l)&&Zt(i[0]-n,-o,l)&&Zt(e-i[1],s,l)&&Zt(i[1]-r,-s,l))&&(l[1]<1&&(a[0]=i[0]+l[1]*o,a[1]=i[1]+l[1]*s),l[0]>0&&(i[0]+=l[0]*o,i[1]+=l[0]*s),!0)}return function(l){function c(a){var o=i(a,-1);return u([0===o||3===o?t:n,o>1?r:e])}function u(t){for(var e=0,n=x.length,r=t[1],i=0;n>i;++i)for(var a=1,o=x[i],s=o.length,l=o[0];s>a;++a)b=o[a],l[1]<=r?b[1]>r&&h(l,b,t)>0&&++e:b[1]<=r&&h(l,b,t)<0&&--e,l=b;return 0!==e}function h(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function d(a,s,l,c){var u=0,h=0;if(null==a||(u=i(a,l))!==(h=i(s,l))||o(a,s)<0^l>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+l+4)%4)!==h);else c.point(s[0],s[1])}function f(i,a){return i>=t&&n>=i&&a>=e&&r>=a}function p(t,e){f(t,e)&&l.point(t,e)}function g(){N.point=m,x&&x.push(w=[]),E=!0,_=!1,C=A=NaN}function v(){y&&(m(k,M),S&&_&&T.rejoin(),y.push(T.buffer())),N.point=p,_&&l.lineEnd()}function m(t,e){t=Math.max(-xo,Math.min(xo,t)),e=Math.max(-xo,Math.min(xo,e));var n=f(t,e);if(x&&w.push([t,e]),E)k=t,M=e,S=n,E=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&_)l.point(t,e);else{var r=[C,A],i=[t,e];s(r,i)?(_||(l.lineStart(),l.point(r[0],r[1])),l.point(i[0],i[1]),n||l.lineEnd()):(l.lineStart(),l.point(t,e))}C=t,A=e,_=n}var y,x,w,k,M,S,C,A,_,E,D=l,T=Yt(),N={point:p,lineStart:g,lineEnd:v,polygonStart:function(){l=T,y=[],x=[]},polygonEnd:function(){l=D,(y=ca.merge(y)).length?(l.polygonStart(),Ht(y,a,c,d,l),l.polygonEnd()):u([t,e])&&(l.polygonStart(),l.lineStart(),d(null,null,1,l),l.lineEnd(),l.polygonEnd()),y=x=w=null}};return N}}function Zt(t,e,n){if(Math.abs(e)<La)return 0>=t;var r=t/e;if(e>0){if(r>n[1])return!1;r>n[0]&&(n[0]=r)}else{if(r<n[0])return!1;r<n[1]&&(n[1]=r)}return!0}function Kt(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Qt(t){function e(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function a(){u=NaN,g.point=o,e.lineStart()}function o(r,a){var o=Et([r,a]),s=t(r,a);n(u,h,c,d,f,p,u=s[0],h=s[1],c=r,d=o[0],f=o[1],p=o[2],i,e),e.point(u,h)}function s(){g.point=r,e.lineEnd()}function l(){var t,r,l,v,m,y,x;a(),g.point=function(e,n){o(t=e,r=n),l=u,v=h,m=d,y=f,x=p,g.point=o},g.lineEnd=function(){n(u,h,c,d,f,p,l,v,t,m,y,x,i,e),g.lineEnd=s,s()}}var c,u,h,d,f,p,g={point:r,lineStart:a,lineEnd:s,polygonStart:function(){e.polygonStart(),g.lineStart=l},polygonEnd:function(){e.polygonEnd(),g.lineStart=a}};return g}function n(e,i,a,o,s,l,c,u,h,d,f,p,g,v){var m=c-e,y=u-i,x=m*m+y*y;if(x>4*r&&g--){var b=o+d,w=s+f,k=l+p,M=Math.sqrt(b*b+w*w+k*k),S=Math.asin(k/=M),C=Math.abs(Math.abs(k)-1)<La?(a+h)/2:Math.atan2(w,b),A=t(C,S),_=A[0],E=A[1],D=_-e,T=E-i,N=y*D-m*T;(N*N/x>r||Math.abs((m*D+y*T)/x-.5)>.3)&&(n(e,i,a,o,s,l,_,E,C,b/=M,w/=M,k,g,v),v.point(_,E),n(_,E,C,b,w,k,c,u,h,d,f,p,g,v))}}var r=.5,i=16;return e.precision=function(t){return arguments.length?(i=(r=t*t)>0&&16,e):Math.sqrt(r)},e}function Jt(t){return $t(function(){return t})()}function $t(t){function e(t){return t=o(t[0]*Ha,t[1]*Ha),[t[0]*u+s,l-t[1]*u]}function n(t){return(t=o.invert((t[0]-s)/u,(l-t[1])/u))&&[t[0]*Pa,t[1]*Pa]}function r(){o=Kt(a=ne(g,v,m),i);var t=i(f,p);return s=h-t[0]*u,l=d+t[1]*u,e}var i,a,o,s,l,c=Qt(function(t,e){return t=i(t,e),[t[0]*u+s,l-t[1]*u]}),u=150,h=480,d=250,f=0,p=0,g=0,v=0,m=0,y=yo,x=ht,b=null,w=null;return e.stream=function(t){return te(a,y(c(x(t))))},e.clipAngle=function(t){return arguments.length?(y=null==t?(b=t,yo):Xt((b=+t)*Ha),e):b},e.clipExtent=function(t){return arguments.length?(w=t,x=null==t?ht:Ut(t[0][0],t[0][1],t[1][0],t[1][1]),e):w},e.scale=function(t){return arguments.length?(u=+t,r()):u},e.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],r()):[h,d]},e.center=function(t){return arguments.length?(f=t[0]%360*Ha,p=t[1]%360*Ha,r()):[f*Pa,p*Pa]},e.rotate=function(t){return arguments.length?(g=t[0]%360*Ha,v=t[1]%360*Ha,m=t.length>2?t[2]%360*Ha:0,r()):[g*Pa,v*Pa,m*Pa]},ca.rebind(e,c,"precision"),function(){return i=t.apply(this,arguments),e.invert=i.invert&&n,r()}}function te(t,e){return{point:function(n,r){r=t(n*Ha,r*Ha),n=r[0],e.point(n>Ra?n-2*Ra:-Ra>n?n+2*Ra:n,r[1])},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function ee(t,e){return[t,e]}function ne(t,e,n){return t?e||n?Kt(ie(t),ae(e,n)):ie(t):e||n?ae(e,n):ee}function re(t){return function(e,n){return e+=t,[e>Ra?e-2*Ra:-Ra>e?e+2*Ra:e,n]}}function ie(t){var e=re(t);return e.invert=re(-t),e}function ae(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,c=Math.sin(e),u=c*r+s*i;return[Math.atan2(l*a-u*o,s*r-c*i),Math.asin(Math.max(-1,Math.min(1,u*a+l*o)))]}var r=Math.cos(t),i=Math.sin(t),a=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,c=Math.sin(e),u=c*a-l*o;return[Math.atan2(l*a+c*o,s*r+u*i),Math.asin(Math.max(-1,Math.min(1,u*r-s*i)))]},n}function oe(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,s){null!=i?(i=se(n,i),a=se(n,a),(o>0?a>i:i>a)&&(i+=2*o*Ra)):(i=t+2*o*Ra,a=t);for(var l,c=o*e,u=i;o>0?u>a:a>u;u-=c)s.point((l=Rt([n,-r*Math.cos(u),-r*Math.sin(u)]))[0],l[1])}}function se(t,e){var n=Et(e);n[0]-=t,zt(n);var r=Y(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-La)%(2*Math.PI)}function le(t,e,n){var r=ca.range(t,e-La,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function ce(t,e,n){var r=ca.range(t,e-La,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function ue(t){return t.source}function he(t){return t.target}function de(t,e,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(r),s=Math.sin(r),l=i*Math.cos(t),c=i*Math.sin(t),u=o*Math.cos(n),h=o*Math.sin(n),d=2*Math.asin(Math.sqrt(j(r-e)+i*o*j(n-t))),f=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*f,n=Math.sin(d-t)*f,r=n*l+e*u,i=n*c+e*h,o=n*a+e*s;return[Math.atan2(i,r)*Pa,Math.atan2(o,Math.sqrt(r*r+i*i))*Pa]}:function(){return[t*Pa,e*Pa]};return p.distance=d,p}function fe(){function t(t,i){var a=Math.sin(i*=Ha),o=Math.cos(i),s=Math.abs((t*=Ha)-e),l=Math.cos(s);bo+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*a-n*o*l)*s),n*a+r*o*l),e=t,n=a,r=o}var e,n,r;wo.point=function(i,a){e=i*Ha,n=Math.sin(a*=Ha),r=Math.cos(a),wo.point=t},wo.lineEnd=function(){wo.point=wo.lineEnd=T}}function pe(t){var e=0,n=Ra/3,r=$t(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ra/180,n=t[1]*Ra/180):[e/Ra*180,n/Ra*180]},i}function ge(t,e){function n(t,e){var n=Math.sqrt(a-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,Math.asin((a-(t*t+n*n)*i*i)/(2*i))]},n}function ve(t,e){var n=t(e[0]),r=t([.5*(e[0][0]+e[1][0]),e[0][1]]),i=t([e[1][0],e[0][1]]),a=t(e[1]),o=r[1]-n[1],s=r[0]-n[0],l=i[1]-r[1],c=i[0]-r[0],u=o/s,h=l/c,d=.5*(u*h*(n[1]-i[1])+h*(n[0]+r[0])-u*(r[0]+i[0]))/(h-u),f=(.5*(n[0]+r[0])-d)/u+.5*(n[1]+r[1]),p=a[0]-d,g=a[1]-f,v=n[0]-d,m=n[1]-f,y=p*p+g*g,x=v*v+m*m,b=Math.atan2(g,p),w=Math.atan2(m,v);return function(e){var n=e[0]-d,r=e[1]-f,i=n*n+r*r,a=Math.atan2(r,n);return i>y&&x>i&&a>b&&w>a?t.invert(e):void 0}}function me(){function t(t,e){Mo+=i*t-r*e,r=t,i=e}var e,n,r,i;So.point=function(a,o){So.point=t,e=r=a,n=i=o},So.lineEnd=function(){t(e,n)}}function ye(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function r(){s.point=t}function i(){o.push("Z")}var a=Se(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return a=Se(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}function xe(t,e){ho||(po+=t,go+=e,++vo)}function be(){function t(t,r){var i=t-e,a=r-n,o=Math.sqrt(i*i+a*a);po+=o*(e+t)/2,go+=o*(n+r)/2,vo+=o,e=t,n=r}var e,n;if(1!==ho){if(!(1>ho))return;ho=1,po=go=vo=0}Co.point=function(r,i){Co.point=t,e=r,n=i}}function we(){Co.point=xe}function ke(){function t(t,e){var n=i*t-r*e;po+=n*(r+t),go+=n*(i+e),vo+=3*n,r=t,i=e}var e,n,r,i;2>ho&&(ho=2,po=go=vo=0),Co.point=function(a,o){Co.point=t,e=r=a,n=i=o},Co.lineEnd=function(){t(e,n)}}function Me(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,o,0,2*Ra)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function a(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return o=t,s},result:T};return s}function Se(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ce(t){var e=Qt(function(e,n){return t([e*Pa,n*Pa])});return function(t){return t=e(t),{point:function(e,n){t.point(e*Ha,n*Ha)},sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}}function Ae(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),a=t(r*i);return[a*i*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,r*o),Math.asin(r&&n*a/r)]},n}function _e(t,e){function n(t,e){var n=Math.abs(Math.abs(e)-Ra/2)<La?0:o/Math.pow(i(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Ra/4+t/2)},a=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),o=r*Math.pow(i(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,r=B(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/r,1/a))-Ra/2]},n):De}function Ee(t,e){function n(t,e){var n=a-e;return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),a=r/i+t;return Math.abs(i)<La?ee:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,a-B(i)*Math.sqrt(t*t+n*n)]},n)}function De(t,e){return[t,Math.log(Math.tan(Ra/4+e/2))]}function Te(t){var e,n=Jt(t),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=Ra*r(),l=i();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}function Ne(t,e){var n=Math.cos(e)*Math.sin(t);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(e),Math.cos(t))]}function Fe(t){function e(e){function o(){c.push("M",a(t(u),s))}for(var l,c=[],u=[],h=-1,d=e.length,f=ut(n),p=ut(r);++h<d;)i.call(this,l=e[h],h)?u.push([+f.call(this,l,h),+p.call(this,l,h)]):u.length&&(o(),u=[]);return u.length&&o(),c.length?c.join(""):null}var n=ze,r=Ie,i=It,a=Re,o=a.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=No.get(t)||Re).key,e):o},e.tension=function(t){return arguments.length?(s=t,e):s},e}function ze(t){return t[0]}function Ie(t){return t[1]}function Re(t){return t.join("L")}function Le(t){return Re(t)+"Z"}function He(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Pe(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function We(t,e){return t.length<4?Re(t):t[1]+Ge(t.slice(1,t.length-1),Ve(t,e))}function Be(t,e){return t.length<3?Re(t):t[0]+Ge((t.push(t[0]),t),Ve([t[t.length-2]].concat(t,[t[1]]),e))}function Ye(t,e){return t.length<3?Re(t):t[0]+Ge(t,Ve(t,e))}function Ge(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Re(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],l=2),e.length>1){s=e[1],a=t[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<e.length;c++,l++)a=t[l],s=e[c],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var u=t[l];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return r}function Ve(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)n=a,a=o,o=t[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Oe(t){if(t.length<3)return Re(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],l=[i,",",a];for(Ze(l,o,s);++e<n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ze(l,o,s);for(e=-1;++e<2;)o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ze(l,o,s);return l.join("")}function je(t){if(t.length<4)return Re(t);for(var e,n=[],r=-1,i=t.length,a=[0],o=[0];++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);for(n.push(Ue(Io,a)+","+Ue(Io,o)),--r;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Ze(n,a,o);return n.join("")}function qe(t){for(var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];++r<4;)n=t[r%i],o.push(n[0]),s.push(n[1]);for(e=[Ue(Io,o),",",Ue(Io,s)],--r;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ze(e,o,s);return e.join("")}function Xe(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,l=t[n][1]-o,c=-1;++c<=n;)r=t[c],i=c/n,r[0]=e*r[0]+(1-e)*(a+i*s),r[1]=e*r[1]+(1-e)*(o+i*l);return Oe(t)}function Ue(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ze(t,e,n){t.push("C",Ue(Fo,e),",",Ue(Fo,n),",",Ue(zo,e),",",Ue(zo,n),",",Ue(Io,e),",",Ue(Io,n))}function Ke(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Qe(t){for(var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=Ke(i,a);++e<n;)r[e]=(o+(o=Ke(i=a,a=t[e+1])))/2;return r[e]=o,r}function Je(t){for(var e,n,r,i,a=[],o=Qe(t),s=-1,l=t.length-1;++s<l;)e=Ke(t[s],t[s+1]),Math.abs(e)<1e-6?o[s]=o[s+1]=0:(n=o[s]/e,r=o[s+1]/e,(i=n*n+r*r)>9&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function $e(t){return t.length<3?Re(t):t[0]+Ge(t,Je(t))}function tn(t,e,n,r){var i,a,o,s,l,c;return i=r[t],a=i[0],o=i[1],i=r[e],s=i[0],l=i[1],i=r[n],c=i[0],(i[1]-o)*(s-a)-(l-o)*(c-a)>0}function en(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function nn(t,e,n,r){
var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,l=t[1],c=n[1],u=e[1]-l,h=r[1]-c,d=(s*(l-c)-h*(i-a))/(h*o-s*u);return[i+d*o,l+d*u]}function rn(t,e){var n={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l"),r.rightEnd=r.createHalfEdge(null,"l"),r.leftEnd.r=r.rightEnd,r.rightEnd.l=r.leftEnd,r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=r.leftEnd;do{e=e.r}while(e!=r.rightEnd&&i.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[Ro[t.side]]}},i={bisect:function(t,e){var n={region:{l:t,r:e},ep:{l:null,r:null}},r=e.x-t.x,i=e.y-t.y,a=r>0?r:-r,o=i>0?i:-i;return n.c=t.x*r+t.y*i+.5*(r*r+i*i),a>o?(n.a=1,n.b=i/r,n.c/=r):(n.b=1,n.a=r/i,n.c/=i),n},intersect:function(t,e){var n=t.edge,r=e.edge;if(!n||!r||n.region.r==r.region.r)return null;var i=n.a*r.b-n.b*r.a;if(Math.abs(i)<1e-10)return null;var a,o,s=(n.c*r.b-r.c*n.b)/i,l=(r.c*n.a-n.c*r.a)/i,c=n.region.r,u=r.region.r;c.y<u.y||c.y==u.y&&c.x<u.x?(a=t,o=n):(a=e,o=r);var h=s>=o.region.r.x;return h&&"l"===a.side||!h&&"r"===a.side?null:{x:s,y:l}},rightOf:function(t,e){var n=t.edge,r=n.region.r,i=e.x>r.x;if(i&&"l"===t.side)return 1;if(!i&&"r"===t.side)return 0;if(1===n.a){var a=e.y-r.y,o=e.x-r.x,s=0,l=0;if(!i&&n.b<0||i&&n.b>=0?l=s=a>=n.b*o:(l=e.x+e.y*n.b>n.c,n.b<0&&(l=!l),l||(s=1)),!s){var c=r.x-n.region.l.x;l=n.b*(o*o-a*a)<c*a*(1+2*o/c+n.b*n.b),n.b<0&&(l=!l)}}else{var u=n.c-n.a*e.x,h=e.y-u,d=e.x-r.x,f=u-r.y;l=h*h>d*d+f*f}return"l"===t.side?l:!l},endPoint:function(t,n,r){t.ep[n]=r,t.ep[Ro[n]]&&e(t)},distance:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}},a={list:[],insert:function(t,e,n){t.vertex=e,t.ystar=e.y+n;for(var r=0,i=a.list,o=i.length;o>r;r++){var s=i[r];if(!(t.ystar>s.ystar||t.ystar==s.ystar&&e.x>s.vertex.x))break}i.splice(r,0,t)},del:function(t){for(var e=0,n=a.list,r=n.length;r>e&&n[e]!=t;++e);n.splice(e,1)},empty:function(){return 0===a.list.length},nextEvent:function(t){for(var e=0,n=a.list,r=n.length;r>e;++e)if(n[e]==t)return n[e+1];return null},min:function(){var t=a.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return a.list.shift()}};r.init(),n.bottomSite=n.list.shift();for(var o,s,l,c,u,h,d,f,p,g,v,m,y,x=n.list.shift();;)if(a.empty()||(o=a.min()),x&&(a.empty()||x.y<o.y||x.y==o.y&&x.x<o.x))s=r.leftBound(x),l=r.right(s),d=r.rightRegion(s),m=i.bisect(d,x),h=r.createHalfEdge(m,"l"),r.insert(s,h),g=i.intersect(s,h),g&&(a.del(s),a.insert(s,g,i.distance(g,x))),s=h,h=r.createHalfEdge(m,"r"),r.insert(s,h),g=i.intersect(h,l),g&&a.insert(h,g,i.distance(g,x)),x=n.list.shift();else{if(a.empty())break;s=a.extractMin(),c=r.left(s),l=r.right(s),u=r.right(l),d=r.leftRegion(s),f=r.rightRegion(l),v=s.vertex,i.endPoint(s.edge,s.side,v),i.endPoint(l.edge,l.side,v),r.del(s),a.del(l),r.del(l),y="l",d.y>f.y&&(p=d,d=f,f=p,y="r"),m=i.bisect(d,f),h=r.createHalfEdge(m,y),r.insert(c,h),i.endPoint(m,Ro[y],v),g=i.intersect(c,h),g&&(a.del(c),a.insert(c,g,i.distance(g,d))),(g=i.intersect(h,u))&&a.insert(h,g,i.distance(g,d))}for(s=r.right(r.leftEnd);s!=r.rightEnd;s=r.right(s))e(s.edge)}function an(t){return t.x}function on(t){return t.y}function sn(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ln(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),l=e.nodes;l[0]&&ln(t,l[0],n,r,o,s),l[1]&&ln(t,l[1],o,r,i,s),l[2]&&ln(t,l[2],n,s,o,a),l[3]&&ln(t,l[3],o,s,i,a)}}function cn(t,e){t=ca.rgb(t),e=ca.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,o=e.g-r,s=e.b-i;return function(t){return"#"+it(Math.round(n+a*t))+it(Math.round(r+o*t))+it(Math.round(i+s*t))}}function un(t){var e=[t.a,t.b],n=[t.c,t.d],r=dn(e),i=hn(e,n),a=dn(fn(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Pa,this.translate=[t.e,t.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*Pa:0}function hn(t,e){return t[0]*e[0]+t[1]*e[1]}function dn(t){var e=Math.sqrt(hn(t,t));return e&&(t[0]/=e,t[1]/=e),e}function fn(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function pn(t,e){return e-=t=+t,function(n){return t+e*n}}function gn(t,e){var n,r=[],i=[],a=ca.transform(t),o=ca.transform(e),s=a.translate,l=o.translate,c=a.rotate,u=o.rotate,h=a.skew,d=o.skew,f=a.scale,p=o.scale;return s[0]!=l[0]||s[1]!=l[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:pn(s[0],l[0])},{i:3,x:pn(s[1],l[1])})):r.push(l[0]||l[1]?"translate("+l+")":""),c!=u?(c-u>180?u+=360:u-c>180&&(c+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:pn(c,u)})):u&&r.push(r.pop()+"rotate("+u+")"),h!=d?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:pn(h,d)}):d&&r.push(r.pop()+"skewX("+d+")"),f[0]!=p[0]||f[1]!=p[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:pn(f[0],p[0])},{i:n-2,x:pn(f[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),n=i.length,function(t){for(var e,a=-1;++a<n;)r[(e=i[a]).i]=e.x(t);return r.join("")}}function vn(t,e){var n,r={},i={};for(n in t)n in e?r[n]=xn(n)(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function mn(t,e){var n,r,i,a,o,s=0,l=[],c=[];for(t+="",e+="",Ho.lastIndex=0,r=0;n=Ho.exec(e);++r)n.index&&l.push(e.substring(s,n.index)),c.push({i:l.length,x:n[0]}),l.push(null),s=Ho.lastIndex;for(s<e.length&&l.push(e.substring(s)),r=0,a=c.length;(n=Ho.exec(t))&&a>r;++r)if(o=c[r],o.x==n[0]){if(o.i)if(null==l[o.i+1])for(l[o.i-1]+=o.x,l.splice(o.i,1),i=r+1;a>i;++i)c[i].i--;else for(l[o.i-1]+=o.x+l[o.i+1],l.splice(o.i,2),i=r+1;a>i;++i)c[i].i-=2;else if(null==l[o.i+1])l[o.i]=o.x;else for(l[o.i]=o.x+l[o.i+1],l.splice(o.i+1,1),i=r+1;a>i;++i)c[i].i--;c.splice(r,1),a--,r--}else o.x=pn(parseFloat(n[0]),parseFloat(o.x));for(;a>r;)o=c.pop(),null==l[o.i+1]?l[o.i]=o.x:(l[o.i]=o.x+l[o.i+1],l.splice(o.i+1,1)),a--;return 1===l.length?null==l[0]?c[0].x:function(){return e}:function(t){for(r=0;a>r;++r)l[(o=c[r]).i]=o.x(t);return l.join("")}}function yn(t,e){for(var n,r=ca.interpolators.length;--r>=0&&!(n=ca.interpolators[r](t,e)););return n}function xn(t){return"transform"==t?gn:yn}function bn(t,e){var n,r=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(yn(t[n],e[n]));for(;a>n;++n)i[n]=t[n];for(;o>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}}function wn(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function kn(t){return function(e){return 1-t(1-e)}}function Mn(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Sn(t){return t*t}function Cn(t){return t*t*t}function An(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function _n(t){return function(e){return Math.pow(e,t)}}function En(t){return 1-Math.cos(t*Ra/2)}function Dn(t){return Math.pow(2,10*(t-1))}function Tn(t){return 1-Math.sqrt(1-t*t)}function Nn(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/(2*Ra)*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,10*-r)*Math.sin(2*(r-n)*Ra/e)}}function Fn(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function zn(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function In(t,e){t=ca.hcl(t),e=ca.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,o=e.c-r,s=e.l-i;return a>180?a-=360:-180>a&&(a+=360),function(t){return U(n+a*t,r+o*t,i+s*t)+""}}function Rn(t,e){t=ca.hsl(t),e=ca.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,o=e.s-r,s=e.l-i;return a>180?a-=360:-180>a&&(a+=360),function(t){return W(n+a*t,r+o*t,i+s*t)+""}}function Ln(t,e){t=ca.lab(t),e=ca.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,o=e.a-r,s=e.b-i;return function(t){return Q(n+a*t,r+o*t,i+s*t)+""}}function Hn(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Pn(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function Wn(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function Bn(t){for(var e=t.source,n=t.target,r=Gn(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Yn(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Gn(t,e){if(t===e)return t;for(var n=Yn(t),r=Yn(e),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function Vn(t){t.fixed|=2}function On(t){t.fixed&=-7}function jn(t){t.fixed|=4,t.px=t.x,t.py=t.y}function qn(t){t.fixed&=-5}function Xn(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,l=-1;++l<s;)null!=(a=o[l])&&(Xn(a,e,n),t.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*n[t.point.index];t.charge+=t.pointCharge=c,r+=c*t.point.x,i+=c*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function Un(t,e){return ca.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Jn,t}function Zn(t){return t.children}function Kn(t){return t.value}function Qn(t,e){return e.value-t.value}function Jn(t){return ca.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function $n(t){return t.x}function tr(t){return t.y}function er(t,e,n){t.y0=e,t.y=n}function nr(t){return ca.range(t.length)}function rr(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function ir(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;a>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function ar(t){return t.reduce(or,0)}function or(t,e){return t+e[1]}function sr(t,e){return lr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function lr(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function cr(t){return[ca.min(t),ca.max(t)]}function ur(t,e){return t.parent==e.parent?1:2}function hr(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function dr(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function fr(t,e){var n=t.children;if(n&&(i=n.length))for(var r,i,a=-1;++a<i;)e(r=fr(n[a],e),t)>0&&(t=r);return t}function pr(t,e){return t.x-e.x}function gr(t,e){return e.x-t.x}function vr(t,e){return t.depth-e.depth}function mr(t,e){function n(t,r){var i=t.children;if(i&&(o=i.length))for(var a,o,s=null,l=-1;++l<o;)a=i[l],n(a,s),s=a;e(t,r)}n(t,null)}function yr(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)e=i[a]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(r+=e.change)}function xr(t,e,n){t=t._tree,e=e._tree;var r=n/(e.number-t.number);t.change+=r,e.change-=r,e.shift+=n,e.prelim+=n,e.mod+=n}function br(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function wr(t,e){return t.value-e.value}function kr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Mr(t,e){t._pack_next=e,e._pack_prev=t}function Sr(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-n*n-r*r>.001}function Cr(t){function e(t){u=Math.min(t.x-t.r,u),h=Math.max(t.x+t.r,h),d=Math.min(t.y-t.r,d),f=Math.max(t.y+t.r,f)}if((n=t.children)&&(c=n.length)){var n,r,i,a,o,s,l,c,u=1/0,h=-1/0,d=1/0,f=-1/0;if(n.forEach(Ar),r=n[0],r.x=-r.r,r.y=0,e(r),c>1&&(i=n[1],i.x=i.r,i.y=0,e(i),c>2))for(a=n[2],Dr(r,i,a),e(a),kr(r,a),r._pack_prev=a,kr(a,i),i=r._pack_next,o=3;c>o;o++){Dr(r,i,a=n[o]);var p=0,g=1,v=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(Sr(s,a)){p=1;break}if(1==p)for(l=r._pack_prev;l!==s._pack_prev&&!Sr(l,a);l=l._pack_prev,v++);p?(v>g||g==v&&i.r<r.r?Mr(r,i=s):Mr(r=l,i),o--):(kr(r,a),i=a,e(a))}var m=(u+h)/2,y=(d+f)/2,x=0;for(o=0;c>o;o++)a=n[o],a.x-=m,a.y-=y,x=Math.max(x,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=x,n.forEach(_r)}}function Ar(t){t._pack_next=t._pack_prev=t}function _r(t){delete t._pack_next,delete t._pack_prev}function Er(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var a=-1,o=i.length;++a<o;)Er(i[a],e,n,r)}function Dr(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a;o*=o,r*=r;var l=.5+(r-o)/(2*s),c=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+l*i+c*a,n.y=t.y+l*a-c*i}else n.x=t.x+r,n.y=t.y}function Tr(t){return 1+ca.max(t,function(t){return t.y})}function Nr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Fr(t){var e=t.children;return e&&e.length?Fr(e[0]):t}function zr(t){var e,n=t.children;return n&&(e=n.length)?zr(n[e-1]):t}function Ir(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Rr(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>a&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Lr(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Hr(t){return t.rangeExtent?t.rangeExtent():Lr(t.range())}function Pr(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function Wr(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return a>o&&(n=r,r=i,i=n,n=a,a=o,o=n),(e=e(o-a))&&(t[r]=e.floor(a),t[i]=e.ceil(o)),t}function Br(t,e,n,r){var i=[],a=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)i.push(n(t[o-1],t[o])),a.push(r(e[o-1],e[o]));return function(e){var n=ca.bisect(t,e,1,s)-1;return a[n](i[n](e))}}function Yr(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Br:Pr,l=r?Wn:Pn;return o=i(t,e,l,n),s=i(e,t,l,yn),a}function a(t){return o(t)}var o,s;return a.invert=function(t){return s(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},a.range=function(t){return arguments.length?(e=t,i()):e},a.rangeRound=function(t){return a.range(t).interpolate(Hn)},a.clamp=function(t){return arguments.length?(r=t,i()):r},a.interpolate=function(t){return arguments.length?(n=t,i()):n},a.ticks=function(e){return jr(t,e)},a.tickFormat=function(e,n){return qr(t,e,n)},a.nice=function(){return Wr(t,Vr),i()},a.copy=function(){return Yr(t,e,n,r)},i()}function Gr(t,e){return ca.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Vr(t){return(t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1))&&{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}}function Or(t,e){var n=Lr(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return.15>=a?i*=10:.35>=a?i*=5:.75>=a&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function jr(t,e){return ca.range.apply(ca,Or(t,e))}function qr(t,e,n){var r=-Math.floor(Math.log(Or(t,e)[2])/Math.LN10+.01);return ca.format(n?n.replace(eo,function(t,e,n,i,a,o,s,l,c,u){return[e,n,i,a,o,s,l,c||"."+(r-2*("%"===u)),u].join("")}):",."+r+"f")}function Xr(t,e,n,r){function i(e){return t(n(e))}return i.invert=function(e){return r(t.invert(e))},i.domain=function(e){return arguments.length?(e[0]<0?(n=Kr,r=Qr):(n=Ur,r=Zr),t.domain(e.map(n)),i):t.domain().map(r)},i.base=function(t){return arguments.length?(e=+t,i):e},i.nice=function(){return t.domain(Wr(t.domain(),Jr(e))),i},i.ticks=function(){var i=Lr(t.domain()),a=[];if(i.every(isFinite)){var o=Math.log(e),s=Math.floor(i[0]/o),l=Math.ceil(i[1]/o),c=r(i[0]),u=r(i[1]),h=e%1?2:e;if(n===Kr)for(a.push(-Math.pow(e,-s));s++<l;)for(var d=h-1;d>0;d--)a.push(-Math.pow(e,-s)*d);else{for(;l>s;s++)for(var d=1;h>d;d++)a.push(Math.pow(e,s)*d);a.push(Math.pow(e,s))}for(s=0;a[s]<c;s++);for(l=a.length;a[l-1]>u;l--);a=a.slice(s,l)}return a},i.tickFormat=function(t,a){if(arguments.length<2&&(a=qo),!arguments.length)return a;var o,s=Math.log(e),l=Math.max(.1,t/i.ticks().length),c=n===Kr?(o=-1e-12,Math.floor):(o=1e-12,Math.ceil);return function(t){return t/r(s*c(n(t)/s+o))<=l?a(t):""}},i.copy=function(){return Xr(t.copy(),e,n,r)},Gr(i,t)}function Ur(t){return Math.log(0>t?0:t)}function Zr(t){return Math.exp(t)}function Kr(t){return-Math.log(t>0?0:-t)}function Qr(t){return-Math.exp(-t)}function Jr(t){t=Math.log(t);var e={floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}};return function(){return e}}function $r(t,e){function n(e){return t(r(e))}var r=ti(e),i=ti(1/e);return n.invert=function(e){return i(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e.map(r)),n):t.domain().map(i)},n.ticks=function(t){return jr(n.domain(),t)},n.tickFormat=function(t,e){return qr(n.domain(),t,e)},n.nice=function(){return n.domain(Wr(n.domain(),Vr))},n.exponent=function(t){if(!arguments.length)return e;var a=n.domain();return r=ti(e=t),i=ti(1/e),n.domain(a)},n.copy=function(){return $r(t.copy(),e)},Gr(n,t)}function ti(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function ei(t,e){function n(e){return o[((a.get(e)||a.set(e,t.push(e)))-1)%o.length]}function r(e,n){return ca.range(t.length).map(function(t){return e+n*t})}var a,o,s;return n.domain=function(r){if(!arguments.length)return t;t=[],a=new i;for(var o,s=-1,l=r.length;++s<l;)a.has(o=r[s])||a.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,s=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,a){arguments.length<2&&(a=0);var l=i[0],c=i[1],u=(c-l)/(Math.max(1,t.length-1)+a);return o=r(t.length<2?(l+c)/2:l+u*a/2,u),s=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var c=i[1]<i[0],u=i[c-0],h=i[1-c],d=(h-u)/(t.length-a+2*l);return o=r(u+d*l,d),c&&o.reverse(),s=d*(1-a),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var c=i[1]<i[0],u=i[c-0],h=i[1-c],d=Math.floor((h-u)/(t.length-a+2*l)),f=h-u-(t.length-a)*d;return o=r(u+Math.round(f/2),d),c&&o.reverse(),s=Math.round(d*(1-a)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Lr(e.a[0])},n.copy=function(){return ei(t,e)},n.domain(t)}function ni(t,e){function n(){var n=0,a=e.length;for(i=[];++n<a;)i[n-1]=ca.quantile(t,n/a);return r}function r(t){return isNaN(t=+t)?NaN:e[ca.bisect(i,t)]}var i;return r.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(ca.ascending),n()):t},r.range=function(t){return arguments.length?(e=t,n()):e},r.quantiles=function(){return i},r.copy=function(){return ni(t,e)},n()}function ri(t,e,n){function r(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function i(){return a=n.length/(e-t),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.copy=function(){return ri(t,e,n)},i()}function ii(t,e){function n(n){return e[ca.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return ii(t,e)},n}function ai(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return jr(t,e)},e.tickFormat=function(e,n){return qr(t,e,n)},e.copy=function(){return ai(t)},e}function oi(t){return t.innerRadius}function si(t){return t.outerRadius}function li(t){return t.startAngle}function ci(t){return t.endAngle}function ui(t){for(var e,n,r,i=-1,a=t.length;++i<a;)e=t[i],n=e[0],r=e[1]+Qo,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function hi(t){function e(e){function l(){g.push("M",s(t(m),h),u,c(t(v.reverse()),h),"Z")}for(var d,f,p,g=[],v=[],m=[],y=-1,x=e.length,b=ut(n),w=ut(i),k=n===r?function(){return f}:ut(r),M=i===a?function(){return p}:ut(a);++y<x;)o.call(this,d=e[y],y)?(v.push([f=+b.call(this,d,y),p=+w.call(this,d,y)]),m.push([+k.call(this,d,y),+M.call(this,d,y)])):v.length&&(l(),v=[],m=[]);return v.length&&l(),g.length?g.join(""):null}var n=ze,r=ze,i=0,a=Ie,o=It,s=Re,l=s.key,c=s,u="L",h=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=a=t,e):a},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=No.get(t)||Re).key,c=s.reverse||s,u=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(h=t,e):h},e}function di(t){return t.radius}function fi(t){return[t.x,t.y]}function pi(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]+Qo;return[n*Math.cos(r),n*Math.sin(r)]}}function gi(){return 64}function vi(){return"circle"}function mi(t){var e=Math.sqrt(t/Ra);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function yi(t,e){return xa(t,rs),t.id=e,t}function xi(t,e,n,r){var i=t.id;return I(t,"function"==typeof n?function(t,a,o){t.__transition__[i].tween.set(e,r(n.call(t,t.__data__,a,o)))}:(n=r(n),function(t){t.__transition__[i].tween.set(e,n)}))}function bi(t){return null==t&&(t=""),function(){this.textContent=t}}function wi(t,e,n,r){var a=t.__transition__||(t.__transition__={active:0,count:0}),o=a[n];if(!o){var s=r.time;return o=a[n]={tween:new i,event:ca.dispatch("start","end"),time:s,ease:r.ease,delay:r.delay,duration:r.duration},++a.count,ca.timer(function(r){function i(r){return a.active>n?c():(a.active=n,d.start.call(t,u,e),o.tween.forEach(function(n,r){(r=r.call(t,u,e))&&g.push(r)}),l(r)||ca.timer(l,0,s),1)}function l(r){if(a.active!==n)return c();for(var i=(r-f)/p,o=h(i),s=g.length;s>0;)g[--s].call(t,o);return i>=1?(c(),d.end.call(t,u,e),1):void 0}function c(){return--a.count?delete a[n]:delete t.__transition__,1}var u=t.__data__,h=o.ease,d=o.event,f=o.delay,p=o.duration,g=[];return r>=f?i(r):ca.timer(i,f,s),1},0,s),o}}function ki(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Mi(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Si(t,e,n){if(r=[],n&&e.length>1){for(var r,i,a,o=Lr(t.domain()),s=-1,l=e.length,c=(e[1]-e[0])/++n;++s<l;)for(i=n;--i>0;)(a=+e[s]-i*c)>=o[0]&&r.push(a);for(--s,i=0;++i<n&&(a=+e[s]+i*c)<o[1];)r.push(a)}return r}function Ci(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ai(t,e,n){function r(e){var n=t(e),r=a(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new us(n-1)),1),n}function a(t,n){return e(t=new us(+t),n),t}function o(t,r,a){var o=i(t),s=[];if(a>1)for(;r>o;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;r>o;)s.push(new Date(+o)),e(o,1);return s}function s(t,e,n){try{us=Ci;var r=new Ci;return r._=t,o(r,e,n)}finally{us=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=a,t.range=o;var l=t.utc=_i(t);return l.floor=l,l.round=_i(r),l.ceil=_i(i),l.offset=_i(a),l.range=s,t}function _i(t){return function(e,n){try{us=Ci;var r=new Ci;return r._=e,t(r,n)._}finally{us=Date}}}function Ei(t,e,n,r){for(var i,a,o=0,s=e.length,l=n.length;s>o;){if(r>=l)return-1;if(37===(i=e.charCodeAt(o++))){if(!(a=Cs[e.charAt(o++)])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function Di(t){return new RegExp("^(?:"+t.map(ca.requote).join("|")+")","i")}function Ti(t){for(var e=new i,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ni(t,e,n){t+="";var r=t.length;return n>r?new Array(n-r+1).join(e)+t:t}function Fi(t,e,n){ys.lastIndex=0;var r=ys.exec(e.substring(n));return r?n+=r[0].length:-1}function zi(t,e,n){ms.lastIndex=0;var r=ms.exec(e.substring(n));return r?n+=r[0].length:-1}function Ii(t,e,n){ws.lastIndex=0;var r=ws.exec(e.substring(n));return r?(t.m=ks.get(r[0].toLowerCase()),n+=r[0].length):-1}function Ri(t,e,n){xs.lastIndex=0;var r=xs.exec(e.substring(n));return r?(t.m=bs.get(r[0].toLowerCase()),n+=r[0].length):-1}function Li(t,e,n){return Ei(t,Ss.c.toString(),e,n)}function Hi(t,e,n){return Ei(t,Ss.x.toString(),e,n)}function Pi(t,e,n){return Ei(t,Ss.X.toString(),e,n)}function Wi(t,e,n){As.lastIndex=0;var r=As.exec(e.substring(n,n+4));return r?(t.y=+r[0],n+=r[0].length):-1}function Bi(t,e,n){As.lastIndex=0;var r=As.exec(e.substring(n,n+2));return r?(t.y=Yi(+r[0]),n+=r[0].length):-1}function Yi(t){return t+(t>68?1900:2e3)}function Gi(t,e,n){As.lastIndex=0;var r=As.exec(e.substring(n,n+2));return r?(t.m=r[0]-1,n+=r[0].length):-1}function Vi(t,e,n){As.lastIndex=0;var r=As.exec(e.substring(n,n+2));return r?(t.d=+r[0],n+=r[0].length):-1}function Oi(t,e,n){As.lastIndex=0;var r=As.exec(e.substring(n,n+2));return r?(t.H=+r[0],n+=r[0].length):-1}function ji(t,e,n){As.lastIndex=0;var r=As.exec(e.substring(n,n+2));return r?(t.M=+r[0],n+=r[0].length):-1}function qi(t,e,n){As.lastIndex=0;var r=As.exec(e.substring(n,n+2));return r?(t.S=+r[0],n+=r[0].length):-1}function Xi(t,e,n){As.lastIndex=0;var r=As.exec(e.substring(n,n+3));return r?(t.L=+r[0],n+=r[0].length):-1}function Ui(t,e,n){var r=_s.get(e.substring(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}function Zi(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=~~(Math.abs(e)/60),i=Math.abs(e)%60;return n+Ni(r,"0",2)+Ni(i,"0",2)}function Ki(t){return t.toISOString()}function Qi(t,e,n){function r(e){return t(e)}return r.invert=function(e){return $i(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map($i)},r.nice=function(t){return r.domain(Wr(r.domain(),function(){return t}))},r.ticks=function(n,i){var a=Ji(r.domain());if("function"!=typeof n){var o=a[1]-a[0],s=o/n,l=ca.bisect(Ds,s);if(l==Ds.length)return e.year(a,n);if(!l)return t.ticks(n).map($i);Math.log(s/Ds[l-1])<Math.log(Ds[l]/s)&&--l,n=e[l],i=n[1],n=n[0].range}return n(a[0],new Date(+a[1]+1),i)},r.tickFormat=function(){return n},r.copy=function(){return Qi(t.copy(),e,n)},ca.rebind(r,t,"range","rangeRound","interpolate","clamp")}function Ji(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function $i(t){return new Date(t)}function ta(t){return function(e){for(var n=t.length-1,r=t[n];!r[1](e);)r=t[--n];return r[0](e)}}function ea(t){var e=new Date(t,0,1);return e.setFullYear(t),e}function na(t){var e=t.getFullYear(),n=ea(e);return e+(t-n)/(ea(e+1)-n)}function ra(t){var e=new Date(Date.UTC(t,0,1));return e.setUTCFullYear(t),e}function ia(t){var e=t.getUTCFullYear(),n=ra(e);return e+(t-n)/(ra(e+1)-n)}function aa(t){return t.responseText}function oa(t){return JSON.parse(t.responseText)}function sa(t){var e=ua.createRange();return e.selectNode(ua.body),e.createContextualFragment(t.responseText)}function la(t){return t.responseXML}var ca={version:"3.1.5"};Date.now||(Date.now=function(){return+new Date});var ua=document,ha=window;try{ua.createElement("div").style.setProperty("opacity",0,"")}catch(t){var da=ha.CSSStyleDeclaration.prototype,fa=da.setProperty;da.setProperty=function(t,e,n){fa.call(this,t,e+"",n)}}ca.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:NaN},ca.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},ca.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a&&(null==(n=t[i])||n!=n);)n=void 0;for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a&&(null==(n=e.call(t,t[i],i))||n!=n);)n=void 0;for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},ca.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a&&(null==(n=t[i])||n!=n);)n=void 0;for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a&&(null==(n=e.call(t,t[i],i))||n!=n);)n=void 0;for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},ca.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o&&(null==(n=i=t[a])||n!=n);)n=i=void 0;for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++a<o&&(null==(n=i=e.call(t,t[a],a))||n!=n);)n=void 0;for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},ca.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)isNaN(n=+t[a])||(r+=n);else for(;++a<i;)isNaN(n=+e.call(t,t[a],a))||(r+=n);return r},ca.mean=function(e,n){var r,i=e.length,a=0,o=-1,s=0;if(1===arguments.length)for(;++o<i;)t(r=e[o])&&(a+=(r-a)/++s);else for(;++o<i;)t(r=n.call(e,e[o],o))&&(a+=(r-a)/++s);return s?a:void 0},ca.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},ca.median=function(e,n){return arguments.length>1&&(e=e.map(n)),e=e.filter(t),e.length?ca.quantile(e.sort(ca.ascending),.5):void 0},ca.bisector=function(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var a=r+i>>>1;t.call(e,e[a],a)<n?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var a=r+i>>>1;n<t.call(e,e[a],a)?i=a:r=a+1}return r}}};var pa=ca.bisector(function(t){return t});ca.bisectLeft=pa.left,ca.bisect=ca.bisectRight=pa.right,ca.shuffle=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t},ca.permute=function(t,e){for(var n=[],r=-1,i=e.length;++r<i;)n[r]=t[e[r]];return n},ca.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,n=ca.min(arguments,e),r=new Array(n);++t<n;)for(var i,a=-1,o=r[t]=new Array(i);++a<i;)o[a]=arguments[a][t];return r},ca.transpose=function(t){return ca.zip.apply(ca,t)},ca.keys=function(t){var e=[];for(var n in t)e.push(n);return e},ca.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ca.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ca.merge=function(t){return Array.prototype.concat.apply([],t)},ca.range=function(t,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=t,t=0)),(e-t)/r==1/0)throw new Error("infinite range");var i,a=[],o=n(Math.abs(r)),s=-1;if(t*=o,e*=o,0>(r*=o))for(;(i=t+r*++s)>e;)a.push(i/o);else for(;(i=t+r*++s)<e;)a.push(i/o);return a},ca.map=function(t){var e=new i;for(var n in t)e.set(n,t[n]);return e},r(i,{has:function(t){return ga+t in this},get:function(t){return this[ga+t]},set:function(t,e){return this[ga+t]=e},remove:function(t){return(t=ga+t)in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===va&&t.call(this,e.substring(1),this[e])}});var ga="\0",va=ga.charCodeAt(0);ca.nest=function(){function t(e,s,l){if(l>=o.length)return r?r.call(a,s):n?s.sort(n):s;for(var c,u,h,d,f=-1,p=s.length,g=o[l++],v=new i;++f<p;)(d=v.get(c=g(u=s[f])))?d.push(u):v.set(c,[u]);return e?(u=e(),h=function(n,r){u.set(n,t(e,r,l))}):(u={},h=function(n,r){u[n]=t(e,r,l)}),v.forEach(h),u}function e(t,n){if(n>=o.length)return t;var r=[],i=s[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,a={},o=[],s=[];return a.map=function(e,n){return t(n,e,0)},a.entries=function(n){return e(t(ca.map,n,0),0)},a.key=function(t){return o.push(t),a},a.sortKeys=function(t){return s[o.length-1]=t,a},a.sortValues=function(t){return n=t,a},a.rollup=function(t){return r=t,a},a},ca.set=function(t){var e=new a;if(t)for(var n=0;n<t.length;n++)e.add(t[n]);return e},r(a,{has:function(t){return ga+t in this},add:function(t){return this[ga+t]=!0,t},remove:function(t){return(t=ga+t)in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===va&&t.call(this,e.substring(1))}}),ca.behavior={},ca.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=o(t,e,e[n]);return t},ca.dispatch=function(){for(var t=new s,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=l(t);return t},s.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.substring(n+1),t=t.substring(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){
if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ca.event=null,ca.mouse=function(t){return f(t,u())};var ma=/WebKit/.test(ha.navigator.userAgent)?-1:0,ya=g;try{ya(ua.documentElement.childNodes)[0].nodeType}catch(t){ya=p}var xa=[].__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};ca.touches=function(t,e){return arguments.length<2&&(e=u().touches),e?ya(e).map(function(e){var n=f(t,e);return n.identifier=e.identifier,n}):[]},ca.behavior.drag=function(){function t(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function t(){var t=o.parentNode;return null!=u?ca.touches(t).filter(function(t){return t.identifier===u})[0]:ca.mouse(t)}function e(){if(!o.parentNode)return i();var e=t(),n=e[0]-d[0],r=e[1]-d[1];f|=n|r,d=e,c(),s({type:"drag",x:e[0]+a[0],y:e[1]+a[1],dx:n,dy:r})}function i(){s({type:"dragend"}),f&&(c(),ca.event.target===l&&h(p,"click")),p.on(null!=u?"touchmove.drag-"+u:"mousemove.drag",null).on(null!=u?"touchend.drag-"+u:"mouseup.drag",null)}var a,o=this,s=n.of(o,arguments),l=ca.event.target,u=ca.event.touches?ca.event.changedTouches[0].identifier:null,d=t(),f=0,p=ca.select(ha).on(null!=u?"touchmove.drag-"+u:"mousemove.drag",e).on(null!=u?"touchend.drag-"+u:"mouseup.drag",i,!0);r?(a=r.apply(o,arguments),a=[a.x-d[0],a.y-d[1]]):a=[0,0],null==u&&c(),s({type:"dragstart"})}var n=d(t,"drag","dragstart","dragend"),r=null;return t.origin=function(e){return arguments.length?(r=e,t):r},ca.rebind(t,n,"on")};var ba=function(t,e){return e.querySelector(t)},wa=function(t,e){return e.querySelectorAll(t)},ka=ua.documentElement,Ma=ka.matchesSelector||ka.webkitMatchesSelector||ka.mozMatchesSelector||ka.msMatchesSelector||ka.oMatchesSelector,Sa=function(t,e){return Ma.call(t,e)};"function"==typeof Sizzle&&(ba=function(t,e){return Sizzle(t,e)[0]||null},wa=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},Sa=Sizzle.matchesSelector);var Ca=[];ca.selection=function(){return Ta},ca.selection.prototype=Ca,Ca.select=function(t){var e,n,r,i,a=[];"function"!=typeof t&&(t=m(t));for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return v(a)},Ca.selectAll=function(t){var e,n,r=[];"function"!=typeof t&&(t=y(t));for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(e=ya(t.call(n,n.__data__,s))),e.parentNode=n);return v(r)};var Aa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ca.ns={prefix:Aa,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),Aa.hasOwnProperty(n)?{space:Aa[n],local:t}:t}},Ca.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=ca.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(x(e,t[e]));return this}return this.each(x(t,e))},ca.requote=function(t){return t.replace(_a,"\\$&")};var _a=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Ca.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=t.trim().split(/^|\s+/g)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!k(t[i]).test(e))return!1;return!0}for(e in t)this.each(M(e,t[e]));return this}return this.each(M(t,e))},Ca.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(C(n,t[n],e));return this}if(2>r)return ha.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(C(t,e,n))},Ca.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(A(e,t[e]));return this}return this.each(A(t,e))},Ca.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ca.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ca.append=function(t){function e(){return this.appendChild(ua.createElementNS(this.namespaceURI,t))}function n(){return this.appendChild(ua.createElementNS(t.space,t.local))}return t=ca.ns.qualify(t),this.select(t.local?n:e)},Ca.insert=function(t,e){function n(n,r){return this.insertBefore(ua.createElementNS(this.namespaceURI,t),e.call(this,n,r))}function r(n,r){return this.insertBefore(ua.createElementNS(t.space,t.local),e.call(this,n,r))}return t=ca.ns.qualify(t),"function"!=typeof e&&(e=m(e)),this.select(t.local?r:n)},Ca.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Ca.data=function(t,e){function n(t,n){var r,a,o,s=t.length,h=n.length,d=Math.min(s,h),f=new Array(h),p=new Array(h),g=new Array(s);if(e){var v,m=new i,y=new i,x=[];for(r=-1;++r<s;)v=e.call(a=t[r],a.__data__,r),m.has(v)?g[r]=a:m.set(v,a),x.push(v);for(r=-1;++r<h;)v=e.call(n,o=n[r],r),(a=m.get(v))?(f[r]=a,a.__data__=o):y.has(v)||(p[r]=_(o)),y.set(v,o),m.remove(v);for(r=-1;++r<s;)m.has(x[r])&&(g[r]=t[r])}else{for(r=-1;++r<d;)a=t[r],o=n[r],a?(a.__data__=o,f[r]=a):p[r]=_(o);for(;h>r;++r)p[r]=_(n[r]);for(;s>r;++r)g[r]=t[r]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,l.push(p),c.push(f),u.push(g)}var r,a,o=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(r=this[0]).length);++o<s;)(a=r[o])&&(t[o]=a.__data__);return t}var l=R([]),c=v([]),u=v([]);if("function"==typeof t)for(;++o<s;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<s;)n(r=this[o],t);return c.enter=function(){return l},c.exit=function(){return u},c},Ca.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ca.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=E(t));for(var a=0,o=this.length;o>a;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&t.call(r,r.__data__,s)&&e.push(r)}return v(i)},Ca.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Ca.sort=function(t){t=D.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Ca.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(N(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(N(t,e,n))};var Ea=ca.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ea.forEach(function(t){"on"+t in ua&&Ea.remove(t)}),Ca.each=function(t){return I(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Ca.call=function(t){var e=ya(arguments);return t.apply(e[0]=this,e),this},Ca.empty=function(){return!this.node()},Ca.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var a=n[r];if(a)return a}return null};var Da=[];ca.selection.enter=R,ca.selection.enter.prototype=Da,Da.append=Ca.append,Da.insert=Ca.insert,Da.empty=Ca.empty,Da.node=Ca.node,Da.select=function(t){for(var e,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(a=i[c])?(e.push(r[c]=n=t.call(i.parentNode,a.__data__,c)),n.__data__=a.__data__):e.push(null)}return v(o)},Ca.transition=function(){var t,e,n=ts||++is,r=[],i=Object.create(as);i.time=Date.now();for(var a=-1,o=this.length;++a<o;){r.push(t=[]);for(var s=this[a],l=-1,c=s.length;++l<c;)(e=s[l])&&wi(e,l,n,i),t.push(e)}return yi(r,n)};var Ta=v([[ua]]);Ta[0].parentNode=ka,ca.select=function(t){return"string"==typeof t?Ta.select(t):v([[t]])},ca.selectAll=function(t){return"string"==typeof t?Ta.selectAll(t):v([ya(t)])},ca.behavior.zoom=function(){function t(){this.on("mousedown.zoom",s).on("mousemove.zoom",u).on(za+".zoom",l).on("dblclick.zoom",f).on("touchstart.zoom",p).on("touchmove.zoom",g).on("touchend.zoom",p)}function e(t){return[(t[0]-M[0])/S,(t[1]-M[1])/S]}function n(t){return[t[0]*S+M[0],t[1]*S+M[1]]}function r(t){S=Math.max(C[0],Math.min(C[1],t))}function i(t,e){e=n(e),M[0]+=t[0]-e[0],M[1]+=t[1]-e[1]}function a(){x&&x.domain(y.range().map(function(t){return(t-M[0])/S}).map(y.invert)),w&&w.domain(b.range().map(function(t){return(t-M[1])/S}).map(b.invert))}function o(t){a(),ca.event.preventDefault(),t({type:"zoom",scale:S,translate:M})}function s(){function t(){l=1,i(ca.mouse(r),d),o(a)}function n(){l&&c(),u.on("mousemove.zoom",null).on("mouseup.zoom",null),l&&ca.event.target===s&&h(u,"click.zoom")}var r=this,a=A.of(r,arguments),s=ca.event.target,l=0,u=ca.select(ha).on("mousemove.zoom",t).on("mouseup.zoom",n),d=e(ca.mouse(r));ha.focus(),c()}function l(){v||(v=e(ca.mouse(this))),r(Math.pow(2,.002*Na())*S),i(ca.mouse(this),v),o(A.of(this,arguments))}function u(){v=null}function f(){var t=ca.mouse(this),n=e(t),a=Math.log(S)/Math.LN2;r(Math.pow(2,ca.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)),i(t,n),o(A.of(this,arguments))}function p(){var t=ca.touches(this),n=Date.now();if(m=S,v={},t.forEach(function(t){v[t.identifier]=e(t)}),c(),1===t.length){if(500>n-k){var a=t[0],s=e(t[0]);r(2*S),i(a,s),o(A.of(this,arguments))}k=n}}function g(){var t=ca.touches(this),e=t[0],n=v[e.identifier];if(a=t[1]){var a,s=v[a.identifier];e=[(e[0]+a[0])/2,(e[1]+a[1])/2],n=[(n[0]+s[0])/2,(n[1]+s[1])/2],r(ca.event.scale*m)}i(e,n),k=null,o(A.of(this,arguments))}var v,m,y,x,b,w,k,M=[0,0],S=1,C=Fa,A=d(t,"zoom");return t.translate=function(e){return arguments.length?(M=e.map(Number),a(),t):M},t.scale=function(e){return arguments.length?(S=+e,a(),t):S},t.scaleExtent=function(e){return arguments.length?(C=null==e?Fa:e.map(Number),t):C},t.x=function(e){return arguments.length?(x=e,y=e.copy(),M=[0,0],S=1,t):x},t.y=function(e){return arguments.length?(w=e,b=e.copy(),M=[0,0],S=1,t):w},ca.rebind(t,A,"on")};var Na,Fa=[0,1/0],za="onwheel"in ua?(Na=function(){return-ca.event.deltaY*(ca.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ua?(Na=function(){return ca.event.wheelDelta},"mousewheel"):(Na=function(){return-ca.event.detail},"MozMousePixelScroll");L.prototype.toString=function(){return this.rgb()+""},ca.hsl=function(t,e,n){return 1===arguments.length?t instanceof P?H(t.h,t.s,t.l):at(""+t,ot,H):H(+t,+e,+n)};var Ia=P.prototype=new L;Ia.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),H(this.h,this.s,this.l/t)},Ia.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),H(this.h,this.s,t*this.l)},Ia.rgb=function(){return W(this.h,this.s,this.l)};var Ra=Math.PI,La=1e-6,Ha=Ra/180,Pa=180/Ra;ca.hcl=function(t,e,n){return 1===arguments.length?t instanceof X?q(t.h,t.c,t.l):t instanceof K?J(t.l,t.a,t.b):J((t=st((t=ca.rgb(t)).r,t.g,t.b)).l,t.a,t.b):q(+t,+e,+n)};var Wa=X.prototype=new L;Wa.brighter=function(t){return q(this.h,this.c,Math.min(100,this.l+Ba*(arguments.length?t:1)))},Wa.darker=function(t){return q(this.h,this.c,Math.max(0,this.l-Ba*(arguments.length?t:1)))},Wa.rgb=function(){return U(this.h,this.c,this.l).rgb()},ca.lab=function(t,e,n){return 1===arguments.length?t instanceof K?Z(t.l,t.a,t.b):t instanceof X?U(t.l,t.c,t.h):st((t=ca.rgb(t)).r,t.g,t.b):Z(+t,+e,+n)};var Ba=18,Ya=.95047,Ga=1,Va=1.08883,Oa=K.prototype=new L;Oa.brighter=function(t){return Z(Math.min(100,this.l+Ba*(arguments.length?t:1)),this.a,this.b)},Oa.darker=function(t){return Z(Math.max(0,this.l-Ba*(arguments.length?t:1)),this.a,this.b)},Oa.rgb=function(){return Q(this.l,this.a,this.b)},ca.rgb=function(t,e,n){return 1===arguments.length?t instanceof rt?nt(t.r,t.g,t.b):at(""+t,nt,W):nt(~~t,~~e,~~n)};var ja=rt.prototype=new L;ja.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),nt(Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(r/t)))):nt(i,i,i)},ja.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),nt(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},ja.hsl=function(){return ot(this.r,this.g,this.b)},ja.toString=function(){return"#"+it(this.r)+it(this.g)+it(this.b)};var qa=ca.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});qa.forEach(function(t,e){qa.set(t,at(e,nt,W))}),ca.functor=ut,ca.xhr=function(t,e,n){function r(){var t=l.status;!t&&l.responseText||t>=200&&300>t||304===t?a.load.call(i,s.call(i,l)):a.error.call(i,l)}var i={},a=ca.dispatch("progress","load","error"),o={},s=ht,l=new(ha.XDomainRequest&&/^(http(s)?:)?\/\//.test(t)?XDomainRequest:XMLHttpRequest);return"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=ca.event;ca.event=t;try{a.progress.call(i,l)}finally{ca.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?o[t]:(null==e?delete o[t]:o[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.response=function(t){return s=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(ya(arguments)))}}),i.send=function(n,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),l.open(n,t,!0),null==e||"accept"in o||(o.accept=e+",*/*"),l.setRequestHeader)for(var s in o)l.setRequestHeader(s,o[s]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=a&&i.on("error",a).on("load",function(t){a(null,t)}),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},ca.rebind(i,a,"on"),2===arguments.length&&"function"==typeof e&&(n=e,e=null),null==n?i:i.get(dt(n))},ca.csv=ft(",","text/csv"),ca.tsv=ft("  ","text/tab-separated-values");var Xa,Ua,Za=0,Ka={},Qa=null;ca.timer=function(t,e,n){if(arguments.length<3){if(arguments.length<2)e=0;else if(!isFinite(e))return;n=Date.now()}var r=Ka[t.id];r&&r.callback===t?(r.then=n,r.delay=e):Ka[t.id=++Za]=Qa={callback:t,then:n,delay:e,next:Qa},Xa||(Ua=clearTimeout(Ua),Xa=1,Ja(pt))},ca.timer.flush=function(){for(var t,e=Date.now(),n=Qa;n;)t=e-n.then,n.delay||(n.flush=n.callback(t)),n=n.next;gt()};var Ja=ha.requestAnimationFrame||ha.webkitRequestAnimationFrame||ha.mozRequestAnimationFrame||ha.oRequestAnimationFrame||ha.msRequestAnimationFrame||function(t){setTimeout(t,17)},$a=[3,3],to=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(vt);ca.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=ca.round(t,mt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),to[8+n/3]},ca.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},ca.format=function(t){var e=eo.exec(t),n=e[1]||" ",r=e[2]||">",i=e[3]||"",a=e[4]||"",o=e[5],s=+e[6],l=e[7],c=e[8],u=e[9],h=1,d="",f=!1;switch(c&&(c=+c.substring(1)),(o||"0"===n&&"="===r)&&(o=n="0",r="=",l&&(s-=Math.floor((s-1)/4))),u){case"n":l=!0,u="g";break;case"%":h=100,d="%",u="f";break;case"p":h=100,d="%",u="r";break;case"b":case"o":case"x":case"X":a&&(a="0"+u.toLowerCase());case"c":case"d":f=!0,c=0;break;case"s":h=-1,u="r"}"#"===a&&(a=""),"r"!=u||c||(u="g"),null!=c&&("g"==u?c=Math.max(1,Math.min(21,c)):("e"==u||"f"==u)&&(c=Math.max(0,Math.min(20,c)))),u=no.get(u)||yt;var p=o&&l;return function(t){if(f&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):i;if(0>h){var g=ca.formatPrefix(t,c);t=g.scale(t),d=g.symbol}else t*=h;t=u(t,c),!o&&l&&(t=ro(t));var v=a.length+t.length+(p?0:e.length),m=s>v?new Array(v=s-v+1).join(n):"";return p&&(t=ro(m+t)),t.replace(".","."),e+=a,("<"===r?e+t+m:">"===r?m+e+t:"^"===r?m.substring(0,v>>=1)+e+t+m.substring(v):e+(p?t:m+t))+d}};var eo=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,no=ca.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ca.round(t,mt(t,e))).toFixed(Math.max(0,Math.min(20,mt(t*(1+1e-15),e))))}}),ro=ht;if($a){var io=$a.length;ro=function(t){for(var e=t.lastIndexOf("."),n=e>=0?"."+t.substring(e+1):(e=t.length,""),r=[],i=0,a=$a[0];e>0&&a>0;)r.push(t.substring(e-=a,e+a)),a=$a[i=(i+1)%io];return r.reverse().join(",")+n}}ca.geo={},ca.geo.stream=function(t,e){t&&ao.hasOwnProperty(t.type)?ao[t.type](t,e):xt(t,e)};var ao={Feature:function(t,e){xt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)xt(n[r].geometry,e)}},oo={Sphere:function(t,e){e.sphere()},Point:function(t,e){var n=t.coordinates;e.point(n[0],n[1])},MultiPoint:function(t,e){for(var n,r=t.coordinates,i=-1,a=r.length;++i<a;)n=r[i],e.point(n[0],n[1])},LineString:function(t,e){bt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)bt(n[r],e,0)},Polygon:function(t,e){wt(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)wt(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)xt(n[r],e)}};ca.geo.area=function(t){return so=0,ca.geo.stream(t,uo),so};var so,lo,co,uo={sphere:function(){so+=4*Ra},point:T,lineStart:T,lineEnd:T,polygonStart:function(){lo=1,co=0,uo.lineStart=kt},polygonEnd:function(){var t=2*Math.atan2(co,lo);so+=0>t?4*Ra+t:t,uo.lineStart=uo.lineEnd=uo.point=T}};ca.geo.bounds=Mt(ht),ca.geo.centroid=function(t){ho=fo=po=go=vo=0,ca.geo.stream(t,mo);var e;return fo&&Math.abs(e=Math.sqrt(po*po+go*go+vo*vo))>La?[Math.atan2(go,po)*Pa,Math.asin(Math.max(-1,Math.min(1,vo/e)))*Pa]:void 0};var ho,fo,po,go,vo,mo={sphere:function(){2>ho&&(ho=2,fo=po=go=vo=0)},point:St,lineStart:At,lineEnd:_t,polygonStart:function(){2>ho&&(ho=2,fo=po=go=vo=0),mo.lineStart=Ct},polygonEnd:function(){mo.lineStart=At}},yo=Wt(It,Ot,qt),xo=1e9;ca.geo.projection=Jt,ca.geo.projectionMutator=$t,(ca.geo.equirectangular=function(){return Jt(ee)}).raw=ee.invert=ee,ca.geo.rotation=function(t){function e(e){return e=t(e[0]*Ha,e[1]*Ha),e[0]*=Pa,e[1]*=Pa,e}return t=ne(t[0]%360*Ha,t[1]*Ha,t.length>2?t[2]*Ha:0),e.invert=function(e){return e=t.invert(e[0]*Ha,e[1]*Ha),e[0]*=Pa,e[1]*=Pa,e},e},ca.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=ne(-t[0]*Ha,-t[1]*Ha,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=Pa,t[1]*=Pa}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=oe((e=+r)*Ha,i*Ha),t):e},t.precision=function(r){return arguments.length?(n=oe(e*Ha,(i=+r)*Ha),t):i},t.angle(90)},ca.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Ha,i=t[1]*Ha,a=e[1]*Ha,o=Math.sin(r),s=Math.cos(r),l=Math.sin(i),c=Math.cos(i),u=Math.sin(a),h=Math.cos(a);return Math.atan2(Math.sqrt((n=h*o)*n+(n=c*u-l*h*s)*n),l*u+c*h*s)},ca.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ca.range(Math.ceil(a/v)*v,i,v).map(d).concat(ca.range(Math.ceil(c/m)*m,l,m).map(f)).concat(ca.range(Math.ceil(r/p)*p,n,p).filter(function(t){return Math.abs(t%v)>La}).map(u)).concat(ca.range(Math.ceil(s/g)*g,o,g).filter(function(t){return Math.abs(t%m)>La}).map(h))}var n,r,i,a,o,s,l,c,u,h,d,f,p=10,g=p,v=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(f(l).slice(1),d(i).reverse().slice(1),f(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(a=+e[0][0],i=+e[1][0],c=+e[0][1],l=+e[1][1],a>i&&(e=a,a=i,i=e),c>l&&(e=c,c=l,l=e),t.precision(y)):[[a,c],[i,l]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(y)):[[r,s],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,u=le(s,o,90),h=ce(r,n,y),d=le(c,l,90),f=ce(a,i,y),t):y},t.majorExtent([[-180,-90+La],[180,90-La]]).minorExtent([[-180,-80-La],[180,80+La]])},ca.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=ue,i=he;return t.distance=function(){return ca.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},ca.geo.interpolate=function(t,e){return de(t[0]*Ha,t[1]*Ha,e[0]*Ha,e[1]*Ha)},ca.geo.length=function(t){return bo=0,ca.geo.stream(t,wo),bo};var bo,wo={sphere:T,point:T,lineStart:fe,lineEnd:T,polygonStart:T,polygonEnd:T};(ca.geo.conicEqualArea=function(){return pe(ge)}).raw=ge,ca.geo.albersUsa=function(){function t(t){return e(t)(t)}function e(t){var e=t[0],n=t[1];return n>50?o:-140>e?s:21>n?l:a}var n,r,i,a=ca.geo.conicEqualArea().rotate([98,0]).center([0,38]).parallels([29.5,45.5]),o=ca.geo.conicEqualArea().rotate([160,0]).center([0,60]).parallels([55,65]),s=ca.geo.conicEqualArea().rotate([160,0]).center([0,20]).parallels([8,18]),l=ca.geo.conicEqualArea().rotate([60,0]).center([0,10]).parallels([8,18]);return t.invert=function(t){return n(t)||r(t)||i(t)||a.invert(t)},t.scale=function(e){return arguments.length?(a.scale(e),o.scale(.6*e),s.scale(e),l.scale(1.5*e),t.translate(a.translate())):a.scale()},t.translate=function(e){if(!arguments.length)return a.translate();var c=a.scale(),u=e[0],h=e[1];return a.translate(e),o.translate([u-.4*c,h+.17*c]),s.translate([u-.19*c,h+.2*c]),l.translate([u+.58*c,h+.43*c]),n=ve(o,[[-180,50],[-130,72]]),r=ve(s,[[-164,18],[-154,24]]),i=ve(l,[[-67.5,17.5],[-65,19]]),t},t.scale(1e3)};var ko,Mo,So={point:T,lineStart:T,lineEnd:T,polygonStart:function(){Mo=0,So.lineStart=me},polygonEnd:function(){So.lineStart=So.lineEnd=So.point=T,ko+=Math.abs(Mo/2)}},Co={point:xe,lineStart:be,lineEnd:we,polygonStart:function(){Co.lineStart=ke},polygonEnd:function(){Co.point=xe,Co.lineStart=be,Co.lineEnd=we}};ca.geo.path=function(){function t(t){return t&&ca.geo.stream(t,r(i.pointRadius("function"==typeof a?+a.apply(this,arguments):a))),i.result()}var e,n,r,i,a=4.5;return t.area=function(t){return ko=0,ca.geo.stream(t,r(So)),ko},t.centroid=function(t){return ho=po=go=vo=0,ca.geo.stream(t,r(Co)),vo?[po/vo,go/vo]:void 0},t.bounds=function(t){return Mt(r)(t)},t.projection=function(n){return arguments.length?(r=(e=n)?n.stream||Ce(n):ht,t):e},t.context=function(e){return arguments.length?(i=null==(n=e)?new ye:new Me(e),t):n},t.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:+e,t):a},t.projection(ca.geo.albersUsa()).context(null)},ca.geo.albers=function(){return ca.geo.conicEqualArea().parallels([29.5,45.5]).rotate([98,0]).center([0,38]).scale(1e3)};var Ao=Ae(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ca.geo.azimuthalEqualArea=function(){return Jt(Ao)}).raw=Ao;var _o=Ae(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},ht);(ca.geo.azimuthalEquidistant=function(){return Jt(_o)}).raw=_o,(ca.geo.conicConformal=function(){return pe(_e)}).raw=_e,(ca.geo.conicEquidistant=function(){return pe(Ee)}).raw=Ee;var Eo=Ae(function(t){return 1/t},Math.atan);(ca.geo.gnomonic=function(){return Jt(Eo)}).raw=Eo,De.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ra/2]},(ca.geo.mercator=function(){return Te(De)}).raw=De;var Do=Ae(function(){return 1},Math.asin);(ca.geo.orthographic=function(){return Jt(Do)}).raw=Do;var To=Ae(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ca.geo.stereographic=function(){return Jt(To)}).raw=To,Ne.invert=function(t,e){return[Math.atan2(V(t),Math.cos(e)),G(Math.sin(e)/O(t))]},(ca.geo.transverseMercator=function(){return Te(Ne)}).raw=Ne,ca.geom={},ca.svg={},ca.svg.line=function(){return Fe(ht)};var No=ca.map({linear:Re,"linear-closed":Le,"step-before":He,"step-after":Pe,basis:Oe,"basis-open":je,"basis-closed":qe,bundle:Xe,cardinal:Ye,"cardinal-open":We,"cardinal-closed":Be,monotone:$e});No.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Fo=[0,2/3,1/3,0],zo=[0,1/3,2/3,0],Io=[0,1/6,2/3,1/6];ca.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i,a,o,s,l,c,u,h,d,f,p,g=ut(n),v=ut(r),m=t.length,y=m-1,x=[],b=[],w=0;if(g===ze&&r===Ie)e=t;else for(a=0,e=[];m>a;++a)e.push([+g.call(this,i=t[a],a),+v.call(this,i,a)]);for(a=1;m>a;++a)e[a][1]<e[w][1]?w=a:e[a][1]==e[w][1]&&(w=e[a][0]<e[w][0]?a:w);for(a=0;m>a;++a)a!==w&&(l=e[a][1]-e[w][1],s=e[a][0]-e[w][0],x.push({angle:Math.atan2(l,s),index:a}));for(x.sort(function(t,e){return t.angle-e.angle}),f=x[0].angle,d=x[0].index,h=0,a=1;y>a;++a)o=x[a].index,f==x[a].angle?(s=e[d][0]-e[w][0],l=e[d][1]-e[w][1],c=e[o][0]-e[w][0],u=e[o][1]-e[w][1],s*s+l*l>=c*c+u*u?x[a].index=-1:(x[h].index=-1,f=x[a].angle,h=a,d=o)):(f=x[a].angle,h=a,d=o);for(b.push(w),a=0,o=0;2>a;++o)-1!==x[o].index&&(b.push(x[o].index),a++);for(p=b.length;y>o;++o)if(-1!==x[o].index){for(;!tn(b[p-2],b[p-1],x[o].index,e);)--p;b[p++]=x[o].index}var k=[];for(a=0;p>a;++a)k.push(t[b[a]]);return k}var n=ze,r=Ie;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},ca.geom.polygon=function(t){return t.area=function(){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return.5*r},t.centroid=function(e){var n,r,i=-1,a=t.length,o=0,s=0,l=t[a-1];for(arguments.length||(e=-1/(6*t.area()));++i<a;)n=l,l=t[i],r=n[0]*l[1]-l[0]*n[1],o+=(n[0]+l[0])*r,s+=(n[1]+l[1])*r;return[o*e,s*e]},t.clip=function(e){for(var n,r,i,a,o,s,l=-1,c=t.length,u=t[c-1];++l<c;){for(n=e.slice(),e.length=0,a=t[l],o=n[(i=n.length)-1],r=-1;++r<i;)s=n[r],en(s,u,a)?(en(o,u,a)||e.push(nn(o,s,u,a)),e.push(s)):en(o,u,a)&&e.push(nn(o,s,u,a)),o=s;u=a}return e},t},ca.geom.delaunay=function(t){var e=t.map(function(){return[]}),n=[];return rn(t,function(n){e[n.region.l.index].push(t[n.region.r.index])}),e.forEach(function(e,r){var i=t[r],a=i[0],o=i[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-a,t[1]-o)}),e.sort(function(t,e){return t.angle-e.angle});for(var s=0,l=e.length-1;l>s;s++)n.push([i,e[s],e[s+1]])}),n},ca.geom.voronoi=function(t){function e(t){var e,r,o,s=t.map(function(){return[]}),l=ut(i),c=ut(a),u=t.length,h=1e6;if(l===ze&&c===Ie)e=t;else for(e=[],o=0;u>o;++o)e.push([+l.call(this,r=t[o],o),+c.call(this,r,o)]);if(rn(e,function(t){var e,n,r,i,a,o;1===t.a&&t.b>=0?(e=t.ep.r,n=t.ep.l):(e=t.ep.l,n=t.ep.r),1===t.a?(a=e?e.y:-h,r=t.c-t.b*a,o=n?n.y:h,i=t.c-t.b*o):(r=e?e.x:-h,a=t.c-t.a*r,i=n?n.x:h,o=t.c-t.a*i);var l=[r,a],c=[i,o];s[t.region.l.index].push(l,c),s[t.region.r.index].push(l,c)}),s=s.map(function(t,n){var r=e[n][0],i=e[n][1],a=t.map(function(t){return Math.atan2(t[0]-r,t[1]-i)}),o=ca.range(t.length).sort(function(t,e){return a[t]-a[e]});return o.filter(function(t,e){return!e||a[t]-a[o[e-1]]>La}).map(function(e){return t[e]})}),s.forEach(function(t,n){var r=t.length;if(!r)return t.push([-h,-h],[-h,h],[h,h],[h,-h]);if(!(r>2)){var i=e[n],a=t[0],o=t[1],s=i[0],l=i[1],c=a[0],u=a[1],d=o[0],f=o[1],p=Math.abs(d-c),g=f-u;if(Math.abs(g)<La){var v=u>l?-h:h;t.push([-h,v],[h,v])}else if(La>p){var m=c>s?-h:h;t.push([m,-h],[m,h])}else{var v=(c-s)*(f-u)>(d-c)*(u-l)?h:-h,y=Math.abs(g)-p;Math.abs(y)<La?t.push([0>g?v:-v,v]):(y>0&&(v*=-1),t.push([-h,v],[h,v]))}}}),n)for(o=0;u>o;++o)n(s[o]);for(o=0;u>o;++o)s[o].point=t[o];return s}var n,r=null,i=ze,a=Ie;return arguments.length?e(t):(e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(a=t,e):a},e.size=function(t){return arguments.length?(null==t?n=null:(r=[+t[0],+t[1]],n=ca.geom.polygon([[0,0],[0,r[1]],r,[r[0],0]]).clip),e):r},e.links=function(t){var e,n,r,o=t.map(function(){return[]}),s=[],l=ut(i),c=ut(a),u=t.length;if(l===ze&&c===Ie)e=t;else for(r=0;u>r;++r)e.push([+l.call(this,n=t[r],r),+c.call(this,n,r)]);return rn(e,function(e){var n=e.region.l.index,r=e.region.r.index;o[n][r]||(o[n][r]=o[r][n]=!0,s.push({source:t[n],target:t[r]}))}),s},e.triangles=function(t){if(i===ze&&a===Ie)return ca.geom.delaunay(t);var e,n,r,o,s,l=ut(i),c=ut(a);for(o=0,e=[],s=t.length;s>o;++o)n=[+l.call(this,r=t[o],o),+c.call(this,r,o)],n.data=r,e.push(n);return ca.geom.delaunay(e).map(function(t){return t.map(function(t){return t.data})})},e)};var Ro={l:"r",r:"l"}
;ca.geom.quadtree=function(t,e,n,r,i){function a(t){function a(t,e,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(Math.abs(l-n)+Math.abs(u-r)<.01)c(t,e,n,r,i,a,o,s);else{var h=t.point;t.x=t.y=t.point=null,c(t,h,l,u,i,a,o,s),c(t,e,n,r,i,a,o,s)}else t.x=n,t.y=r,t.point=e}else c(t,e,n,r,i,a,o,s)}function c(t,e,n,r,i,o,s,l){var c=.5*(i+s),u=.5*(o+l),h=n>=c,d=r>=u,f=(d<<1)+h;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]=sn()),h?i=c:s=c,d?o=u:l=u,a(t,e,n,r,i,o,s,l)}var u,h,d,f,p,g,v,m,y,x=ut(s),b=ut(l);if(null!=e)g=e,v=n,m=r,y=i;else if(m=y=-(g=v=1/0),h=[],d=[],p=t.length,o)for(f=0;p>f;++f)u=t[f],u.x<g&&(g=u.x),u.y<v&&(v=u.y),u.x>m&&(m=u.x),u.y>y&&(y=u.y),h.push(u.x),d.push(u.y);else for(f=0;p>f;++f){var w=+x(u=t[f],f),k=+b(u,f);g>w&&(g=w),v>k&&(v=k),w>m&&(m=w),k>y&&(y=k),h.push(w),d.push(k)}var M=m-g,S=y-v;M>S?y=v+M:m=g+S;var C=sn();if(C.add=function(t){a(C,t,+x(t,++f),+b(t,f),g,v,m,y)},C.visit=function(t){ln(t,C,g,v,m,y)},f=-1,null==e){for(;++f<p;)a(C,t[f],h[f],d[f],g,v,m,y);--f}else t.forEach(C.add);return h=d=t=u=null,C}var o,s=ze,l=Ie;return(o=arguments.length)?(s=an,l=on,3===o&&(i=n,r=e,n=e=0),a(t)):(a.x=function(t){return arguments.length?(s=t,a):s},a.y=function(t){return arguments.length?(l=t,a):l},a.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),a):null==e?null:[r,i]},a)},ca.interpolateRgb=cn,ca.transform=function(t){var e=ua.createElementNS(ca.ns.prefix.svg,"g");return(ca.transform=function(t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate();return new un(n?n.matrix:Lo)})(t)},un.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Lo={a:1,b:0,c:0,d:1,e:0,f:0};ca.interpolateNumber=pn,ca.interpolateTransform=gn,ca.interpolateObject=vn,ca.interpolateString=mn;var Ho=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;ca.interpolate=yn,ca.interpolators=[function(t,e){var n=typeof e;return("string"===n||n!==typeof t?qa.has(e)||/^(#|rgb\(|hsl\()/.test(e)?cn:mn:e instanceof L?cn:"object"===n?Array.isArray(e)?bn:vn:pn)(t,e)}],ca.interpolateArray=bn;var Po=function(){return ht},Wo=ca.map({linear:Po,poly:_n,quad:function(){return Sn},cubic:function(){return Cn},sin:function(){return En},exp:function(){return Dn},circle:function(){return Tn},elastic:Nn,back:Fn,bounce:function(){return zn}}),Bo=ca.map({in:ht,out:kn,"in-out":Mn,"out-in":function(t){return Mn(kn(t))}});ca.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,r=e>=0?t.substring(e+1):"in";return n=Wo.get(n)||Po,r=Bo.get(r)||ht,wn(r(n.apply(null,Array.prototype.slice.call(arguments,1))))},ca.interpolateHcl=In,ca.interpolateHsl=Rn,ca.interpolateLab=Ln,ca.interpolateRound=Hn,ca.layout={},ca.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Bn(t[n]));return e}},ca.layout.chord=function(){function t(){var t,c,h,d,f,p={},g=[],v=ca.range(a),m=[];for(n=[],r=[],t=0,d=-1;++d<a;){for(c=0,f=-1;++f<a;)c+=i[d][f];g.push(c),m.push(ca.range(a)),t+=c}for(o&&v.sort(function(t,e){return o(g[t],g[e])}),s&&m.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(2*Ra-u*a)/t,c=0,d=-1;++d<a;){for(h=c,f=-1;++f<a;){var y=v[d],x=m[y][f],b=i[y][x],w=c,k=c+=b*t;p[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:k,value:b}}r[y]={index:y,startAngle:h,endAngle:c,value:(c-h)/t},c+=u}for(d=-1;++d<a;)for(f=d-1;++f<a;){var M=p[d+"-"+f],S=p[f+"-"+d];(M.value||S.value)&&n.push(M.value<S.value?{source:S,target:M}:{source:M,target:S})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,a,o,s,l,c={},u=0;return c.matrix=function(t){return arguments.length?(a=(i=t)&&i.length,n=r=null,c):i},c.padding=function(t){return arguments.length?(u=t,n=r=null,c):u},c.sortGroups=function(t){return arguments.length?(o=t,n=r=null,c):o},c.sortSubgroups=function(t){return arguments.length?(s=t,n=null,c):s},c.sortChords=function(t){return arguments.length?(l=t,n&&e(),c):l},c.chords=function(){return n||t(),n},c.groups=function(){return r||t(),r},c},ca.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=1/Math.sqrt(a*a+o*o);if(g>(i-n)*s){var l=e.charge*s*s;return t.px-=a*l,t.py-=o*l,!0}if(e.point&&isFinite(s)){var l=e.pointCharge*s*s;t.px-=a*l,t.py-=o*l}}return!e.charge}}function e(t){t.px=ca.event.x,t.py=ca.event.y,s.resume()}var n,r,i,a,o,s={},l=ca.dispatch("start","tick","end"),c=[1,1],u=.9,h=Yo,d=Go,f=-30,p=.1,g=.8,v=[],m=[];return s.tick=function(){if((r*=.99)<.005)return l.end({type:"end",alpha:r=0}),!0;var e,n,s,h,d,g,y,x,b,w=v.length,k=m.length;for(n=0;k>n;++n)s=m[n],h=s.source,d=s.target,x=d.x-h.x,b=d.y-h.y,(g=x*x+b*b)&&(g=r*a[n]*((g=Math.sqrt(g))-i[n])/g,x*=g,b*=g,d.x-=x*(y=h.weight/(d.weight+h.weight)),d.y-=b*y,h.x+=x*(y=1-y),h.y+=b*y);if((y=r*p)&&(x=c[0]/2,b=c[1]/2,n=-1,y))for(;++n<w;)s=v[n],s.x+=(x-s.x)*y,s.y+=(b-s.y)*y;if(f)for(Xn(e=ca.geom.quadtree(v),r,o),n=-1;++n<w;)(s=v[n]).fixed||e.visit(t(s));for(n=-1;++n<w;)s=v[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*u,s.y-=(s.py-(s.py=s.y))*u);l.tick({type:"tick",alpha:r})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(m=t,s):m},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.friction=function(t){return arguments.length?(u=+t,s):u},s.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.gravity=function(t){return arguments.length?(p=+t,s):p},s.theta=function(t){return arguments.length?(g=+t,s):g},s.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(l.start({type:"start",alpha:r=t}),ca.timer(s.tick)),s):r},s.start=function(){function t(t,n){for(var r,i=e(),a=-1,o=i.length;++a<o;)if(!isNaN(r=i[a][t]))return r;return Math.random()*n}function e(){if(!l){for(l=[],r=0;p>r;++r)l[r]=[];for(r=0;g>r;++r){var t=m[r];l[t.source.index].push(t.target),l[t.target.index].push(t.source)}}return l[n]}var n,r,l,u,p=v.length,g=m.length,y=c[0],x=c[1];for(n=0;p>n;++n)(u=v[n]).index=n,u.weight=0;for(n=0;g>n;++n)u=m[n],"number"==typeof u.source&&(u.source=v[u.source]),"number"==typeof u.target&&(u.target=v[u.target]),++u.source.weight,++u.target.weight;for(n=0;p>n;++n)u=v[n],isNaN(u.x)&&(u.x=t("x",y)),isNaN(u.y)&&(u.y=t("y",x)),isNaN(u.px)&&(u.px=u.x),isNaN(u.py)&&(u.py=u.y);if(i=[],"function"==typeof h)for(n=0;g>n;++n)i[n]=+h.call(this,m[n],n);else for(n=0;g>n;++n)i[n]=h;if(a=[],"function"==typeof d)for(n=0;g>n;++n)a[n]=+d.call(this,m[n],n);else for(n=0;g>n;++n)a[n]=d;if(o=[],"function"==typeof f)for(n=0;p>n;++n)o[n]=+f.call(this,v[n],n);else for(n=0;p>n;++n)o[n]=f;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=ca.behavior.drag().origin(ht).on("dragstart.force",Vn).on("drag.force",e).on("dragend.force",On)),arguments.length?void this.on("mouseover.force",jn).on("mouseout.force",qn).call(n):n},ca.rebind(s,l,"on")};var Yo=20,Go=1;ca.layout.hierarchy=function(){function t(e,o,s){var l=i.call(n,e,o);if(e.depth=o,s.push(e),l&&(c=l.length)){for(var c,u,h=-1,d=e.children=[],f=0,p=o+1;++h<c;)u=t(l[h],p,s),u.parent=e,d.push(u),f+=u.value;r&&d.sort(r),a&&(e.value=f)}else a&&(e.value=+a.call(n,e,o)||0);return e}function e(t,r){var i=t.children,o=0;if(i&&(s=i.length))for(var s,l=-1,c=r+1;++l<s;)o+=e(i[l],c);else a&&(o=+a.call(n,t,r)||0);return a&&(t.value=o),o}function n(e){var n=[];return t(e,0,n),n}var r=Qn,i=Zn,a=Kn;return n.sort=function(t){return arguments.length?(r=t,n):r},n.children=function(t){return arguments.length?(i=t,n):i},n.value=function(t){return arguments.length?(a=t,n):a},n.revalue=function(t){return e(t,0),t},n},ca.layout.partition=function(){function t(e,n,r,i){var a=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,l,c=-1;for(r=e.value?r/e.value:0;++c<o;)t(s=a[c],n,l=s.value*r,i),n+=l}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return t(o[0],0,i[0],i[1]/e(o[0])),o}var r=ca.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},Un(n,r)},ca.layout.pie=function(){function t(a){var o=a.map(function(n,r){return+e.call(t,n,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),l=(("function"==typeof i?i.apply(this,arguments):i)-s)/ca.sum(o),c=ca.range(a.length);null!=n&&c.sort(n===Vo?function(t,e){return o[e]-o[t]}:function(t,e){return n(a[t],a[e])});var u=[];return c.forEach(function(t){var e;u[t]={data:a[t],value:e=o[t],startAngle:s,endAngle:s+=e*l}}),u}var e=Number,n=Vo,r=0,i=2*Ra;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t};var Vo={};ca.layout.stack=function(){function t(s,l){var c=s.map(function(n,r){return e.call(t,n,r)}),u=c.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),o.call(t,e,n)]})}),h=n.call(t,u,l);c=ca.permute(c,h),u=ca.permute(u,h);var d,f,p,g=r.call(t,u,l),v=c.length,m=c[0].length;for(f=0;m>f;++f)for(i.call(t,c[0][f],p=g[f],u[0][f][1]),d=1;v>d;++d)i.call(t,c[d][f],p+=u[d-1][f][1],u[d][f][1]);return s}var e=ht,n=nr,r=rr,i=er,a=$n,o=tr;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Oo.get(e)||nr,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:jo.get(e)||rr,t):r},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(i=e,t):i},t};var Oo=ca.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(ir),a=t.map(ar),o=ca.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,l=0,c=[],u=[];for(e=0;r>e;++e)n=o[e],l>s?(s+=a[n],c.push(n)):(l+=a[n],u.push(n));return u.reverse().concat(c)},reverse:function(t){return ca.range(t.length).reverse()},default:nr}),jo=ca.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],s=0,l=[];for(n=0;a>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>s&&(s=r),o.push(r)}for(n=0;a>n;++n)l[n]=(s-o[n])/2;return l},wiggle:function(t){var e,n,r,i,a,o,s,l,c,u=t.length,h=t[0],d=h.length,f=[];for(f[0]=l=c=0,n=1;d>n;++n){for(e=0,i=0;u>e;++e)i+=t[e][n][1];for(e=0,a=0,s=h[n][0]-h[n-1][0];u>e;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);e>r;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}f[n]=l-=i?a/i*s:0,c>l&&(c=l)}for(n=0;d>n;++n)f[n]-=c;return f},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;a>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:rr});ca.layout.histogram=function(){function t(t,a){for(var o,s,l=[],c=t.map(n,this),u=r.call(this,c,a),h=i.call(this,u,c,a),a=-1,d=c.length,f=h.length-1,p=e?1:1/d;++a<f;)o=l[a]=[],o.dx=h[a+1]-(o.x=h[a]),o.y=0;if(f>0)for(a=-1;++a<d;)(s=c[a])>=u[0]&&s<=u[1]&&(o=l[ca.bisect(h,s,1,f)-1],o.y+=p,o.push(t[a]));return l}var e=!0,n=Number,r=cr,i=sr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=ut(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return lr(t,e)}:ut(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},ca.layout.tree=function(){function t(t,i){function a(t,e){var r=t.children,i=t._tree;if(r&&(o=r.length)){for(var o,l,c,u=r[0],h=u,d=-1;++d<o;)c=r[d],a(c,l),h=s(c,l,h),l=c;yr(t);var f=.5*(u._tree.prelim+c._tree.prelim);e?(i.prelim=e._tree.prelim+n(t,e),i.mod=i.prelim-f):i.prelim=f}else e&&(i.prelim=e._tree.prelim+n(t,e))}function o(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(r=n.length)){var r,i=-1;for(e+=t._tree.mod;++i<r;)o(n[i],e)}}function s(t,e,r){if(e){for(var i,a=t,o=t,s=e,l=t.parent.children[0],c=a._tree.mod,u=o._tree.mod,h=s._tree.mod,d=l._tree.mod;s=dr(s),a=hr(a),s&&a;)l=hr(l),o=dr(o),o._tree.ancestor=t,i=s._tree.prelim+h-a._tree.prelim-c+n(s,a),i>0&&(xr(br(s,t,r),t,i),c+=i,u+=i),h+=s._tree.mod,c+=a._tree.mod,d+=l._tree.mod,u+=o._tree.mod;s&&!dr(o)&&(o._tree.thread=s,o._tree.mod+=h-u),a&&!hr(l)&&(l._tree.thread=a,l._tree.mod+=c-d,r=t)}return r}var l=e.call(this,t,i),c=l[0];mr(c,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),a(c),o(c,-c._tree.prelim);var u=fr(c,gr),h=fr(c,pr),d=fr(c,vr),f=u.x-n(u,h)/2,p=h.x+n(h,u)/2,g=d.depth||1;return mr(c,function(t){t.x=(t.x-f)/(p-f)*r[0],t.y=t.depth/g*r[1],delete t._tree}),l}var e=ca.layout.hierarchy().sort(null).value(null),n=ur,r=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=e,t):r},Un(t,e)},ca.layout.pack=function(){function t(t,i){var a=e.call(this,t,i),o=a[0];o.x=0,o.y=0,mr(o,function(t){t.r=Math.sqrt(t.value)}),mr(o,Cr);var s=r[0],l=r[1],c=Math.max(2*o.r/s,2*o.r/l);if(n>0){var u=n*c/2;mr(o,function(t){t.r+=u}),mr(o,Cr),mr(o,function(t){t.r-=u}),c=Math.max(2*o.r/s,2*o.r/l)}return Er(o,s/2,l/2,1/c),a}var e=ca.layout.hierarchy().sort(wr),n=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.padding=function(e){return arguments.length?(n=+e,t):n},Un(t,e)},ca.layout.cluster=function(){function t(t,i){var a,o=e.call(this,t,i),s=o[0],l=0;mr(s,function(t){var e=t.children;e&&e.length?(t.x=Nr(e),t.y=Tr(e)):(t.x=a?l+=n(t,a):0,t.y=0,a=t)});var c=Fr(s),u=zr(s),h=c.x-n(c,u)/2,d=u.x+n(u,c)/2;return mr(s,function(t){t.x=(t.x-h)/(d-h)*r[0],t.y=(1-(s.y?t.y/s.y:1))*r[1]}),o}var e=ca.layout.hierarchy().sort(null).value(null),n=ur,r=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=e,t):r},Un(t,e)},ca.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var a=n.children;if(a&&a.length){var o,s,l,c=h(n),u=[],d=a.slice(),p=1/0,g="slice"===f?c.dx:"dice"===f?c.dy:"slice-dice"===f?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(t(d,c.dx*c.dy/n.value),u.area=0;(l=d.length)>0;)u.push(o=d[l-1]),u.area+=o.area,"squarify"!==f||(s=r(u,g))<=p?(d.pop(),p=s):(u.area-=u.pop().area,i(u,g,c,!1),g=Math.min(c.dx,c.dy),u.length=u.area=0,p=1/0);u.length&&(i(u,g,c,!0),u.length=u.area=0),a.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var a,o=h(e),s=r.slice(),l=[];for(t(s,o.dx*o.dy/e.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(i(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(a>n&&(a=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*p/r,r/(e*a*p)):1/0}function i(t,e,n,r){var i,a=-1,o=t.length,s=n.x,c=n.y,u=e?l(t.area/e):0;if(e==n.dx){for((r||u>n.dy)&&(u=n.dy);++a<o;)i=t[a],i.x=s,i.y=c,i.dy=u,s+=i.dx=Math.min(n.x+n.dx-s,u?l(i.area/u):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((r||u>n.dx)&&(u=n.dx);++a<o;)i=t[a],i.x=s,i.y=c,i.dx=u,c+=i.dy=Math.min(n.y+n.dy-c,u?l(i.area/u):0);i.z=!1,i.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function a(r){var i=o||s(r),a=i[0];return a.x=0,a.y=0,a.dx=c[0],a.dy=c[1],o&&s.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),d&&(o=i),i}var o,s=ca.layout.hierarchy(),l=Math.round,c=[1,1],u=null,h=Ir,d=!1,f="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(c=t,a):c},a.padding=function(t){function e(e){var n=t.call(a,e,e.depth);return null==n?Ir(e):Rr(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Rr(e,t)}if(!arguments.length)return u;var r;return h=null==(u=t)?Ir:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,a},a.round=function(t){return arguments.length?(l=t?Math.round:Number,a):l!=Number},a.sticky=function(t){return arguments.length?(d=t,o=null,a):d},a.ratio=function(t){return arguments.length?(p=t,a):p},a.mode=function(t){return arguments.length?(f=t+"",a):f},Un(a,s)},ca.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do{n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ca.random.normal.apply(ca,arguments);return function(){return Math.exp(t())}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e/t}}},ca.scale={},ca.scale.linear=function(){return Yr([0,1],[0,1],yn,!1)},ca.scale.log=function(){return Xr(ca.scale.linear().domain([0,Math.LN10]),10,Ur,Zr)};var qo=ca.format(".0e");ca.scale.pow=function(){return $r(ca.scale.linear(),1)},ca.scale.sqrt=function(){return ca.scale.pow().exponent(.5)},ca.scale.ordinal=function(){return ei([],{t:"range",a:[[]]})},ca.scale.category10=function(){return ca.scale.ordinal().range(Xo)},ca.scale.category20=function(){return ca.scale.ordinal().range(Uo)},ca.scale.category20b=function(){return ca.scale.ordinal().range(Zo)},ca.scale.category20c=function(){return ca.scale.ordinal().range(Ko)};var Xo=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Uo=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Zo=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Ko=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];ca.scale.quantile=function(){return ni([],[])},ca.scale.quantize=function(){return ri(0,1,[0,1])},ca.scale.threshold=function(){return ii([.5],[0,1])},ca.scale.identity=function(){return ai([0,1])},ca.svg.arc=function(){function t(){var t=e.apply(this,arguments),a=n.apply(this,arguments),o=r.apply(this,arguments)+Qo,s=i.apply(this,arguments)+Qo,l=(o>s&&(l=o,o=s,s=l),s-o),c=Ra>l?"0":"1",u=Math.cos(o),h=Math.sin(o),d=Math.cos(s),f=Math.sin(s);return l>=Jo?t?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":t?"M"+a*u+","+a*h+"A"+a+","+a+" 0 "+c+",1 "+a*d+","+a*f+"L"+t*d+","+t*f+"A"+t+","+t+" 0 "+c+",0 "+t*u+","+t*h+"Z":"M"+a*u+","+a*h+"A"+a+","+a+" 0 "+c+",1 "+a*d+","+a*f+"L0,0Z"}var e=oi,n=si,r=li,i=ci;return t.innerRadius=function(n){return arguments.length?(e=ut(n),t):e},t.outerRadius=function(e){return arguments.length?(n=ut(e),t):n},t.startAngle=function(e){return arguments.length?(r=ut(e),t):r},t.endAngle=function(e){return arguments.length?(i=ut(e),t):i},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,a=(r.apply(this,arguments)+i.apply(this,arguments))/2+Qo;return[Math.cos(a)*t,Math.sin(a)*t]},t};var Qo=-Ra/2,Jo=2*Ra-1e-6;ca.svg.line.radial=function(){var t=Fe(ui);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},He.reverse=Pe,Pe.reverse=He,ca.svg.area=function(){return hi(ht)},ca.svg.area.radial=function(){var t=hi(ui);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ca.svg.chord=function(){function t(t,s){var l=e(this,a,t,s),c=e(this,o,t,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,c)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+i(c.r,c.p1,l.r,l.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),a=s.call(t,i,r),o=l.call(t,i,r)+Qo,u=c.call(t,i,r)+Qo;return{r:a,a0:o,a1:u,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(u),a*Math.sin(u)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ra)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var a=ue,o=he,s=di,l=li,c=ci;return t.radius=function(e){return arguments.length?(s=ut(e),t):s},t.source=function(e){return arguments.length?(a=ut(e),t):a},t.target=function(e){return arguments.length?(o=ut(e),t):o},t.startAngle=function(e){return arguments.length?(l=ut(e),t):l},t.endAngle=function(e){return arguments.length?(c=ut(e),t):c},t},ca.svg.diagonal=function(){function t(t,i){var a=e.call(this,t,i),o=n.call(this,t,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=ue,n=he,r=fi;return t.source=function(n){return arguments.length?(e=ut(n),t):e},t.target=function(e){return arguments.length?(n=ut(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},ca.svg.diagonal.radial=function(){var t=ca.svg.diagonal(),e=fi,n=t.projection;return t.projection=function(t){return arguments.length?n(pi(e=t)):e},t},ca.svg.symbol=function(){function t(t,r){return($o.get(e.call(this,t,r))||mi)(n.call(this,t,r))}var e=vi,n=gi;return t.type=function(n){return arguments.length?(e=ut(n),t):e},t.size=function(e){return arguments.length?(n=ut(e),t):n},t};var $o=ca.map({circle:mi,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ns)),n=e*ns;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/es),n=e*es/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/es),n=e*es/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});ca.svg.symbolTypes=$o.keys();var ts,es=Math.sqrt(3),ns=Math.tan(30*Ha),rs=[],is=0,as={ease:An,delay:0,duration:250};rs.call=Ca.call,rs.empty=Ca.empty,rs.node=Ca.node,ca.transition=function(t){return arguments.length?ts?t.transition():t:Ta.transition()},ca.transition.prototype=rs,rs.select=function(t){var e,n,r,i=this.id,a=[];"function"!=typeof t&&(t=m(t));for(var o=-1,s=this.length;++o<s;){a.push(e=[]);for(var l=this[o],c=-1,u=l.length;++c<u;)(r=l[c])&&(n=t.call(r,r.__data__,c))?("__data__"in r&&(n.__data__=r.__data__),wi(n,c,i,r.__transition__[i]),e.push(n)):e.push(null)}return yi(a,i)},rs.selectAll=function(t){var e,n,r,i,a,o=this.id,s=[];"function"!=typeof t&&(t=y(t));for(var l=-1,c=this.length;++l<c;)for(var u=this[l],h=-1,d=u.length;++h<d;)if(r=u[h]){a=r.__transition__[o],n=t.call(r,r.__data__,h),s.push(e=[]);for(var f=-1,p=n.length;++f<p;)wi(i=n[f],f,o,a),e.push(i)}return yi(s,o)},rs.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=E(t));for(var a=0,o=this.length;o>a;a++){i.push(e=[]);for(var n=this[a],s=0,l=n.length;l>s;s++)(r=n[s])&&t.call(r,r.__data__,s)&&e.push(r)}return yi(i,this.id,this.time).ease(this.ease())},rs.tween=function(t,e){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(t):I(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(r){r.__transition__[n].tween.set(t,e)})},rs.attr=function(t,e){function n(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i=xn(t),a=ca.ns.qualify(t);return xi(this,"attr."+t,e,function(t){function e(){var e,n=this.getAttribute(a);return n!==t&&(e=i(n,t),function(t){this.setAttribute(a,e(t))})}function o(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=i(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})}return null==t?a.local?r:n:(t+="",a.local?o:e)})},rs.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=ca.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},rs.style=function(t,e,n){function r(){this.style.removeProperty(t)}var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}var a=xn(t);return xi(this,"style."+t,e,function(e){function i(){var r,i=ha.getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=a(i,e),function(e){this.style.setProperty(t,r(e),n)})}return null==e?r:(e+="",i)})},rs.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,i){var a=e.call(this,r,i,ha.getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}})},rs.text=function(t){return xi(this,"text",t,bi)},rs.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},rs.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=ca.ease.apply(ca,arguments)),I(this,function(n){n.__transition__[e].ease=t}))},rs.delay=function(t){var e=this.id;return I(this,"function"==typeof t?function(n,r,i){n.__transition__[e].delay=0|t.call(n,n.__data__,r,i)}:(t|=0,function(n){n.__transition__[e].delay=t}))},rs.duration=function(t){var e=this.id;return I(this,"function"==typeof t?function(n,r,i){n.__transition__[e].duration=Math.max(1,0|t.call(n,n.__data__,r,i))}:(t=Math.max(1,0|t),function(n){n.__transition__[e].duration=t}))},rs.each=function(t,e){var n=this.id;if(arguments.length<2){var r=as,i=ts;ts=n,I(this,function(e,r,i){as=e.__transition__[n],t.call(e,e.__data__,r,i)}),as=r,ts=i}else I(this,function(r){r.__transition__[n].event.on(t,e)});return this},rs.transition=function(){for(var t,e,n,r,i=this.id,a=++is,o=[],s=0,l=this.length;l>s;s++){o.push(t=[]);for(var e=this[s],c=0,u=e.length;u>c;c++)(n=e[c])&&(r=Object.create(n.__transition__[i]),r.delay+=r.duration,wi(n,c,a,r)),t.push(n)}return yi(o,a)},ca.svg.axis=function(){function t(t){t.each(function(){var t,h=ca.select(this),d=null==c?n.ticks?n.ticks.apply(n,l):n.domain():c,f=null==e?n.tickFormat?n.tickFormat.apply(n,l):String:e,p=Si(n,d,u),g=h.selectAll(".tick.minor").data(p,String),v=g.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),m=ca.transition(g.exit()).style("opacity",1e-6).remove(),y=ca.transition(g).style("opacity",1),x=h.selectAll(".tick.major").data(d,String),b=x.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),w=ca.transition(x.exit()).style("opacity",1e-6).remove(),k=ca.transition(x).style("opacity",1),M=Hr(n),S=h.selectAll(".domain").data([0]),C=(S.enter().append("path").attr("class","domain"),ca.transition(S)),A=n.copy(),_=this.__chart__||A;this.__chart__=A,b.append("line"),b.append("text");var E=b.select("line"),D=k.select("line"),T=x.select("text").text(f),N=b.select("text"),F=k.select("text");switch(r){case"bottom":t=ki,v.attr("y2",a),y.attr("x2",0).attr("y2",a),E.attr("y2",i),N.attr("y",Math.max(i,0)+s),D.attr("x2",0).attr("y2",i),F.attr("x",0).attr("y",Math.max(i,0)+s),T.attr("dy",".71em").style("text-anchor","middle"),C.attr("d","M"+M[0]+","+o+"V0H"+M[1]+"V"+o);break;case"top":t=ki,v.attr("y2",-a),y.attr("x2",0).attr("y2",-a),E.attr("y2",-i),N.attr("y",-(Math.max(i,0)+s)),D.attr("x2",0).attr("y2",-i),F.attr("x",0).attr("y",-(Math.max(i,0)+s)),T.attr("dy","0em").style("text-anchor","middle"),C.attr("d","M"+M[0]+","+-o+"V0H"+M[1]+"V"+-o);break;case"left":t=Mi,v.attr("x2",-a),y.attr("x2",-a).attr("y2",0),E.attr("x2",-i),N.attr("x",-(Math.max(i,0)+s)),D.attr("x2",-i).attr("y2",0),F.attr("x",-(Math.max(i,0)+s)).attr("y",0),T.attr("dy",".32em").style("text-anchor","end"),C.attr("d","M"+-o+","+M[0]+"H0V"+M[1]+"H"+-o);break;case"right":t=Mi,v.attr("x2",a),y.attr("x2",a).attr("y2",0),E.attr("x2",i),N.attr("x",Math.max(i,0)+s),D.attr("x2",i).attr("y2",0),F.attr("x",Math.max(i,0)+s).attr("y",0),T.attr("dy",".32em").style("text-anchor","start"),C.attr("d","M"+o+","+M[0]+"H0V"+M[1]+"H"+o)}if(n.ticks)b.call(t,_),k.call(t,A),w.call(t,A),v.call(t,_),y.call(t,A),m.call(t,A);else{var z=A.rangeBand()/2,I=function(t){return A(t)+z};b.call(t,I),k.call(t,I)}})}var e,n=ca.scale.linear(),r=os,i=6,a=6,o=6,s=3,l=[10],c=null,u=0;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in ss?e+"":os,t):r},t.ticks=function(){return arguments.length?(l=arguments,t):l},t.tickValues=function(e){return arguments.length?(c=e,t):c},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e,n){if(!arguments.length)return i;var r=arguments.length-1;return i=+e,a=r>1?+n:i,o=r>0?+arguments[r]:i,t},t.tickPadding=function(e){return arguments.length?(s=+e,t):s},t.tickSubdivide=function(e){return arguments.length?(u=+e,t):u},t};var os="bottom",ss={top:1,right:1,bottom:1,left:1};ca.svg.brush=function(){function t(a){a.each(function(){var a,o=ca.select(this),c=o.selectAll(".background").data([0]),h=o.selectAll(".extent").data([0]),d=o.selectAll(".resize").data(u,String);o.style("pointer-events","all").on("mousedown.brush",i).on("touchstart.brush",i),c.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),h.enter().append("rect").attr("class","extent").style("cursor","move"),d.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ls[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),d.style("display",t.empty()?"none":null),d.exit().remove(),s&&(a=Hr(s),c.attr("x",a[0]).attr("width",a[1]-a[0]),n(o)),l&&(a=Hr(l),c.attr("y",a[0]).attr("height",a[1]-a[0]),r(o)),e(o)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)][0]+","+h[+/^s/.test(t)][1]+")"})}function n(t){t.select(".extent").attr("x",h[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1][0]-h[0][0])}function r(t){t.select(".extent").attr("y",h[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1][1]-h[0][1])}function i(){function i(){var t=ca.event.changedTouches;return t?ca.touches(y,t)[0]:ca.mouse(y)}function u(){32==ca.event.keyCode&&(C||(v=null,A[0]-=h[1][0],A[1]-=h[1][1],C=2),c())}function d(){32==ca.event.keyCode&&2==C&&(A[0]+=h[1][0],A[1]+=h[1][1],C=0,c())}function f(){var t=i(),a=!1;m&&(t[0]+=m[0],t[1]+=m[1]),C||(ca.event.altKey?(v||(v=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]),A[0]=h[+(t[0]<v[0])][0],A[1]=h[+(t[1]<v[1])][1]):v=null),M&&p(t,s,0)&&(n(w),a=!0),S&&p(t,l,1)&&(r(w),a=!0),a&&(e(w),b({type:"brush",mode:C?"move":"resize"}))}function p(t,e,n){var r,i,o=Hr(e),s=o[0],l=o[1],c=A[n],u=h[1][n]-h[0][n];return C&&(s-=c,l-=u+c),r=Math.max(s,Math.min(l,t[n])),C?i=(r+=c)+u:(v&&(c=Math.max(s,Math.min(l,2*v[n]-r))),r>c?(i=r,r=c):i=c),h[0][n]!==r||h[1][n]!==i?(a=null,h[0][n]=r,h[1][n]=i,!0):void 0}function g(){f(),w.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ca.select("body").style("cursor",null),_.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),b({type:"brushend"}),c()}var v,m,y=this,x=ca.select(ca.event.target),b=o.of(y,arguments),w=ca.select(y),k=x.datum(),M=!/^(n|s)$/.test(k)&&s,S=!/^(e|w)$/.test(k)&&l,C=x.classed("extent"),A=i(),_=ca.select(ha).on("mousemove.brush",f).on("mouseup.brush",g).on("touchmove.brush",f).on("touchend.brush",g).on("keydown.brush",u).on("keyup.brush",d);if(C)A[0]=h[0][0]-A[0],A[1]=h[0][1]-A[1];else if(k){var E=+/w$/.test(k),D=+/^n/.test(k);m=[h[1-E][0]-A[0],h[1-D][1]-A[1]],A[0]=h[E][0],A[1]=h[D][1]}else ca.event.altKey&&(v=A.slice())
;w.style("pointer-events","none").selectAll(".resize").style("display",null),ca.select("body").style("cursor",x.style("cursor")),b({type:"brushstart"}),f(),c()}var a,o=d(t,"brushstart","brush","brushend"),s=null,l=null,u=cs[0],h=[[0,0],[0,0]];return t.x=function(e){return arguments.length?(s=e,u=cs[!s<<1|!l],t):s},t.y=function(e){return arguments.length?(l=e,u=cs[!s<<1|!l],t):l},t.extent=function(e){var n,r,i,o,c;return arguments.length?(a=[[0,0],[0,0]],s&&(n=e[0],r=e[1],l&&(n=n[0],r=r[0]),a[0][0]=n,a[1][0]=r,s.invert&&(n=s(n),r=s(r)),n>r&&(c=n,n=r,r=c),h[0][0]=0|n,h[1][0]=0|r),l&&(i=e[0],o=e[1],s&&(i=i[1],o=o[1]),a[0][1]=i,a[1][1]=o,l.invert&&(i=l(i),o=l(o)),i>o&&(c=i,i=o,o=c),h[0][1]=0|i,h[1][1]=0|o),t):(e=a||h,s&&(n=e[0][0],r=e[1][0],a||(n=h[0][0],r=h[1][0],s.invert&&(n=s.invert(n),r=s.invert(r)),n>r&&(c=n,n=r,r=c))),l&&(i=e[0][1],o=e[1][1],a||(i=h[0][1],o=h[1][1],l.invert&&(i=l.invert(i),o=l.invert(o)),i>o&&(c=i,i=o,o=c))),s&&l?[[n,i],[r,o]]:s?[n,r]:l&&[i,o])},t.clear=function(){return a=null,h[0][0]=h[0][1]=h[1][0]=h[1][1]=0,t},t.empty=function(){return s&&h[0][0]===h[1][0]||l&&h[0][1]===h[1][1]},ca.rebind(t,o,"on")};var ls={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},cs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];ca.time={};var us=Date,hs=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Ci.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ds.setUTCDate.apply(this._,arguments)},setDay:function(){ds.setUTCDay.apply(this._,arguments)},setFullYear:function(){ds.setUTCFullYear.apply(this._,arguments)},setHours:function(){ds.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ds.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ds.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ds.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ds.setUTCSeconds.apply(this._,arguments)},setTime:function(){ds.setTime.apply(this._,arguments)}};var ds=Date.prototype,fs=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ps=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],gs=["January","February","March","April","May","June","July","August","September","October","November","December"],vs=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];ca.time.year=Ai(function(t){return t=ca.time.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ca.time.years=ca.time.year.range,ca.time.years.utc=ca.time.year.utc.range,ca.time.day=Ai(function(t){var e=new us(1970,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ca.time.days=ca.time.day.range,ca.time.days.utc=ca.time.day.utc.range,ca.time.dayOfYear=function(t){var e=ca.time.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},hs.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=ca.time[t]=Ai(function(t){return(t=ca.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ca.time.year(t).getDay();return Math.floor((ca.time.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ca.time[t+"s"]=n.range,ca.time[t+"s"].utc=n.utc.range,ca.time[t+"OfYear"]=function(t){var n=ca.time.year(t).getDay();return Math.floor((ca.time.dayOfYear(t)+(n+e)%7)/7)}}),ca.time.week=ca.time.sunday,ca.time.weeks=ca.time.sunday.range,ca.time.weeks.utc=ca.time.sunday.utc.range,ca.time.weekOfYear=ca.time.sundayOfYear,ca.time.format=function(t){function e(e){for(var r,i,a,o=[],s=-1,l=0;++s<n;)37===t.charCodeAt(s)&&(o.push(t.substring(l,s)),null!=(i=Ms[r=t.charAt(++s)])&&(r=t.charAt(++s)),(a=Ss[r])&&(r=a(e,null==i?"e"===r?" ":"0":i)),o.push(r),l=s+1);return o.push(t.substring(l,s)),o.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Ei(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=new us;return r.setFullYear(n.y,n.m,n.d),r.setHours(n.H,n.M,n.S,n.L),r},e.toString=function(){return t},e};var ms=Di(fs),ys=Di(ps),xs=Di(gs),bs=Ti(gs),ws=Di(vs),ks=Ti(vs),Ms={"-":"",_:" ",0:"0"},Ss={a:function(t){return ps[t.getDay()]},A:function(t){return fs[t.getDay()]},b:function(t){return vs[t.getMonth()]},B:function(t){return gs[t.getMonth()]},c:ca.time.format("%a %b %e %X %Y"),d:function(t,e){return Ni(t.getDate(),e,2)},e:function(t,e){return Ni(t.getDate(),e,2)},H:function(t,e){return Ni(t.getHours(),e,2)},I:function(t,e){return Ni(t.getHours()%12||12,e,2)},j:function(t,e){return Ni(1+ca.time.dayOfYear(t),e,3)},L:function(t,e){return Ni(t.getMilliseconds(),e,3)},m:function(t,e){return Ni(t.getMonth()+1,e,2)},M:function(t,e){return Ni(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return Ni(t.getSeconds(),e,2)},U:function(t,e){return Ni(ca.time.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ni(ca.time.mondayOfYear(t),e,2)},x:ca.time.format("%m/%d/%Y"),X:ca.time.format("%H:%M:%S"),y:function(t,e){return Ni(t.getFullYear()%100,e,2)},Y:function(t,e){return Ni(t.getFullYear()%1e4,e,4)},Z:Zi,"%":function(){return"%"}},Cs={a:Fi,A:zi,b:Ii,B:Ri,c:Li,d:Vi,e:Vi,H:Oi,I:Oi,L:Xi,m:Gi,M:ji,p:Ui,S:qi,x:Hi,X:Pi,y:Bi,Y:Wi},As=/^\s*\d+/,_s=ca.map({am:0,pm:1});ca.time.format.utc=function(t){function e(t){try{us=Ci;var e=new us;return e._=t,n(e)}finally{us=Date}}var n=ca.time.format(t);return e.parse=function(t){try{us=Ci;var e=n.parse(t);return e&&e._}finally{us=Date}},e.toString=n.toString,e};var Es=ca.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");ca.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ki:Es,Ki.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ki.toString=Es.toString,ca.time.second=Ai(function(t){return new us(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ca.time.seconds=ca.time.second.range,ca.time.seconds.utc=ca.time.second.utc.range,ca.time.minute=Ai(function(t){return new us(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ca.time.minutes=ca.time.minute.range,ca.time.minutes.utc=ca.time.minute.utc.range,ca.time.hour=Ai(function(t){var e=t.getTimezoneOffset()/60;return new us(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ca.time.hours=ca.time.hour.range,ca.time.hours.utc=ca.time.hour.utc.range,ca.time.month=Ai(function(t){return t=ca.time.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ca.time.months=ca.time.month.range,ca.time.months.utc=ca.time.month.utc.range;var Ds=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ts=[[ca.time.second,1],[ca.time.second,5],[ca.time.second,15],[ca.time.second,30],[ca.time.minute,1],[ca.time.minute,5],[ca.time.minute,15],[ca.time.minute,30],[ca.time.hour,1],[ca.time.hour,3],[ca.time.hour,6],[ca.time.hour,12],[ca.time.day,1],[ca.time.day,2],[ca.time.week,1],[ca.time.month,1],[ca.time.month,3],[ca.time.year,1]],Ns=[[ca.time.format("%Y"),It],[ca.time.format("%B"),function(t){return t.getMonth()}],[ca.time.format("%b %d"),function(t){return 1!=t.getDate()}],[ca.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[ca.time.format("%I %p"),function(t){return t.getHours()}],[ca.time.format("%I:%M"),function(t){return t.getMinutes()}],[ca.time.format(":%S"),function(t){return t.getSeconds()}],[ca.time.format(".%L"),function(t){return t.getMilliseconds()}]],Fs=ca.scale.linear(),zs=ta(Ns);Ts.year=function(t,e){return Fs.domain(t.map(na)).ticks(e).map(ea)},ca.time.scale=function(){return Qi(ca.scale.linear(),Ts,zs)};var Is=Ts.map(function(t){return[t[0].utc,t[1]]}),Rs=[[ca.time.format.utc("%Y"),It],[ca.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[ca.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[ca.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[ca.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[ca.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[ca.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[ca.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]],Ls=ta(Rs);return Is.year=function(t,e){return Fs.domain(t.map(ia)).ticks(e).map(ra)},ca.time.scale.utc=function(){return Qi(ca.scale.linear(),Is,Ls)},ca.text=function(){return ca.xhr.apply(ca,arguments).response(aa)},ca.json=function(t,e){return ca.xhr(t,"application/json",e).response(oa)},ca.html=function(t,e){return ca.xhr(t,"text/html",e).response(sa)},ca.xml=function(){return ca.xhr.apply(ca,arguments).response(la)},ca}(),function(){function t(t,e){return new Date(e,t+1,0).getDate()}var e=window.nv||{};e.version="1.1.15b",e.dev=!0,window.nv=e,e.tooltip=e.tooltip||{},e.utils=e.utils||{},e.models=e.models||{},e.charts={},e.graphs=[],e.logs={},e.dispatch=d3.dispatch("render_start","render_end"),e.dev&&(e.dispatch.on("render_start",function(t){e.logs.startTime=+new Date}),e.dispatch.on("render_end",function(t){e.logs.endTime=+new Date,e.logs.totalTime=e.logs.endTime-e.logs.startTime,e.log("total",e.logs.totalTime)})),e.log=function(){if(e.dev&&console.log&&console.log.apply);else if(e.dev&&"function"==typeof console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},e.render=function(t){t=t||1,e.render.active=!0,e.dispatch.render_start(),setTimeout(function(){for(var n,r,i=0;i<t&&(r=e.render.queue[i]);i++)n=r.generate(),typeof r.callback==typeof Function&&r.callback(n),e.graphs.push(n);e.render.queue.splice(0,i),e.render.queue.length?setTimeout(arguments.callee,0):(e.dispatch.render_end(),e.render.active=!1)},0)},e.render.active=!1,e.render.queue=[],e.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},e.identity=function(t){return t},e.strip=function(t){return t.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(t){return new Date(t.getFullYear(),t.getMonth(),0)},d3.time.monthEnds=function(t,e,n){return function(r,i,a){var o=t(r),s=[];if(o<r&&e(o),a>1)for(;o<i;){var l=new Date(+o);n(l)%a==0&&s.push(l),e(o)}else for(;o<i;)s.push(new Date(+o)),e(o);return s}}(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(t){return t.getMonth()}),e.interactiveGuideline=function(){"use strict";function t(h){h.each(function(h){function d(){var e=d3.mouse(this),r=e[0],i=e[1],l=!0,c=!1;if(u&&(r=d3.event.offsetX,i=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(l=!1),d3.event.target.className.baseVal.match("nv-legend")&&(c=!0)),l&&(r-=a.left,i-=a.top),r<0||i<0||r>p||i>g||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||c){if(u&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(n.nvPointerEventsClass))return;return s.elementMouseout({mouseX:r,mouseY:i}),void t.renderGuideLine(null)}var h=o.invert(r);s.elementMousemove({mouseX:r,mouseY:i,pointXValue:h}),"dblclick"===d3.event.type&&s.elementDblclick({mouseX:r,mouseY:i,pointXValue:h})}var f=d3.select(this),p=r||960,g=i||400,v=f.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([h]);v.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),c&&(c.on("mousemove",d,!0).on("mouseout",d,!0).on("dblclick",d),t.renderGuideLine=function(t){if(l){var n=v.select(".nv-interactiveGuideLine").selectAll("line").data(null!=t?[e.utils.NaNtoZero(t)]:[],String);n.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",g).attr("y2",0),n.exit().remove()}})})}var n=e.models.tooltip(),r=null,i=null,a={left:0,top:0},o=d3.scale.linear(),s=(d3.scale.linear(),d3.dispatch("elementMousemove","elementMouseout","elementDblclick")),l=!0,c=null,u=-1!==navigator.userAgent.indexOf("MSIE");return t.dispatch=s,t.tooltip=n,t.margin=function(e){return arguments.length?(a.top=void 0!==e.top?e.top:a.top,a.left=void 0!==e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(i=e,t):i},t.xScale=function(e){return arguments.length?(o=e,t):o},t.showGuideLine=function(e){return arguments.length?(l=e,t):l},t.svgContainer=function(e){return arguments.length?(c=e,t):c},t},e.interactiveBisect=function(t,e,n){"use strict";if(!t instanceof Array)return null;"function"!=typeof n&&(n=function(t,e){return t.x});var r=d3.bisector(n).left,i=d3.max([0,r(t,e)-1]),a=n(t[i],i);if(void 0===a&&(a=i),a===e)return i;var o=d3.min([i+1,t.length-1]),s=n(t[o],o);return void 0===s&&(s=o),Math.abs(s-e)>=Math.abs(a-e)?i:o},e.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach(function(t,a){var o=Math.abs(e-t);o<=r&&o<n&&(r=o,i=a)}),i},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function t(){if(h){var t=d3.select(h);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"))/e[2];f.left=f.left*n,f.top=f.top*n}}}function n(t){var e;e=h?d3.select(h):d3.select("body");var n=e.select(".nvtooltip");return null===n.node()&&(n=e.append("div").attr("class","nvtooltip "+(u||"xy-tooltip")).attr("id",g)),n.node().innerHTML=t,n.style("top",0).style("left",0).style("opacity",0),n.selectAll("div, table, td, tr").classed(v,!0),n.classed(v,!0),n.node()}function r(){if(p&&b(a)){t();var i=f.left,u=null!=c?c:f.top,g=n(x(a));if(d=g,h){var v=h.getElementsByTagName("svg")[0],m=(v?v.getBoundingClientRect():h.getBoundingClientRect(),{left:0,top:0});if(v){var y=v.getBoundingClientRect(),w=h.getBoundingClientRect(),k=y.top;if(k<0){var M=h.getBoundingClientRect();k=Math.abs(k)>M.height?0:k}m.top=Math.abs(k-w.top),m.left=Math.abs(y.left-w.left)}i+=h.offsetLeft+m.left-2*h.scrollLeft,u+=h.offsetTop+m.top-2*h.scrollTop}return l&&l>0&&(u=Math.floor(u/l)*l),e.tooltip.calcTooltipPosition([i,u],o,s,g),r}}var i=null,a=null,o="w",s=50,l=25,c=null,u=null,h=null,d=null,f={left:null,top:null},p=!0,g="nvtooltip-"+Math.floor(1e5*Math.random()),v="nv-pointer-events-none",m=function(t,e){return t},y=function(t){return t},x=function(t){if(null!=i)return i;if(null==t)return"";var e=d3.select(document.createElement("table"));e.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(y(t.value));var n=e.selectAll("tbody").data([t]).enter().append("tbody"),r=n.selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});r.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),r.append("td").classed("key",!0).html(function(t){return t.key}),r.append("td").classed("value",!0).html(function(t,e){return m(t.value,e)}),r.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}});var a=e.node().outerHTML;return void 0!==t.footer&&(a+="<div class='footer'>"+t.footer+"</div>"),a},b=function(t){return!!(t&&t.series&&t.series.length>0)};return r.nvPointerEventsClass=v,r.content=function(t){return arguments.length?(i=t,r):i},r.tooltipElem=function(){return d},r.contentGenerator=function(t){return arguments.length?("function"==typeof t&&(x=t),r):x},r.data=function(t){return arguments.length?(a=t,r):a},r.gravity=function(t){return arguments.length?(o=t,r):o},r.distance=function(t){return arguments.length?(s=t,r):s},r.snapDistance=function(t){return arguments.length?(l=t,r):l},r.classes=function(t){return arguments.length?(u=t,r):u},r.chartContainer=function(t){return arguments.length?(h=t,r):h},r.position=function(t){return arguments.length?(f.left=void 0!==t.left?t.left:f.left,f.top=void 0!==t.top?t.top:f.top,r):f},r.fixedTop=function(t){return arguments.length?(c=t,r):c},r.enabled=function(t){return arguments.length?(p=t,r):p},r.valueFormatter=function(t){return arguments.length?("function"==typeof t&&(m=t),r):m},r.headerFormatter=function(t){return arguments.length?("function"==typeof t&&(y=t),r):y},r.id=function(){return g},r},e.tooltip.show=function(t,n,r,i,a,o){var s=document.createElement("div");s.className="nvtooltip "+(o||"xy-tooltip");var l=a;a&&!a.tagName.match(/g|svg/i)||(l=document.getElementsByTagName("body")[0]),s.style.left=0,s.style.top=0,s.style.opacity=0,s.innerHTML=n,l.appendChild(s),a&&(t[0]=t[0]-a.scrollLeft,t[1]=t[1]-a.scrollTop),e.tooltip.calcTooltipPosition(t,r,i,s)},e.tooltip.findFirstNonSVGParent=function(t){for(;null!==t.tagName.match(/^g|svg$/i);)t=t.parentNode;return t},e.tooltip.findTotalOffsetTop=function(t,e){var n=e;do{isNaN(t.offsetTop)||(n+=t.offsetTop)}while(t=t.offsetParent);return n},e.tooltip.findTotalOffsetLeft=function(t,e){var n=e;do{isNaN(t.offsetLeft)||(n+=t.offsetLeft)}while(t=t.offsetParent);return n},e.tooltip.calcTooltipPosition=function(t,n,r,i){var a,o,s=parseInt(i.offsetHeight),l=parseInt(i.offsetWidth),c=e.utils.windowSize().width,u=e.utils.windowSize().height,h=window.pageYOffset,d=window.pageXOffset;u=window.innerWidth>=document.body.scrollWidth?u:u-16,c=window.innerHeight>=document.body.scrollHeight?c:c-16,n=n||"s",r=r||20;var f=function(t){return e.tooltip.findTotalOffsetTop(t,o)},p=function(t){return e.tooltip.findTotalOffsetLeft(t,a)};switch(n){case"e":a=t[0]-l-r,o=t[1]-s/2;var g=p(i),v=f(i);g<d&&(a=t[0]+r>d?t[0]+r:d-g+a),v<h&&(o=h-v+o),v+s>h+u&&(o=h+u-v+o-s);break;case"w":a=t[0]+r,o=t[1]-s/2;var g=p(i),v=f(i);g+l>c&&(a=t[0]-l-r),v<h&&(o=h+5),v+s>h+u&&(o=h+u-v+o-s);break;case"n":a=t[0]-l/2-5,o=t[1]+r;var g=p(i),v=f(i);g<d&&(a=d+5),g+l>c&&(a=a-l/2+5),v+s>h+u&&(o=h+u-v+o-s);break;case"s":a=t[0]-l/2,o=t[1]-s-r;var g=p(i),v=f(i);g<d&&(a=d+5),g+l>c&&(a=a-l/2+5),h>v&&(o=h);break;case"none":a=t[0],o=t[1]-r;var g=p(i),v=f(i)}return i.style.left=a+"px",i.style.top=o+"px",i.style.opacity=1,i.style.position="absolute",i},e.tooltip.cleanup=function(){for(var t=document.getElementsByClassName("nvtooltip"),e=[];t.length;)e.push(t[0]),t[0].style.transitionDelay="0 !important",t[0].style.opacity=0,t[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;e.length;){var t=e.pop();t.parentNode.removeChild(t)}},500)}}(),e.utils.windowSize=function(){var t={width:640,height:480};return document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(t.width=window.innerWidth,t.height=window.innerHeight),t},e.utils.windowResize=function(t){if(void 0!==t){var e=window.onresize;window.onresize=function(n){"function"==typeof e&&e(n),t(n)}}},e.utils.getColor=function(t){return arguments.length?"[object Array]"===Object.prototype.toString.call(t)?function(e,n){return e.color||t[n%t.length]}:t:e.utils.defaultColor()},e.utils.defaultColor=function(){var t=d3.scale.category20().range();return function(e,n){return e.color||t[n%t.length]}},e.utils.customTheme=function(t,e,n){e=e||function(t){return t.key},n=n||d3.scale.category20().range();var r=n.length;return function(i,a){var o=e(i);return r||(r=n.length),void 0!==t[o]?"function"==typeof t[o]?t[o]():t[o]:n[--r]}},e.utils.pjax=function(t,n){function r(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),e.utils.pjax(t,n)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},e.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px",""));return t.text().length*e*.5}return 0},e.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||t===1/0?0:t},e.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){"function"==typeof this[t]&&this[t](e)}.bind(this)),this},e.models.axis=function(){"use strict";function t(e){return e.each(function(t){var e=d3.select(this),a=e.selectAll("g.nv-wrap.nv-axis").data([t]),m=a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),y=(m.append("g"),a.select("g"));null!==p?n.ticks(p):("top"==n.orient()||"bottom"==n.orient())&&n.ticks(Math.abs(o.range()[1]-o.range()[0])/100),y.transition().call(n),v=v||n.scale();var x=n.tickFormat();null==x&&(x=v.tickFormat());var b=y.selectAll("text.nv-axislabel").data([s||null]);switch(b.exit().remove(),n.orient()){case"top":b.enter().append("text").attr("class","nv-axislabel");var w=2==o.range().length?o.range()[1]:o.range()[o.range().length-1]+(o.range()[1]-o.range()[0]);if(b.attr("text-anchor","middle").attr("y",0).attr("x",w/2),l){var k=a.selectAll("g.nv-axisMaxMin").data(o.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text"),k.exit().remove(),k.attr("transform",function(t,e){return"translate("+o(t)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-n.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=x(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate("+o.range()[e]+",0)"})}break;case"bottom":var M=36,S=30,C=y.selectAll("g").select("text");if(u%360){C.each(function(t,e){var n=this.getBBox().width;n>S&&(S=n)});var A=Math.abs(Math.sin(u*Math.PI/180)),M=(A?A*S:S)+30;C.attr("transform",function(t,e,n){return"rotate("+u+" 0,0)"}).style("text-anchor",u%360>0?"start":"end")}b.enter().append("text").attr("class","nv-axislabel");var w=2==o.range().length?o.range()[1]:o.range()[o.range().length-1]+(o.range()[1]-o.range()[0]);if(b.attr("text-anchor","middle").attr("y",M).attr("x",w/2),l){var k=a.selectAll("g.nv-axisMaxMin").data([o.domain()[0],o.domain()[o.domain().length-1]]);k.enter().append("g").attr("class","nv-axisMaxMin").append("text"),k.exit().remove(),k.attr("transform",function(t,e){return"translate("+(o(t)+(f?o.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",n.tickPadding()).attr("transform",function(t,e,n){return"rotate("+u+" 0,0)"}).style("text-anchor",u?u%360>0?"start":"end":"middle").text(function(t,e){var n=x(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate("+(o(t)+(f?o.rangeBand()/2:0))+",0)"})}d&&C.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":if(b.enter().append("text").attr("class","nv-axislabel"),b.style("text-anchor",h?"middle":"begin").attr("transform",h?"rotate(90)":"").attr("y",h?12-Math.max(r.right,i):-10).attr("x",h?o.range()[0]/2:n.tickPadding()),l){var k=a.selectAll("g.nv-axisMaxMin").data(o.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t,e){return"translate(0,"+o(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",n.tickPadding()).style("text-anchor","start").text(function(t,e){var n=x(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate(0,"+o.range()[e]+")"}).select("text").style("opacity",1)}break;case"left":if(b.enter().append("text").attr("class","nv-axislabel"),b.style("text-anchor",h?"middle":"end").attr("transform",h?"rotate(-90)":"").attr("y",h?-Math.max(r.left,i)+g:-10).attr("x",h?-o.range()[0]/2:-n.tickPadding()),l){var k=a.selectAll("g.nv-axisMaxMin").data(o.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t,e){return"translate(0,"+v(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-n.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=x(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate(0,"+o.range()[e]+")"}).select("text").style("opacity",1)}}if(b.text(function(t){return t}),l&&("left"===n.orient()||"right"===n.orient())&&(y.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(o(t)<o.range()[1]+10||o(t)>o.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),o.domain()[0]==o.domain()[1]&&0==o.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),l&&("top"===n.orient()||"bottom"===n.orient())){var _=[];a.selectAll("g.nv-axisMaxMin").each(function(t,e){try{e?_.push(o(t)-this.getBBox().width-4):_.push(o(t)+this.getBBox().width+4)}catch(n){e?_.push(o(t)-4):_.push(o(t)+4)}}),y.selectAll("g").each(function(t,e){(o(t)<_[0]||o(t)>_[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}c&&y.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t.__data__)/1e6)&&void 0!==t.__data__}).classed("zero",!0),v=o.copy()}),t}var n=d3.svg.axis(),r={top:0,right:0,bottom:0,left:0},i=75,a=60,o=d3.scale.linear(),s=null,l=!0,c=!0,u=0,h=!0,d=!1,f=!1,p=null,g=12;n.scale(o).orient("bottom").tickFormat(function(t){return t});var v;return t.axis=n,d3.rebind(t,n,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(t,o,"domain","range","rangeBand","rangeBands"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(r.top=void 0!==e.top?e.top:r.top,r.right=void 0!==e.right?e.right:r.right,r.bottom=void 0!==e.bottom?e.bottom:r.bottom,r.left=void 0!==e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(i=e,t):i},t.ticks=function(e){return arguments.length?(p=e,t):p},t.height=function(e){return arguments.length?(a=e,t):a},t.axisLabel=function(e){return arguments.length?(s=e,t):s},t.showMaxMin=function(e){return arguments.length?(l=e,t):l},t.highlightZero=function(e){return arguments.length?(c=e,t):c},t.scale=function(e){return arguments.length?(o=e,n.scale(o),f="function"==typeof o.rangeBands,d3.rebind(t,o,"domain","range","rangeBand","rangeBands"),t):o},t.rotateYLabel=function(e){return arguments.length?(h=e,t):h},t.rotateLabels=function(e){return arguments.length?(u=e,t):u},t.staggerLabels=function(e){return arguments.length?(d=e,t):d},t.axisLabelDistance=function(e){return arguments.length?(g=e,t):g},t},e.models.bullet=function(){"use strict";function t(e){return e.each(function(t,e){var r=d-n.left-n.right,p=f-n.top-n.bottom,m=d3.select(this),y=a.call(this,t,e).slice().sort(d3.descending),x=o.call(this,t,e).slice().sort(d3.descending),b=s.call(this,t,e).slice().sort(d3.descending),w=l.call(this,t,e).slice(),k=c.call(this,t,e).slice(),M=u.call(this,t,e).slice(),S=d3.scale.linear().domain(d3.extent(d3.merge([h,y]))).range(i?[r,0]:[0,r]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(S.range());this.__chart__=S;var C=d3.min(y),A=d3.max(y),_=y[1],E=m.selectAll("g.nv-wrap.nv-bullet").data([t]),D=E.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),T=D.append("g"),N=E.select("g");T.append("rect").attr("class","nv-range nv-rangeMax"),T.append("rect").attr("class","nv-range nv-rangeAvg"),T.append("rect").attr("class","nv-range nv-rangeMin"),T.append("rect").attr("class","nv-measure"),T.append("path").attr("class","nv-markerTriangle"),E.attr("transform","translate("+n.left+","+n.top+")");var F=function(t){return Math.abs(S(t)-S(0))},z=function(t){return S(t<0?t:0)};N.select("rect.nv-rangeMax").attr("height",p).attr("width",F(A>0?A:C)).attr("x",z(A>0?A:C)).datum(A>0?A:C),N.select("rect.nv-rangeAvg").attr("height",p).attr("width",F(_)).attr("x",z(_)).datum(_),N.select("rect.nv-rangeMin").attr("height",p).attr("width",F(A)).attr("x",z(A)).attr("width",F(A>0?C:A)).attr("x",z(A>0?C:A)).datum(A>0?C:A),N.select("rect.nv-measure").style("fill",g).attr("height",p/3).attr("y",p/3).attr("width",b<0?S(0)-S(b[0]):S(b[0])-S(0)).attr("x",z(b)).on("mouseover",function(){v.elementMouseover({value:b[0],label:M[0]||"Current",pos:[S(b[0]),p/2]})}).on("mouseout",function(){v.elementMouseout({value:b[0],label:M[0]||"Current"})});var I=p/6;x[0]?N.selectAll("path.nv-markerTriangle").attr("transform",function(t){return"translate("+S(x[0])+","+p/2+")"}).attr("d","M0,"+I+"L"+I+","+-I+" "+-I+","+-I+"Z").on("mouseover",function(){v.elementMouseover({value:x[0],label:k[0]||"Previous",pos:[S(x[0]),p/2]})}).on("mouseout",function(){v.elementMouseout({value:x[0],label:k[0]||"Previous"})}):N.selectAll("path.nv-markerTriangle").remove(),E.selectAll(".nv-range").on("mouseover",function(t,e){var n=w[e]||(e?1==e?"Mean":"Minimum":"Maximum");v.elementMouseover({value:t,label:n,pos:[S(t),p/2]})}).on("mouseout",function(t,e){var n=w[e]||(e?1==e?"Mean":"Minimum":"Maximum");v.elementMouseout({value:t,label:n})})}),t}var n={top:0,right:0,bottom:0,left:0},r="left",i=!1,a=function(t){return t.ranges},o=function(t){return t.markers},s=function(t){return t.measures},l=function(t){return t.rangeLabels?t.rangeLabels:[]},c=function(t){return t.markerLabels?t.markerLabels:[]},u=function(t){return t.measureLabels?t.measureLabels:[]},h=[0],d=380,f=30,p=null,g=e.utils.getColor(["#1f77b4"]),v=d3.dispatch("elementMouseover","elementMouseout");return t.dispatch=v,t.options=e.utils.optionsFunc.bind(t),t.orient=function(e){return arguments.length?(r=e,i="right"==r||"bottom"==r,t):r},t.ranges=function(e){return arguments.length?(a=e,t):a},t.markers=function(e){return arguments.length?(o=e,t):o},t.measures=function(e){return arguments.length?(s=e,t):s},t.forceX=function(e){return arguments.length?(h=e,t):h},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(f=e,t):f},t.margin=function(e){return arguments.length?(n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left,t):n},t.tickFormat=function(e){return arguments.length?(p=e,t):p},t.color=function(n){return arguments.length?(g=e.utils.getColor(n),t):g},t},e.models.bulletChart=function(){"use strict";function t(e){return e.each(function(r,f){var m=d3.select(this),y=(c||parseInt(m.style("width"))||960)-a.left-a.right,x=u-a.top-a.bottom,b=this;if(t.update=function(){t(e)},t.container=this,!r||!o.call(this,r,f)){var w=m.selectAll(".nv-noData").data([p]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",a.left+y/2).attr("y",18+a.top+x/2).text(function(t){return t}),t}m.selectAll(".nv-noData").remove();var k=o.call(this,r,f).slice().sort(d3.descending),M=s.call(this,r,f).slice().sort(d3.descending),S=l.call(this,r,f).slice().sort(d3.descending),C=m.selectAll("g.nv-wrap.nv-bulletChart").data([r]),A=C.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),_=A.append("g"),E=C.select("g");_.append("g").attr("class","nv-bulletWrap"),
_.append("g").attr("class","nv-titles"),C.attr("transform","translate("+a.left+","+a.top+")");var D=d3.scale.linear().domain([0,Math.max(k[0],M[0],S[0])]).range(i?[y,0]:[0,y]),T=this.__chart__||d3.scale.linear().domain([0,1/0]).range(D.range());this.__chart__=D;var N=_.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(u-a.top-a.bottom)/2+")");N.append("text").attr("class","nv-title").text(function(t){return t.title}),N.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),n.width(y).height(x);var F=E.select(".nv-bulletWrap");d3.transition(F).call(n);var z=h||D.tickFormat(y/100),I=E.selectAll("g.nv-tick").data(D.ticks(y/50),function(t){return this.textContent||z(t)}),R=I.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+T(t)+",0)"}).style("opacity",1e-6);R.append("line").attr("y1",x).attr("y2",7*x/6),R.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*x/6).text(z);var L=d3.transition(I).attr("transform",function(t){return"translate("+D(t)+",0)"}).style("opacity",1);L.select("line").attr("y1",x).attr("y2",7*x/6),L.select("text").attr("y",7*x/6),d3.transition(I.exit()).attr("transform",function(t){return"translate("+D(t)+",0)"}).style("opacity",1e-6).remove(),g.on("tooltipShow",function(t){t.key=r.title,d&&v(t,b.parentNode)})}),d3.timer.flush(),t}var n=e.models.bullet(),r="left",i=!1,a={top:5,right:40,bottom:20,left:120},o=function(t){return t.ranges},s=function(t){return t.markers},l=function(t){return t.measures},c=null,u=55,h=null,d=!0,f=function(t,e,n,r,i){return"<h3>"+e+"</h3><p>"+n+"</p>"},p="No Data Available.",g=d3.dispatch("tooltipShow","tooltipHide"),v=function(n,r){var i=n.pos[0]+(r.offsetLeft||0)+a.left,o=n.pos[1]+(r.offsetTop||0)+a.top,s=f(n.key,n.label,n.value,n,t);e.tooltip.show([i,o],s,n.value<0?"e":"w",null,r)};return n.dispatch.on("elementMouseover.tooltip",function(t){g.tooltipShow(t)}),n.dispatch.on("elementMouseout.tooltip",function(t){g.tooltipHide(t)}),g.on("tooltipHide",function(){d&&e.tooltip.cleanup()}),t.dispatch=g,t.bullet=n,d3.rebind(t,n,"color"),t.options=e.utils.optionsFunc.bind(t),t.orient=function(e){return arguments.length?(r=e,i="right"==r||"bottom"==r,t):r},t.ranges=function(e){return arguments.length?(o=e,t):o},t.markers=function(e){return arguments.length?(s=e,t):s},t.measures=function(e){return arguments.length?(l=e,t):l},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(u=e,t):u},t.margin=function(e){return arguments.length?(a.top=void 0!==e.top?e.top:a.top,a.right=void 0!==e.right?e.right:a.right,a.bottom=void 0!==e.bottom?e.bottom:a.bottom,a.left=void 0!==e.left?e.left:a.left,t):a},t.tickFormat=function(e){return arguments.length?(h=e,t):h},t.tooltips=function(e){return arguments.length?(d=e,t):d},t.tooltipContent=function(e){return arguments.length?(f=e,t):f},t.noData=function(e){return arguments.length?(p=e,t):p},t},e.models.cumulativeLineChart=function(){"use strict";function t(M){return M.each(function(M){function N(e,n){d3.select(t.container).style("cursor","ew-resize")}function R(t,e){z.x=d3.event.x,z.i=Math.round(F.invert(z.x)),H()}function L(e,n){d3.select(t.container).style("cursor","auto"),C.index=z.i,D.stateChange(C)}function H(){rt.data([z]);var e=t.transitionDuration();t.transitionDuration(0),t.update(),t.transitionDuration(e)}var P=d3.select(this).classed("nv-chart-"+S,!0),W=this,B=(f||parseInt(P.style("width"))||960)-h.left-h.right,Y=(p||parseInt(P.style("height"))||400)-h.top-h.bottom;if(t.update=function(){P.transition().duration(T).call(t)},t.container=this,C.disabled=M.map(function(t){return!!t.disabled}),!A){var G;A={};for(G in C)C[G]instanceof Array?A[G]=C[G].slice(0):A[G]=C[G]}var V=d3.behavior.drag().on("dragstart",N).on("drag",R).on("dragend",L);if(!M||!M.length||!M.filter(function(t){return t.values.length}).length){var O=P.selectAll(".nv-noData").data([_]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",h.left+B/2).attr("y",h.top+Y/2).text(function(t){return t}),t}if(P.selectAll(".nv-noData").remove(),r=a.xScale(),i=a.yScale(),k)a.yDomain(null);else{var j=M.filter(function(t){return!t.disabled}).map(function(t,e){var n=d3.extent(t.values,a.y());return n[0]<-.95&&(n[0]=-.95),[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),q=[d3.min(j,function(t){return t[0]}),d3.max(j,function(t){return t[1]})];a.yDomain(q)}F.domain([0,M[0].values.length-1]).range([0,B]).clamp(!0);var M=n(z.i,M),X=w?"none":"all",U=P.selectAll("g.nv-wrap.nv-cumulativeLine").data([M]),Z=U.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),K=U.select("g");if(Z.append("g").attr("class","nv-interactive"),Z.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),Z.append("g").attr("class","nv-y nv-axis"),Z.append("g").attr("class","nv-background"),Z.append("g").attr("class","nv-linesWrap").style("pointer-events",X),Z.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),Z.append("g").attr("class","nv-legendWrap"),Z.append("g").attr("class","nv-controlsWrap"),g&&(l.width(B),K.select(".nv-legendWrap").datum(M).call(l),h.top!=l.height()&&(h.top=l.height(),Y=(p||parseInt(P.style("height"))||400)-h.top-h.bottom),K.select(".nv-legendWrap").attr("transform","translate(0,"+-h.top+")")),b){var Q=[{key:"Re-scale y-axis",disabled:!k}];c.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),K.select(".nv-controlsWrap").datum(Q).attr("transform","translate(0,"+-h.top+")").call(c)}U.attr("transform","translate("+h.left+","+h.top+")"),y&&K.select(".nv-y.nv-axis").attr("transform","translate("+B+",0)");var J=M.filter(function(t){return t.tempDisabled});U.select(".tempDisabled").remove(),J.length&&U.append("text").attr("class","tempDisabled").attr("x",B/2).attr("y","-.71em").style("text-anchor","end").text(J.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),w&&(u.width(B).height(Y).margin({left:h.left,top:h.top}).svgContainer(P).xScale(r),U.select(".nv-interactive").call(u)),Z.select(".nv-background").append("rect"),K.select(".nv-background rect").attr("width",B).attr("height",Y),a.y(function(t){return t.display.y}).width(B).height(Y).color(M.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!M[e].disabled&&!M[e].tempDisabled}));var $=K.select(".nv-linesWrap").datum(M.filter(function(t){return!t.disabled&&!t.tempDisabled}));$.call(a),M.forEach(function(t,e){t.seriesIndex=e});var tt=M.filter(function(t){return!t.disabled&&!!E(t)}),et=K.select(".nv-avgLinesWrap").selectAll("line").data(tt,function(t){return t.key}),nt=function(t){var e=i(E(t));return e<0?0:e>Y?Y:e};et.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t,e){return a.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",B).attr("y1",nt).attr("y2",nt),et.style("stroke-opacity",function(t){var e=i(E(t));return e<0||e>Y?0:1}).attr("x1",0).attr("x2",B).attr("y1",nt).attr("y2",nt),et.exit().remove();var rt=$.selectAll(".nv-indexLine").data([z]);rt.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(V),rt.attr("transform",function(t){return"translate("+F(t.i)+",0)"}).attr("height",Y),v&&(o.scale(r).ticks(Math.min(M[0].values.length,B/70)).tickSize(-Y,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(K.select(".nv-x.nv-axis")).call(o)),m&&(s.scale(i).ticks(Y/36).tickSize(-B,0),d3.transition(K.select(".nv-y.nv-axis")).call(s)),K.select(".nv-background rect").on("click",function(){z.x=d3.mouse(this)[0],z.i=Math.round(F.invert(z.x)),C.index=z.i,D.stateChange(C),H()}),a.dispatch.on("elementClick",function(t){z.i=t.pointIndex,z.x=F(z.i),C.index=z.i,D.stateChange(C),H()}),c.dispatch.on("legendClick",function(e,n){e.disabled=!e.disabled,k=!e.disabled,C.rescaleY=k,D.stateChange(C),t.update()}),l.dispatch.on("stateChange",function(e){C.disabled=e.disabled,D.stateChange(C),t.update()}),u.dispatch.on("elementMousemove",function(n){a.clearHighlights();var r,i,l,c=[];if(M.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(o,s){i=e.interactiveBisect(o.values,n.pointXValue,t.x()),a.highlightPoint(s,i,!0);var u=o.values[i];void 0!==u&&(void 0===r&&(r=u),void 0===l&&(l=t.xScale()(t.x()(u,i))),c.push({key:o.key,value:t.y()(u,i),color:d(o,o.seriesIndex)}))}),c.length>2){var f=t.yScale().invert(n.mouseY),p=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=.03*p,v=e.nearestValueIndex(c.map(function(t){return t.value}),f,g);null!==v&&(c[v].highlight=!0)}var m=o.tickFormat()(t.x()(r,i),i);u.tooltip.position({left:l+h.left,top:n.mouseY+h.top}).chartContainer(W.parentNode).enabled(x).valueFormatter(function(t,e){return s.tickFormat()(t)}).data({value:m,series:c})(),u.renderGuideLine(l)}),u.dispatch.on("elementMouseout",function(t){D.tooltipHide(),a.clearHighlights()}),D.on("tooltipShow",function(t){x&&I(t,W.parentNode)}),D.on("changeState",function(e){void 0!==e.disabled&&(M.forEach(function(t,n){t.disabled=e.disabled[n]}),C.disabled=e.disabled),void 0!==e.index&&(z.i=e.index,z.x=F(z.i),C.index=e.index,rt.data([z])),void 0!==e.rescaleY&&(k=e.rescaleY),t.update()})}),t}function n(t,e){return e.map(function(e,n){if(!e.values)return e;var r=a.y()(e.values[t],t);return r<-.95&&!N?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(a.y()(t,e)-r)/(1+r)},t}),e)})}var r,i,a=e.models.line(),o=e.models.axis(),s=e.models.axis(),l=e.models.legend(),c=e.models.legend(),u=e.interactiveGuideline(),h={top:30,right:30,bottom:50,left:60},d=e.utils.defaultColor(),f=null,p=null,g=!0,v=!0,m=!0,y=!1,x=!0,b=!0,w=!1,k=!0,M=function(t,e,n,r,i){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},S=a.id(),C={index:0,rescaleY:k},A=null,_="No Data Available.",E=function(t){return t.average},D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),T=250,N=!1;o.orient("bottom").tickPadding(7),s.orient(y?"right":"left"),c.updateState(!1);var F=d3.scale.linear(),z={i:0,x:0},I=function(n,r){var i=n.pos[0]+(r.offsetLeft||0),l=n.pos[1]+(r.offsetTop||0),c=o.tickFormat()(a.x()(n.point,n.pointIndex)),u=s.tickFormat()(a.y()(n.point,n.pointIndex)),h=M(n.series.key,c,u,n,t);e.tooltip.show([i,l],h,null,null,r)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+h.left,t.pos[1]+h.top],D.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),D.on("tooltipHide",function(){x&&e.tooltip.cleanup()}),t.dispatch=D,t.lines=a,t.legend=l,t.xAxis=o,t.yAxis=s,t.interactiveLayer=u,d3.rebind(t,a,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(h.top=void 0!==e.top?e.top:h.top,h.right=void 0!==e.right?e.right:h.right,h.bottom=void 0!==e.bottom?e.bottom:h.bottom,h.left=void 0!==e.left?e.left:h.left,t):h},t.width=function(e){return arguments.length?(f=e,t):f},t.height=function(e){return arguments.length?(p=e,t):p},t.color=function(n){return arguments.length?(d=e.utils.getColor(n),l.color(d),t):d},t.rescaleY=function(e){return arguments.length?(k=e,t):k},t.showControls=function(e){return arguments.length?(b=e,t):b},t.useInteractiveGuideline=function(e){return arguments.length?(w=e,!0===e&&(t.interactive(!1),t.useVoronoi(!1)),t):w},t.showLegend=function(e){return arguments.length?(g=e,t):g},t.showXAxis=function(e){return arguments.length?(v=e,t):v},t.showYAxis=function(e){return arguments.length?(m=e,t):m},t.rightAlignYAxis=function(e){return arguments.length?(y=e,s.orient(e?"right":"left"),t):y},t.tooltips=function(e){return arguments.length?(x=e,t):x},t.tooltipContent=function(e){return arguments.length?(M=e,t):M},t.state=function(e){return arguments.length?(C=e,t):C},t.defaultState=function(e){return arguments.length?(A=e,t):A},t.noData=function(e){return arguments.length?(_=e,t):_},t.average=function(e){return arguments.length?(E=e,t):E},t.transitionDuration=function(e){return arguments.length?(T=e,t):T},t.noErrorCheck=function(e){return arguments.length?(N=e,t):N},t},e.models.discreteBar=function(){"use strict";function t(e){return e.each(function(t){var e=c-l.left-l.right,h=u-l.top-l.bottom,k=d3.select(this);t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var M=n&&r?[]:t.map(function(t){return t.values.map(function(t,e){return{x:p(t,e),y:g(t,e),y0:t.y0}})});d.domain(n||d3.merge(M).map(function(t){return t.x})).rangeBands(i||[0,e],.1),f.domain(r||d3.extent(d3.merge(M).map(function(t){return t.y}).concat(v))),y?f.range(a||[h-(f.domain()[0]<0?12:0),f.domain()[1]>0?12:0]):f.range(a||[h,0]),o=o||d,s=s||f.copy().range([f(0),f(0)]);var S=k.selectAll("g.nv-wrap.nv-discretebar").data([t]),C=S.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),A=C.append("g");S.select("g");A.append("g").attr("class","nv-groups"),S.attr("transform","translate("+l.left+","+l.top+")");var _=S.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});_.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),_.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),_.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),_.transition().style("stroke-opacity",1).style("fill-opacity",.75);var E=_.selectAll("g.nv-bar").data(function(t){return t.values});E.exit().remove();var D=E.enter().append("g").attr("transform",function(t,e,n){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", "+f(0)+")"}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),b.elementMouseover({value:g(e,n),point:e,series:t[e.series],pos:[d(p(e,n))+d.rangeBand()*(e.series+.5)/t.length,f(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),b.elementMouseout({value:g(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){b.elementClick({value:g(e,n),point:e,series:t[e.series],pos:[d(p(e,n))+d.rangeBand()*(e.series+.5)/t.length,f(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){b.elementDblClick({value:g(e,n),point:e,series:t[e.series],pos:[d(p(e,n))+d.rangeBand()*(e.series+.5)/t.length,f(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});D.append("rect").attr("height",0).attr("width",.9*d.rangeBand()/t.length),y?(D.append("text").attr("text-anchor","middle"),E.select("text").text(function(t,e){return x(g(t,e))}).transition().attr("x",.9*d.rangeBand()/2).attr("y",function(t,e){return g(t,e)<0?f(g(t,e))-f(0)+12:-4})):E.selectAll("text").remove(),E.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||m(t,e)}).style("stroke",function(t,e){return t.color||m(t,e)}).select("rect").attr("class",w).transition().attr("width",.9*d.rangeBand()/t.length),E.transition().attr("transform",function(t,e){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", "+(g(t,e)<0?f(0):f(0)-f(g(t,e))<1?f(0)-1:f(g(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(f(g(t,e))-f(r&&r[0]||0))||1)}),o=d.copy(),s=f.copy()}),t}var n,r,i,a,o,s,l={top:0,right:0,bottom:0,left:0},c=960,u=500,h=Math.floor(1e4*Math.random()),d=d3.scale.ordinal(),f=d3.scale.linear(),p=function(t){return t.x},g=function(t){return t.y},v=[0],m=e.utils.defaultColor(),y=!1,x=d3.format(",.2f"),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w="discreteBar";return t.dispatch=b,t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(p=e,t):p},t.y=function(e){return arguments.length?(g=e,t):g},t.margin=function(e){return arguments.length?(l.top=void 0!==e.top?e.top:l.top,l.right=void 0!==e.right?e.right:l.right,l.bottom=void 0!==e.bottom?e.bottom:l.bottom,l.left=void 0!==e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(u=e,t):u},t.xScale=function(e){return arguments.length?(d=e,t):d},t.yScale=function(e){return arguments.length?(f=e,t):f},t.xDomain=function(e){return arguments.length?(n=e,t):n},t.yDomain=function(e){return arguments.length?(r=e,t):r},t.xRange=function(e){return arguments.length?(i=e,t):i},t.yRange=function(e){return arguments.length?(a=e,t):a},t.forceY=function(e){return arguments.length?(v=e,t):v},t.color=function(n){return arguments.length?(m=e.utils.getColor(n),t):m},t.id=function(e){return arguments.length?(h=e,t):h},t.showValues=function(e){return arguments.length?(y=e,t):y},t.valueFormat=function(e){return arguments.length?(x=e,t):x},t.rectClass=function(e){return arguments.length?(w=e,t):w},t},e.models.discreteBarChart=function(){"use strict";function t(e){return e.each(function(e){var u=d3.select(this),v=this,w=(l||parseInt(u.style("width"))||960)-s.left-s.right,k=(c||parseInt(u.style("height"))||400)-s.top-s.bottom;if(t.update=function(){y.beforeUpdate(),u.transition().duration(x).call(t)},t.container=this,!e||!e.length||!e.filter(function(t){return t.values.length}).length){var M=u.selectAll(".nv-noData").data([m]);return M.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),M.attr("x",s.left+w/2).attr("y",s.top+k/2).text(function(t){return t}),t}u.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale().clamp(!0);var S=u.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([e]),C=S.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),A=C.append("defs"),_=S.select("g");if(C.append("g").attr("class","nv-x nv-axis"),C.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),C.append("g").attr("class","nv-barsWrap"),_.attr("transform","translate("+s.left+","+s.top+")"),f&&_.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)"),i.width(w).height(k),_.select(".nv-barsWrap").datum(e.filter(function(t){return!t.disabled})).transition().call(i),A.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect"),_.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",n.rangeBand()*(p?2:1)).attr("height",16).attr("x",-n.rangeBand()/(p?1:2)),h){a.scale(n).ticks(w/100).tickSize(-k,0),_.select(".nv-x.nv-axis").attr("transform","translate(0,"+(r.range()[0]+(i.showValues()&&r.domain()[0]<0?16:0))+")"),_.select(".nv-x.nv-axis").transition().call(a);var E=_.select(".nv-x.nv-axis").selectAll("g");p&&E.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}d&&(o.scale(r).ticks(k/36).tickSize(-w,0),_.select(".nv-y.nv-axis").transition().call(o)),_.select(".nv-zeroLine line").attr("x1",0).attr("x2",w).attr("y1",r(0)).attr("y2",r(0)),y.on("tooltipShow",function(t){g&&b(t,v.parentNode)})}),t}var n,r,i=e.models.discreteBar(),a=e.models.axis(),o=e.models.axis(),s={top:15,right:10,bottom:50,left:60},l=null,c=null,u=e.utils.getColor(),h=!0,d=!0,f=!1,p=!1,g=!0,v=function(t,e,n,r,i){return"<h3>"+e+"</h3><p>"+n+"</p>"},m="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),x=250;a.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),o.orient(f?"right":"left").tickFormat(d3.format(",.1f"));var b=function(n,r){var s=n.pos[0]+(r.offsetLeft||0),l=n.pos[1]+(r.offsetTop||0),c=a.tickFormat()(i.x()(n.point,n.pointIndex)),u=o.tickFormat()(i.y()(n.point,n.pointIndex)),h=v(n.series.key,c,u,n,t);e.tooltip.show([s,l],h,n.value<0?"n":"s",null,r)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+s.left,t.pos[1]+s.top],y.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){y.tooltipHide(t)}),y.on("tooltipHide",function(){g&&e.tooltip.cleanup()}),t.dispatch=y,t.discretebar=i,t.xAxis=a,t.yAxis=o,d3.rebind(t,i,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(s.top=void 0!==e.top?e.top:s.top,s.right=void 0!==e.right?e.right:s.right,s.bottom=void 0!==e.bottom?e.bottom:s.bottom,s.left=void 0!==e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(l=e,t):l},t.height=function(e){return arguments.length?(c=e,t):c},t.color=function(n){return arguments.length?(u=e.utils.getColor(n),i.color(u),t):u},t.showXAxis=function(e){return arguments.length?(h=e,t):h},t.showYAxis=function(e){return arguments.length?(d=e,t):d},t.rightAlignYAxis=function(e){return arguments.length?(f=e,o.orient(e?"right":"left"),t):f},t.staggerLabels=function(e){return arguments.length?(p=e,t):p},t.tooltips=function(e){return arguments.length?(g=e,t):g},t.tooltipContent=function(e){return arguments.length?(v=e,t):v},t.noData=function(e){return arguments.length?(m=e,t):m},t.transitionDuration=function(e){return arguments.length?(x=e,t):x},t},e.models.distribution=function(){"use strict";function t(e){return e.each(function(t){var e=("x"===o?(r.left,r.right):(r.top,r.bottom),"x"==o?"y":"x"),i=d3.select(this);n=n||c;var u=i.selectAll("g.nv-distribution").data([t]),h=u.enter().append("g").attr("class","nvd3 nv-distribution"),d=(h.append("g"),u.select("g"));u.attr("transform","translate("+r.left+","+r.top+")");var f=d.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});f.enter().append("g"),f.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return l(t,e)});var p=f.selectAll("line.nv-dist"+o).data(function(t){return t.values});p.enter().append("line").attr(o+"1",function(t,e){return n(s(t,e))}).attr(o+"2",function(t,e){return n(s(t,e))}),f.exit().selectAll("line.nv-dist"+o).transition().attr(o+"1",function(t,e){return c(s(t,e))}).attr(o+"2",function(t,e){return c(s(t,e))}).style("stroke-opacity",0).remove(),p.attr("class",function(t,e){return"nv-dist"+o+" nv-dist"+o+"-"+e}).attr(e+"1",0).attr(e+"2",a),p.transition().attr(o+"1",function(t,e){return c(s(t,e))}).attr(o+"2",function(t,e){return c(s(t,e))}),n=c.copy()}),t}var n,r={top:0,right:0,bottom:0,left:0},i=400,a=8,o="x",s=function(t){return t[o]},l=e.utils.defaultColor(),c=d3.scale.linear();return t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(r.top=void 0!==e.top?e.top:r.top,r.right=void 0!==e.right?e.right:r.right,r.bottom=void 0!==e.bottom?e.bottom:r.bottom,r.left=void 0!==e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(i=e,t):i},t.axis=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(a=e,t):a},t.getData=function(e){return arguments.length?(s=d3.functor(e),t):s},t.scale=function(e){return arguments.length?(c=e,t):c},t.color=function(n){return arguments.length?(l=e.utils.getColor(n),t):l},t},e.models.historicalBar=function(){"use strict";function t(w){return w.each(function(t){var w=s-o.left-o.right,k=l-o.top-o.bottom,M=d3.select(this);u.domain(n||d3.extent(t[0].values.map(d).concat(p))),v?u.range(i||[.5*w/t[0].values.length,w*(t[0].values.length-.5)/t[0].values.length]):u.range(i||[0,w]),h.domain(r||d3.extent(t[0].values.map(f).concat(g))).range(a||[k,0]),u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]-.01*u.domain()[0],u.domain()[1]+.01*u.domain()[1]]):u.domain([-1,1])),h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));var S=M.selectAll("g.nv-wrap.nv-historicalBar-"+c).data([t[0].values]),C=S.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+c),A=C.append("defs"),_=C.append("g"),E=S.select("g");_.append("g").attr("class","nv-bars"),S.attr("transform","translate("+o.left+","+o.top+")"),M.on("click",function(t,e){x.chartClick({data:t,index:e,pos:d3.event,id:c})}),A.append("clipPath").attr("id","nv-chart-clip-path-"+c).append("rect"),S.select("#nv-chart-clip-path-"+c+" rect").attr("width",w).attr("height",k),E.attr("clip-path",m?"url(#nv-chart-clip-path-"+c+")":"");var D=S.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return d(t,e)});D.exit().remove();D.enter().append("rect").attr("x",0).attr("y",function(t,n){return e.utils.NaNtoZero(h(Math.max(0,f(t,n))))}).attr("height",function(t,n){return e.utils.NaNtoZero(Math.abs(h(f(t,n))-h(0)))}).attr("transform",function(e,n){return"translate("+(u(d(e,n))-w/t[0].values.length*.45)+",0)"}).on("mouseover",function(e,n){b&&(d3.select(this).classed("hover",!0),x.elementMouseover({point:e,series:t[0],pos:[u(d(e,n)),h(f(e,n))],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("mouseout",function(e,n){b&&(d3.select(this).classed("hover",!1),x.elementMouseout({point:e,series:t[0],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("click",function(t,e){b&&(x.elementClick({value:f(t,e),data:t,index:e,pos:[u(d(t,e)),h(f(t,e))],e:d3.event,id:c}),d3.event.stopPropagation())}).on("dblclick",function(t,e){b&&(x.elementDblClick({value:f(t,e),data:t,index:e,pos:[u(d(t,e)),h(f(t,e))],e:d3.event,id:c}),d3.event.stopPropagation())});D.attr("fill",function(t,e){return y(t,e)}).attr("class",function(t,e,n){return(f(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).transition().attr("transform",function(e,n){return"translate("+(u(d(e,n))-w/t[0].values.length*.45)+",0)"}).attr("width",w/t[0].values.length*.9),D.transition().attr("y",function(t,n){var r=f(t,n)<0?h(0):h(0)-h(f(t,n))<1?h(0)-1:h(f(t,n));return e.utils.NaNtoZero(r)}).attr("height",function(t,n){return e.utils.NaNtoZero(Math.max(Math.abs(h(f(t,n))-h(0)),1))})}),t}var n,r,i,a,o={top:0,right:0,bottom:0,left:0},s=960,l=500,c=Math.floor(1e4*Math.random()),u=d3.scale.linear(),h=d3.scale.linear(),d=function(t){return t.x},f=function(t){return t.y},p=[],g=[0],v=!1,m=!0,y=e.utils.defaultColor(),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),b=!0;return t.highlightPoint=function(t,e){d3.select(".nv-historicalBar-"+c).select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},t.clearHighlights=function(){d3.select(".nv-historicalBar-"+c).select(".nv-bars .nv-bar.hover").classed("hover",!1)},t.dispatch=x,t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(d=e,t):d},t.y=function(e){return arguments.length?(f=e,t):f},t.margin=function(e){return arguments.length?(o.top=void 0!==e.top?e.top:o.top,o.right=void 0!==e.right?e.right:o.right,o.bottom=void 0!==e.bottom?e.bottom:o.bottom,o.left=void 0!==e.left?e.left:o.left,t):o},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(u=e,t):u},t.yScale=function(e){return arguments.length?(h=e,t):h},t.xDomain=function(e){return arguments.length?(n=e,t):n},t.yDomain=function(e){return arguments.length?(r=e,t):r},t.xRange=function(e){return arguments.length?(i=e,t):i},t.yRange=function(e){return arguments.length?(a=e,t):a},t.forceX=function(e){return arguments.length?(p=e,t):p},t.forceY=function(e){return arguments.length?(g=e,t):g},t.padData=function(e){return arguments.length?(v=e,t):v},t.clipEdge=function(e){return arguments.length?(m=e,t):m},t.color=function(n){return arguments.length?(y=e.utils.getColor(n),t):y},t.id=function(e){return arguments.length?(c=e,t):c},t.interactive=function(e){return arguments.length?(b=!1,t):b},t},e.models.historicalBarChart=function(){"use strict";function t(e){return e.each(function(m){var S=d3.select(this),C=this,A=(u||parseInt(S.style("width"))||960)-l.left-l.right,_=(h||parseInt(S.style("height"))||400)-l.top-l.bottom;if(t.update=function(){S.transition().duration(k).call(t)},t.container=this,y.disabled=m.map(function(t){return!!t.disabled}),!x){var E;x={};for(E in y)y[E]instanceof Array?x[E]=y[E].slice(0):x[E]=y[E]}if(!m||!m.length||!m.filter(function(t){return t.values.length}).length){var D=S.selectAll(".nv-noData").data([b]);return D.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),D.attr("x",l.left+A/2).attr("y",l.top+_/2).text(function(t){return t}),t}S.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var T=S.selectAll("g.nv-wrap.nv-historicalBarChart").data([m]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),F=T.select("g");N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-barsWrap"),N.append("g").attr("class","nv-legendWrap"),d&&(s.width(A),F.select(".nv-legendWrap").datum(m).call(s),l.top!=s.height()&&(l.top=s.height(),_=(h||parseInt(S.style("height"))||400)-l.top-l.bottom),T.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")),T.attr("transform","translate("+l.left+","+l.top+")"),g&&F.select(".nv-y.nv-axis").attr("transform","translate("+A+",0)"),i.width(A).height(_).color(m.map(function(t,e){return t.color||c(t,e)}).filter(function(t,e){return!m[e].disabled})),F.select(".nv-barsWrap").datum(m.filter(function(t){return!t.disabled})).transition().call(i),f&&(a.scale(n).tickSize(-_,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),F.select(".nv-x.nv-axis").transition().call(a)),p&&(o.scale(r).ticks(_/36).tickSize(-A,0),F.select(".nv-y.nv-axis").transition().call(o)),s.dispatch.on("legendClick",function(n,r){n.disabled=!n.disabled,m.filter(function(t){return!t.disabled}).length||m.map(function(t){return t.disabled=!1,T.selectAll(".nv-series").classed("disabled",!1),t}),y.disabled=m.map(function(t){return!!t.disabled}),w.stateChange(y),e.transition().call(t)}),s.dispatch.on("legendDblclick",function(e){m.forEach(function(t){t.disabled=!0}),e.disabled=!1,y.disabled=m.map(function(t){return!!t.disabled}),w.stateChange(y),t.update()}),w.on("tooltipShow",function(t){v&&M(t,C.parentNode)}),w.on("changeState",function(e){void 0!==e.disabled&&(m.forEach(function(t,n){t.disabled=e.disabled[n]}),y.disabled=e.disabled),t.update()})}),t}var n,r,i=e.models.historicalBar(),a=e.models.axis(),o=e.models.axis(),s=e.models.legend(),l={top:30,right:90,bottom:50,left:90},c=e.utils.defaultColor(),u=null,h=null,d=!1,f=!0,p=!0,g=!1,v=!0,m=function(t,e,n,r,i){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},y={},x=null,b="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),k=250;a.orient("bottom").tickPadding(7),o.orient(g?"right":"left");var M=function(n,r){if(r){var s=d3.select(r).select("svg"),l=s.node()?s.attr("viewBox"):null;if(l){l=l.split(" ");var c=parseInt(s.style("width"))/l[2];n.pos[0]=n.pos[0]*c,n.pos[1]=n.pos[1]*c}}var u=n.pos[0]+(r.offsetLeft||0),h=n.pos[1]+(r.offsetTop||0),d=a.tickFormat()(i.x()(n.point,n.pointIndex)),f=o.tickFormat()(i.y()(n.point,n.pointIndex)),p=m(n.series.key,d,f,n,t);e.tooltip.show([u,h],p,null,null,r)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+l.left,t.pos[1]+l.top],w.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){w.tooltipHide(t)}),w.on("tooltipHide",function(){v&&e.tooltip.cleanup()}),t.dispatch=w,t.bars=i,t.legend=s,t.xAxis=a,t.yAxis=o,d3.rebind(t,i,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(l.top=void 0!==e.top?e.top:l.top,l.right=void 0!==e.right?e.right:l.right,
l.bottom=void 0!==e.bottom?e.bottom:l.bottom,l.left=void 0!==e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(n){return arguments.length?(c=e.utils.getColor(n),s.color(c),t):c},t.showLegend=function(e){return arguments.length?(d=e,t):d},t.showXAxis=function(e){return arguments.length?(f=e,t):f},t.showYAxis=function(e){return arguments.length?(p=e,t):p},t.rightAlignYAxis=function(e){return arguments.length?(g=e,o.orient(e?"right":"left"),t):g},t.tooltips=function(e){return arguments.length?(v=e,t):v},t.tooltipContent=function(e){return arguments.length?(m=e,t):m},t.state=function(e){return arguments.length?(y=e,t):y},t.defaultState=function(e){return arguments.length?(x=e,t):x},t.noData=function(e){return arguments.length?(b=e,t):b},t.transitionDuration=function(e){return arguments.length?(k=e,t):k},t},e.models.indentedTree=function(){"use strict";function t(e){return e.each(function(e){function n(e,r,i){return d3.event.stopPropagation(),d3.event.shiftKey&&!i?(d3.event.shiftKey=!1,e.values&&e.values.forEach(function(t){(t.values||t._values)&&n(t,0,!0)}),!0):!o(e)||(e.values?(e._values=e.values,e.values=null):(e.values=e._values,e._values=null),void t.update())}function r(t){return t._values&&t._values.length?f:t.values&&t.values.length?p:""}function a(t){return t._values&&t._values.length}function o(t){var e=t.values||t._values;return e&&e.length}var y=1,x=d3.select(this),b=d3.layout.tree().children(function(t){return t.values}).size([i,u]);t.update=function(){x.transition().duration(600).call(t)},e[0]||(e[0]={key:c});var w=b.nodes(e[0]),k=d3.select(this).selectAll("div").data([[w]]),M=k.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),S=M.append("table"),C=k.select("table").attr("width","100%").attr("class",d);if(s){var A=S.append("thead"),_=A.append("tr");h.forEach(function(t){_.append("th").attr("width",t.width?t.width:"10%").style("text-align","numeric"==t.type?"right":"left").append("span").text(t.label)})}var E=C.selectAll("tbody").data(function(t){return t});E.enter().append("tbody"),y=d3.max(w,function(t){return t.depth}),b.size([i,y*u]);var D=E.selectAll("tr").data(function(t){return t.filter(function(t){return!(l&&!t.children)||l(t)})},function(t,e){return t.id||t.id||++m});D.exit().remove(),D.select("img.nv-treeicon").attr("src",r).classed("folded",a);var T=D.enter().append("tr");h.forEach(function(t,e){var i=T.append("td").style("padding-left",function(t){return(e?0:t.depth*u+12+(r(t)?0:16))+"px"},"important").style("text-align","numeric"==t.type?"right":"left");0==e&&i.append("img").classed("nv-treeicon",!0).classed("nv-folded",a).attr("src",r).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(t){return r(t)?"inline-block":"none"}).on("click",n),i.each(function(n){!e&&v(n)?d3.select(this).append("a").attr("href",v).attr("class",d3.functor(t.classes)).append("span"):d3.select(this).append("span"),d3.select(this).select("span").attr("class",d3.functor(t.classes)).text(function(e){return t.format?t.format(e):e[t.key]||"-"})}),t.showCount&&(i.append("span").attr("class","nv-childrenCount"),D.selectAll("span.nv-childrenCount").text(function(t){return t.values&&t.values.length||t._values&&t._values.length?"("+(t.values&&t.values.filter(function(t){return!l||l(t)}).length||t._values&&t._values.filter(function(t){return!l||l(t)}).length||0)+")":""}))}),D.order().on("click",function(t){g.elementClick({row:this,data:t,pos:[t.x,t.y]})}).on("dblclick",function(t){g.elementDblclick({row:this,data:t,pos:[t.x,t.y]})}).on("mouseover",function(t){g.elementMouseover({row:this,data:t,pos:[t.x,t.y]})}).on("mouseout",function(t){g.elementMouseout({row:this,data:t,pos:[t.x,t.y]})})}),t}var n={top:0,right:0,bottom:0,left:0},r=960,i=500,a=e.utils.defaultColor(),o=Math.floor(1e4*Math.random()),s=!0,l=!1,c="No Data Available.",u=20,h=[{key:"key",label:"Name",type:"text"}],d=null,f="images/grey-plus.png",p="images/grey-minus.png",g=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),v=function(t){return t.url},m=0;return t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left,t):n},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(i=e,t):i},t.color=function(n){return arguments.length?(a=e.utils.getColor(n),scatter.color(a),t):a},t.id=function(e){return arguments.length?(o=e,t):o},t.header=function(e){return arguments.length?(s=e,t):s},t.noData=function(e){return arguments.length?(c=e,t):c},t.filterZero=function(e){return arguments.length?(l=e,t):l},t.columns=function(e){return arguments.length?(h=e,t):h},t.tableClass=function(e){return arguments.length?(d=e,t):d},t.iconOpen=function(e){return arguments.length?(f=e,t):f},t.iconClose=function(e){return arguments.length?(p=e,t):p},t.getUrl=function(e){return arguments.length?(v=e,t):v},t},e.models.legend=function(){"use strict";function t(d){return d.each(function(t){var d=r-n.left-n.right,f=d3.select(this),p=f.selectAll("g.nv-legend").data([t]),g=(p.enter().append("g").attr("class","nvd3 nv-legend").append("g"),p.select("g"));p.attr("transform","translate("+n.left+","+n.top+")");var v=g.selectAll(".nv-series").data(function(t){return t}),m=v.enter().append("g").attr("class","nv-series").on("mouseover",function(t,e){h.legendMouseover(t,e)}).on("mouseout",function(t,e){h.legendMouseout(t,e)}).on("click",function(e,n){h.legendClick(e,n),c&&(u?(t.forEach(function(t){t.disabled=!0}),e.disabled=!1):(e.disabled=!e.disabled,t.every(function(t){return t.disabled})&&t.forEach(function(t){t.disabled=!1})),h.stateChange({disabled:t.map(function(t){return!!t.disabled})}))}).on("dblclick",function(e,n){h.legendDblclick(e,n),c&&(t.forEach(function(t){t.disabled=!0}),e.disabled=!1,h.stateChange({disabled:t.map(function(t){return!!t.disabled})}))});if(m.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),m.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),v.classed("disabled",function(t){return t.disabled}),v.exit().remove(),v.select("circle").style("fill",function(t,e){return t.color||o(t,e)}).style("stroke",function(t,e){return t.color||o(t,e)}),v.select("text").text(a),s){var y=[];v.each(function(t,n){var r,i=d3.select(this).select("text");try{if((r=i.getComputedTextLength())<=0)throw Error()}catch(t){r=e.utils.calcApproxTextWidth(i)}y.push(r+28)});for(var x=0,b=0,w=[];b<d&&x<y.length;)w[x]=y[x],b+=y[x++];for(0===x&&(x=1);b>d&&x>1;){w=[],x--;for(var k=0;k<y.length;k++)y[k]>(w[k%x]||0)&&(w[k%x]=y[k]);b=w.reduce(function(t,e,n,r){return t+e})}for(var M=[],S=0,C=0;S<x;S++)M[S]=C,C+=w[S];v.attr("transform",function(t,e){return"translate("+M[e%x]+","+(5+20*Math.floor(e/x))+")"}),l?g.attr("transform","translate("+(r-n.right-b)+","+n.top+")"):g.attr("transform","translate(0,"+n.top+")"),i=n.top+n.bottom+20*Math.ceil(y.length/x)}else{var A,_=5,E=5,D=0;v.attr("transform",function(t,e){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return A=E,r<n.left+n.right+A+i&&(E=A=5,_+=20),E+=i,E>D&&(D=E),"translate("+A+","+_+")"}),g.attr("transform","translate("+(r-n.right-D)+","+n.top+")"),i=n.top+n.bottom+_+15}}),t}var n={top:5,right:0,bottom:5,left:0},r=400,i=20,a=function(t){return t.key},o=e.utils.defaultColor(),s=!0,l=!0,c=!0,u=!1,h=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return t.dispatch=h,t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left,t):n},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(i=e,t):i},t.key=function(e){return arguments.length?(a=e,t):a},t.color=function(n){return arguments.length?(o=e.utils.getColor(n),t):o},t.align=function(e){return arguments.length?(s=e,t):s},t.rightAlign=function(e){return arguments.length?(l=e,t):l},t.updateState=function(e){return arguments.length?(c=e,t):c},t.radioButtonMode=function(e){return arguments.length?(u=e,t):u},t},e.models.line=function(){"use strict";function t(m){return m.each(function(t){var m=o-a.left-a.right,y=s-a.top-a.bottom,x=d3.select(this);n=i.xScale(),r=i.yScale(),g=g||n,v=v||r;var b=x.selectAll("g.nv-wrap.nv-line").data([t]),w=b.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),k=w.append("defs"),M=w.append("g"),S=b.select("g");M.append("g").attr("class","nv-groups"),M.append("g").attr("class","nv-scatterWrap"),b.attr("transform","translate("+a.left+","+a.top+")"),i.width(m).height(y);var C=b.select(".nv-scatterWrap");C.transition().call(i),k.append("clipPath").attr("id","nv-edge-clip-"+i.id()).append("rect"),b.select("#nv-edge-clip-"+i.id()+" rect").attr("width",m).attr("height",y),S.attr("clip-path",f?"url(#nv-edge-clip-"+i.id()+")":""),C.attr("clip-path",f?"url(#nv-edge-clip-"+i.id()+")":"");var A=b.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});A.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),A.exit().remove(),A.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return l(t,e)}).style("stroke",function(t,e){return l(t,e)}),A.transition().style("stroke-opacity",1).style("fill-opacity",.5);var _=A.selectAll("path.nv-area").data(function(t){return d(t)?[t]:[]});_.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(p).defined(h).x(function(t,n){return e.utils.NaNtoZero(g(c(t,n)))}).y0(function(t,n){return e.utils.NaNtoZero(v(u(t,n)))}).y1(function(t,e){return v(r.domain()[0]<=0?r.domain()[1]>=0?0:r.domain()[1]:r.domain()[0])}).apply(this,[t.values])}),A.exit().selectAll("path.nv-area").remove(),_.transition().attr("d",function(t){return d3.svg.area().interpolate(p).defined(h).x(function(t,r){return e.utils.NaNtoZero(n(c(t,r)))}).y0(function(t,n){return e.utils.NaNtoZero(r(u(t,n)))}).y1(function(t,e){return r(r.domain()[0]<=0?r.domain()[1]>=0?0:r.domain()[1]:r.domain()[0])}).apply(this,[t.values])});var E=A.selectAll("path.nv-line").data(function(t){return[t.values]});E.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(h).x(function(t,n){return e.utils.NaNtoZero(g(c(t,n)))}).y(function(t,n){return e.utils.NaNtoZero(v(u(t,n)))})),E.transition().attr("d",d3.svg.line().interpolate(p).defined(h).x(function(t,r){return e.utils.NaNtoZero(n(c(t,r)))}).y(function(t,n){return e.utils.NaNtoZero(r(u(t,n)))})),g=n.copy(),v=r.copy()}),t}var n,r,i=e.models.scatter(),a={top:0,right:0,bottom:0,left:0},o=960,s=500,l=e.utils.defaultColor(),c=function(t){return t.x},u=function(t){return t.y},h=function(t,e){return!isNaN(u(t,e))&&null!==u(t,e)},d=function(t){return t.area},f=!1,p="linear";i.size(16).sizeDomain([16,256]);var g,v;return t.dispatch=i.dispatch,t.scatter=i,d3.rebind(t,i,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(a.top=void 0!==e.top?e.top:a.top,a.right=void 0!==e.right?e.right:a.right,a.bottom=void 0!==e.bottom?e.bottom:a.bottom,a.left=void 0!==e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(s=e,t):s},t.x=function(e){return arguments.length?(c=e,i.x(e),t):c},t.y=function(e){return arguments.length?(u=e,i.y(e),t):u},t.clipEdge=function(e){return arguments.length?(f=e,t):f},t.color=function(n){return arguments.length?(l=e.utils.getColor(n),i.color(l),t):l},t.interpolate=function(e){return arguments.length?(p=e,t):p},t.defined=function(e){return arguments.length?(h=e,t):h},t.isArea=function(e){return arguments.length?(d=d3.functor(e),t):d},t},e.models.lineChart=function(){"use strict";function t(x){return x.each(function(x){var A=d3.select(this),_=this,E=(h||parseInt(A.style("width"))||960)-c.left-c.right,D=(d||parseInt(A.style("height"))||400)-c.top-c.bottom;if(t.update=function(){A.transition().duration(S).call(t)},t.container=this,b.disabled=x.map(function(t){return!!t.disabled}),!w){var T;w={};for(T in b)b[T]instanceof Array?w[T]=b[T].slice(0):w[T]=b[T]}if(!x||!x.length||!x.filter(function(t){return t.values.length}).length){var N=A.selectAll(".nv-noData").data([k]);return N.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),N.attr("x",c.left+E/2).attr("y",c.top+D/2).text(function(t){return t}),t}A.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var F=A.selectAll("g.nv-wrap.nv-lineChart").data([x]),z=F.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),I=F.select("g");z.append("rect").style("opacity",0),z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-linesWrap"),z.append("g").attr("class","nv-legendWrap"),z.append("g").attr("class","nv-interactive"),I.select("rect").attr("width",E).attr("height",D>0?D:0),f&&(s.width(E),I.select(".nv-legendWrap").datum(x).call(s),c.top!=s.height()&&(c.top=s.height(),D=(d||parseInt(A.style("height"))||400)-c.top-c.bottom),F.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")),F.attr("transform","translate("+c.left+","+c.top+")"),v&&I.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),m&&(l.width(E).height(D).margin({left:c.left,top:c.top}).svgContainer(A).xScale(n),F.select(".nv-interactive").call(l)),i.width(E).height(D).color(x.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!x[e].disabled})),I.select(".nv-linesWrap").datum(x.filter(function(t){return!t.disabled})).transition().call(i),p&&(a.scale(n).ticks(E/100).tickSize(-D,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),I.select(".nv-x.nv-axis").transition().call(a)),g&&(o.scale(r).ticks(D/36).tickSize(-E,0),I.select(".nv-y.nv-axis").transition().call(o)),s.dispatch.on("stateChange",function(e){b=e,M.stateChange(b),t.update()}),l.dispatch.on("elementMousemove",function(n){i.clearHighlights();var r,s,h,d=[];if(x.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a,o){s=e.interactiveBisect(a.values,n.pointXValue,t.x()),i.highlightPoint(o,s,!0);var l=a.values[s];void 0!==l&&(void 0===r&&(r=l),void 0===h&&(h=t.xScale()(t.x()(l,s))),d.push({key:a.key,value:t.y()(l,s),color:u(a,a.seriesIndex)}))}),d.length>2){var f=t.yScale().invert(n.mouseY),p=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=.03*p,v=e.nearestValueIndex(d.map(function(t){return t.value}),f,g);null!==v&&(d[v].highlight=!0)}var m=a.tickFormat()(t.x()(r,s));l.tooltip.position({left:h+c.left,top:n.mouseY+c.top}).chartContainer(_.parentNode).enabled(y).valueFormatter(function(t,e){return o.tickFormat()(t)}).data({value:m,series:d})(),l.renderGuideLine(h)}),l.dispatch.on("elementMouseout",function(t){M.tooltipHide(),i.clearHighlights()}),M.on("tooltipShow",function(t){y&&C(t,_.parentNode)}),M.on("changeState",function(e){void 0!==e.disabled&&x.length===e.disabled.length&&(x.forEach(function(t,n){t.disabled=e.disabled[n]}),b.disabled=e.disabled),t.update()})}),t}var n,r,i=e.models.line(),a=e.models.axis(),o=e.models.axis(),s=e.models.legend(),l=e.interactiveGuideline(),c={top:30,right:20,bottom:50,left:60},u=e.utils.defaultColor(),h=null,d=null,f=!0,p=!0,g=!0,v=!1,m=!1,y=!0,x=function(t,e,n,r,i){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},b={},w=null,k="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),S=250;a.orient("bottom").tickPadding(7),o.orient(v?"right":"left");var C=function(n,r){var s=n.pos[0]+(r.offsetLeft||0),l=n.pos[1]+(r.offsetTop||0),c=a.tickFormat()(i.x()(n.point,n.pointIndex)),u=o.tickFormat()(i.y()(n.point,n.pointIndex)),h=x(n.series.key,c,u,n,t);e.tooltip.show([s,l],h,null,null,r)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],M.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),M.on("tooltipHide",function(){y&&e.tooltip.cleanup()}),t.dispatch=M,t.lines=i,t.legend=s,t.xAxis=a,t.yAxis=o,t.interactiveLayer=l,d3.rebind(t,i,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top=void 0!==e.top?e.top:c.top,c.right=void 0!==e.right?e.right:c.right,c.bottom=void 0!==e.bottom?e.bottom:c.bottom,c.left=void 0!==e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(h=e,t):h},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(n){return arguments.length?(u=e.utils.getColor(n),s.color(u),t):u},t.showLegend=function(e){return arguments.length?(f=e,t):f},t.showXAxis=function(e){return arguments.length?(p=e,t):p},t.showYAxis=function(e){return arguments.length?(g=e,t):g},t.rightAlignYAxis=function(e){return arguments.length?(v=e,o.orient(e?"right":"left"),t):v},t.useInteractiveGuideline=function(e){return arguments.length?(m=e,!0===e&&(t.interactive(!1),t.useVoronoi(!1)),t):m},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(x=e,t):x},t.state=function(e){return arguments.length?(b=e,t):b},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t.transitionDuration=function(e){return arguments.length?(S=e,t):S},t},e.models.linePlusBarChart=function(){"use strict";function t(e){return e.each(function(e){var p=d3.select(this),g=this,x=(d||parseInt(p.style("width"))||960)-h.left-h.right,C=(f||parseInt(p.style("height"))||400)-h.top-h.bottom;if(t.update=function(){p.transition().call(t)},b.disabled=e.map(function(t){return!!t.disabled}),!w){var A;w={};for(A in b)b[A]instanceof Array?w[A]=b[A].slice(0):w[A]=b[A]}if(!e||!e.length||!e.filter(function(t){return t.values.length}).length){var _=p.selectAll(".nv-noData").data([k]);return _.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),_.attr("x",h.left+x/2).attr("y",h.top+C/2).text(function(t){return t}),t}p.selectAll(".nv-noData").remove();var E=e.filter(function(t){return!t.disabled&&t.bar}),D=e.filter(function(t){return!t.bar});n=D.filter(function(t){return!t.disabled}).length&&D.filter(function(t){return!t.disabled})[0].values.length?a.xScale():o.xScale(),r=o.yScale(),i=a.yScale();var T=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([e]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),F=T.select("g");N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y1 nv-axis"),N.append("g").attr("class","nv-y2 nv-axis"),N.append("g").attr("class","nv-barsWrap"),N.append("g").attr("class","nv-linesWrap"),N.append("g").attr("class","nv-legendWrap"),m&&(u.width(x/2),F.select(".nv-legendWrap").datum(e.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?" (left axis)":" (right axis)"),t})).call(u),h.top!=u.height()&&(h.top=u.height(),C=(f||parseInt(p.style("height"))||400)-h.top-h.bottom),F.select(".nv-legendWrap").attr("transform","translate("+x/2+","+-h.top+")")),T.attr("transform","translate("+h.left+","+h.top+")"),a.width(x).height(C).color(e.map(function(t,e){return t.color||v(t,e)}).filter(function(t,n){return!e[n].disabled&&!e[n].bar})),o.width(x).height(C).color(e.map(function(t,e){return t.color||v(t,e)}).filter(function(t,n){return!e[n].disabled&&e[n].bar}));var z=F.select(".nv-barsWrap").datum(E.length?E:[{values:[]}]),I=F.select(".nv-linesWrap").datum(D[0]&&!D[0].disabled?D:[{values:[]}]);d3.transition(z).call(o),d3.transition(I).call(a),s.scale(n).ticks(x/100).tickSize(-C,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),d3.transition(F.select(".nv-x.nv-axis")).call(s),l.scale(r).ticks(C/36).tickSize(-x,0),d3.transition(F.select(".nv-y1.nv-axis")).style("opacity",E.length?1:0).call(l),c.scale(i).ticks(C/36).tickSize(E.length?0:-x,0),F.select(".nv-y2.nv-axis").style("opacity",D.length?1:0).attr("transform","translate("+x+",0)"),d3.transition(F.select(".nv-y2.nv-axis")).call(c),u.dispatch.on("stateChange",function(e){b=e,M.stateChange(b),t.update()}),M.on("tooltipShow",function(t){y&&S(t,g.parentNode)}),M.on("changeState",function(n){void 0!==n.disabled&&(e.forEach(function(t,e){t.disabled=n.disabled[e]}),b.disabled=n.disabled),t.update()})}),t}var n,r,i,a=e.models.line(),o=e.models.historicalBar(),s=e.models.axis(),l=e.models.axis(),c=e.models.axis(),u=e.models.legend(),h={top:30,right:60,bottom:50,left:60},d=null,f=null,p=function(t){return t.x},g=function(t){return t.y},v=e.utils.defaultColor(),m=!0,y=!0,x=function(t,e,n,r,i){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},b={},w=null,k="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");o.padData(!0),a.clipEdge(!1).padData(!0),s.orient("bottom").tickPadding(7).highlightZero(!1),l.orient("left"),c.orient("right");var S=function(n,r){var i=n.pos[0]+(r.offsetLeft||0),o=n.pos[1]+(r.offsetTop||0),u=s.tickFormat()(a.x()(n.point,n.pointIndex)),h=(n.series.bar?l:c).tickFormat()(a.y()(n.point,n.pointIndex)),d=x(n.series.key,u,h,n,t);e.tooltip.show([i,o],d,n.value<0?"n":"s",null,r)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+h.left,t.pos[1]+h.top],M.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),o.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+h.left,t.pos[1]+h.top],M.tooltipShow(t)}),o.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),M.on("tooltipHide",function(){y&&e.tooltip.cleanup()}),t.dispatch=M,t.legend=u,t.lines=a,t.bars=o,t.xAxis=s,t.y1Axis=l,t.y2Axis=c,d3.rebind(t,a,"defined","size","clipVoronoi","interpolate"),t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(p=e,a.x(e),o.x(e),t):p},t.y=function(e){return arguments.length?(g=e,a.y(e),o.y(e),t):g},t.margin=function(e){return arguments.length?(h.top=void 0!==e.top?e.top:h.top,h.right=void 0!==e.right?e.right:h.right,h.bottom=void 0!==e.bottom?e.bottom:h.bottom,h.left=void 0!==e.left?e.left:h.left,t):h},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(f=e,t):f},t.color=function(n){return arguments.length?(v=e.utils.getColor(n),u.color(v),t):v},t.showLegend=function(e){return arguments.length?(m=e,t):m},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(x=e,t):x},t.state=function(e){return arguments.length?(b=e,t):b},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t},e.models.lineWithFocusChart=function(){"use strict";function t(e){return e.each(function(e){function M(t){var e=+("e"==t),n=e?1:-1,r=I/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function E(){f.empty()||f.extent(w),G.data([f.empty()?i.domain():w]).each(function(t,e){var r=i(t[0])-n.range()[0],a=n.range()[1]-i(t[1]);d3.select(this).select(".left").attr("width",r<0?0:r),d3.select(this).select(".right").attr("x",i(t[1])).attr("width",a<0?0:a)})}function D(){w=f.empty()?null:f.extent();var t=f.empty()?i.domain():f.extent();if(!(Math.abs(t[0]-t[1])<=1)){C.brush({extent:t,brush:f}),E();P.select(".nv-focus .nv-linesWrap").datum(e.filter(function(t){return!t.disabled}).map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return o.x()(e,n)>=t[0]&&o.x()(e,n)<=t[1]})}})).transition().duration(A).call(o),P.select(".nv-focus .nv-x.nv-axis").transition().duration(A).call(l),P.select(".nv-focus .nv-y.nv-axis").transition().duration(A).call(c)}}var T=d3.select(this),N=this,F=(m||parseInt(T.style("width"))||960)-p.left-p.right,z=(y||parseInt(T.style("height"))||400)-p.top-p.bottom-x,I=x-g.top-g.bottom;if(t.update=function(){T.transition().duration(A).call(t)},t.container=this,!e||!e.length||!e.filter(function(t){return t.values.length}).length){var R=T.selectAll(".nv-noData").data([S]);return R.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),R.attr("x",p.left+F/2).attr("y",p.top+z/2).text(function(t){return t}),t}T.selectAll(".nv-noData").remove(),n=o.xScale(),r=o.yScale(),i=s.xScale(),a=s.yScale();var L=T.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([e]),H=L.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),P=L.select("g");H.append("g").attr("class","nv-legendWrap");var W=H.append("g").attr("class","nv-focus");W.append("g").attr("class","nv-x nv-axis"),W.append("g").attr("class","nv-y nv-axis"),W.append("g").attr("class","nv-linesWrap");var B=H.append("g").attr("class","nv-context");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-linesWrap"),B.append("g").attr("class","nv-brushBackground"),B.append("g").attr("class","nv-x nv-brush"),b&&(d.width(F),P.select(".nv-legendWrap").datum(e).call(d),p.top!=d.height()&&(p.top=d.height(),z=(y||parseInt(T.style("height"))||400)-p.top-p.bottom-x),P.select(".nv-legendWrap").attr("transform","translate(0,"+-p.top+")")),L.attr("transform","translate("+p.left+","+p.top+")"),o.width(F).height(z).color(e.map(function(t,e){return t.color||v(t,e)}).filter(function(t,n){return!e[n].disabled})),s.defined(o.defined()).width(F).height(I).color(e.map(function(t,e){return t.color||v(t,e)}).filter(function(t,n){return!e[n].disabled})),P.select(".nv-context").attr("transform","translate(0,"+(z+p.bottom+g.top)+")");var Y=P.select(".nv-context .nv-linesWrap").datum(e.filter(function(t){return!t.disabled}));d3.transition(Y).call(s),l.scale(n).ticks(F/100).tickSize(-z,0),c.scale(r).ticks(z/36).tickSize(-F,0),P.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+z+")"),f.x(i).on("brush",function(){var e=t.transitionDuration();t.transitionDuration(0),D(),t.transitionDuration(e)}),w&&f.extent(w);var G=P.select(".nv-brushBackground").selectAll("g").data([w||f.extent()]),V=G.enter().append("g");V.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",I),V.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",I);var O=P.select(".nv-x.nv-brush").call(f);O.selectAll("rect").attr("height",I),O.selectAll(".resize").append("path").attr("d",M),D(),u.scale(i).ticks(F/100).tickSize(-I,0),P.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),d3.transition(P.select(".nv-context .nv-x.nv-axis")).call(u),h.scale(a).ticks(I/36).tickSize(-F,0),d3.transition(P.select(".nv-context .nv-y.nv-axis")).call(h),P.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),d.dispatch.on("stateChange",function(e){t.update()}),C.on("tooltipShow",function(t){k&&_(t,N.parentNode)})}),t}var n,r,i,a,o=e.models.line(),s=e.models.line(),l=e.models.axis(),c=e.models.axis(),u=e.models.axis(),h=e.models.axis(),d=e.models.legend(),f=d3.svg.brush(),p={top:30,right:30,bottom:30,left:60},g={top:0,right:30,bottom:20,left:60},v=e.utils.defaultColor(),m=null,y=null,x=100,b=!0,w=null,k=!0,M=function(t,e,n,r,i){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},S="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","brush"),A=250;o.clipEdge(!0),s.interactive(!1),l.orient("bottom").tickPadding(5),c.orient("left"),u.orient("bottom").tickPadding(5),h.orient("left");var _=function(n,r){var i=n.pos[0]+(r.offsetLeft||0),a=n.pos[1]+(r.offsetTop||0),s=l.tickFormat()(o.x()(n.point,n.pointIndex)),u=c.tickFormat()(o.y()(n.point,n.pointIndex)),h=M(n.series.key,s,u,n,t);e.tooltip.show([i,a],h,null,null,r)};return o.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+p.left,t.pos[1]+p.top],C.tooltipShow(t)}),o.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){k&&e.tooltip.cleanup()}),t.dispatch=C,t.legend=d,t.lines=o,t.lines2=s,t.xAxis=l,t.yAxis=c,t.x2Axis=u,t.y2Axis=h,d3.rebind(t,o,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(o.x(e),s.x(e),t):o.x},t.y=function(e){return arguments.length?(o.y(e),s.y(e),t):o.y},t.margin=function(e){return arguments.length?(p.top=void 0!==e.top?e.top:p.top,p.right=void 0!==e.right?e.right:p.right,p.bottom=void 0!==e.bottom?e.bottom:p.bottom,p.left=void 0!==e.left?e.left:p.left,t):p},t.margin2=function(e){return arguments.length?(g=e,t):g},t.width=function(e){return arguments.length?(m=e,t):m},t.height=function(e){return arguments.length?(y=e,t):y},t.height2=function(e){return arguments.length?(x=e,t):x},t.color=function(n){return arguments.length?(v=e.utils.getColor(n),d.color(v),t):v},t.showLegend=function(e){return arguments.length?(b=e,t):b},t.tooltips=function(e){return arguments.length?(k=e,t):k},t.tooltipContent=function(e){return arguments.length?(M=e,t):M},t.interpolate=function(e){return arguments.length?(o.interpolate(e),s.interpolate(e),t):o.interpolate()},t.noData=function(e){return arguments.length?(S=e,t):S},t.xTickFormat=function(e){return arguments.length?(l.tickFormat(e),u.tickFormat(e),t):l.tickFormat()},t.yTickFormat=function(e){return arguments.length?(c.tickFormat(e),h.tickFormat(e),t):c.tickFormat()},t.brushExtent=function(e){return arguments.length?(w=e,t):w},t.transitionDuration=function(e){return arguments.length?(A=e,t):A},t},e.models.linePlusBarWithFocusChart=function(){"use strict";function t(e){return e.each(function(e){function F(t){var e=+("e"==t),n=e?1:-1,r=V/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function H(){b.empty()||b.extent(T),nt.data([b.empty()?i.domain():T]).each(function(t,e){var n=i(t[0])-i.range()[0],r=i.range()[1]-i(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",i(t[1])).attr("width",r<0?0:r)})}function P(){T=b.empty()?null:b.extent(),n=b.empty()?i.domain():b.extent(),I.brush({extent:n,brush:b}),H(),h.width(Y).height(G).color(e.map(function(t,e){return t.color||E(t,e)}).filter(function(t,n){return!e[n].disabled&&e[n].bar})),c.width(Y).height(G).color(e.map(function(t,e){return t.color||E(t,e)}).filter(function(t,n){return!e[n].disabled&&!e[n].bar}));var t=Q.select(".nv-focus .nv-barsWrap").datum(j.length?j.map(function(t,e){return{key:t.key,values:t.values.filter(function(t,e){return h.x()(t,e)>=n[0]&&h.x()(t,e)<=n[1]})}}):[{values:[]}]),s=Q.select(".nv-focus .nv-linesWrap").datum(q[0].disabled?[{values:[]}]:q.map(function(t,e){return{key:t.key,values:t.values.filter(function(t,e){return c.x()(t,e)>=n[0]&&c.x()(t,e)<=n[1]})}}));r=j.length?h.xScale():c.xScale(),f.scale(r).ticks(Y/100).tickSize(-G,0),f.domain([Math.ceil(n[0]),Math.floor(n[1])]),Q.select(".nv-x.nv-axis").transition().duration(R).call(f),t.transition().duration(R).call(h),s.transition().duration(R).call(c),
Q.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),g.scale(a).ticks(G/36).tickSize(-Y,0),Q.select(".nv-focus .nv-y1.nv-axis").style("opacity",j.length?1:0),v.scale(o).ticks(G/36).tickSize(j.length?0:-Y,0),Q.select(".nv-focus .nv-y2.nv-axis").style("opacity",q.length?1:0).attr("transform","translate("+r.range()[1]+",0)"),Q.select(".nv-focus .nv-y1.nv-axis").transition().duration(R).call(g),Q.select(".nv-focus .nv-y2.nv-axis").transition().duration(R).call(v)}var W=d3.select(this),B=this,Y=(M||parseInt(W.style("width"))||960)-w.left-w.right,G=(S||parseInt(W.style("height"))||400)-w.top-w.bottom-C,V=C-k.top-k.bottom;if(t.update=function(){W.transition().duration(R).call(t)},t.container=this,!e||!e.length||!e.filter(function(t){return t.values.length}).length){var O=W.selectAll(".nv-noData").data([z]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",w.left+Y/2).attr("y",w.top+G/2).text(function(t){return t}),t}W.selectAll(".nv-noData").remove();var j=e.filter(function(t){return!t.disabled&&t.bar}),q=e.filter(function(t){return!t.bar});r=h.xScale(),i=p.scale(),a=h.yScale(),o=c.yScale(),s=d.yScale(),l=u.yScale();var X=e.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,e){return{x:A(t,e),y:_(t,e)}})}),U=e.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,e){return{x:A(t,e),y:_(t,e)}})});r.range([0,Y]),i.domain(d3.extent(d3.merge(X.concat(U)),function(t){return t.x})).range([0,Y]);var Z=W.selectAll("g.nv-wrap.nv-linePlusBar").data([e]),K=Z.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),Q=Z.select("g");K.append("g").attr("class","nv-legendWrap");var J=K.append("g").attr("class","nv-focus");J.append("g").attr("class","nv-x nv-axis"),J.append("g").attr("class","nv-y1 nv-axis"),J.append("g").attr("class","nv-y2 nv-axis"),J.append("g").attr("class","nv-barsWrap"),J.append("g").attr("class","nv-linesWrap");var $=K.append("g").attr("class","nv-context");$.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y1 nv-axis"),$.append("g").attr("class","nv-y2 nv-axis"),$.append("g").attr("class","nv-barsWrap"),$.append("g").attr("class","nv-linesWrap"),$.append("g").attr("class","nv-brushBackground"),$.append("g").attr("class","nv-x nv-brush"),D&&(x.width(Y/2),Q.select(".nv-legendWrap").datum(e.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?" (left axis)":" (right axis)"),t})).call(x),w.top!=x.height()&&(w.top=x.height(),G=(S||parseInt(W.style("height"))||400)-w.top-w.bottom-C),Q.select(".nv-legendWrap").attr("transform","translate("+Y/2+","+-w.top+")")),Z.attr("transform","translate("+w.left+","+w.top+")"),d.width(Y).height(V).color(e.map(function(t,e){return t.color||E(t,e)}).filter(function(t,n){return!e[n].disabled&&e[n].bar})),u.width(Y).height(V).color(e.map(function(t,e){return t.color||E(t,e)}).filter(function(t,n){return!e[n].disabled&&!e[n].bar}));var tt=Q.select(".nv-context .nv-barsWrap").datum(j.length?j:[{values:[]}]),et=Q.select(".nv-context .nv-linesWrap").datum(q[0].disabled?[{values:[]}]:q);Q.select(".nv-context").attr("transform","translate(0,"+(G+w.bottom+k.top)+")"),tt.transition().call(d),et.transition().call(u),b.x(i).on("brush",P),T&&b.extent(T);var nt=Q.select(".nv-brushBackground").selectAll("g").data([T||b.extent()]),rt=nt.enter().append("g");rt.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",V),rt.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",V);var it=Q.select(".nv-x.nv-brush").call(b);it.selectAll("rect").attr("height",V),it.selectAll(".resize").append("path").attr("d",F),p.ticks(Y/100).tickSize(-V,0),Q.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")"),Q.select(".nv-context .nv-x.nv-axis").transition().call(p),m.scale(s).ticks(V/36).tickSize(-Y,0),Q.select(".nv-context .nv-y1.nv-axis").style("opacity",j.length?1:0).attr("transform","translate(0,"+i.range()[0]+")"),Q.select(".nv-context .nv-y1.nv-axis").transition().call(m),y.scale(l).ticks(V/36).tickSize(j.length?0:-Y,0),Q.select(".nv-context .nv-y2.nv-axis").style("opacity",q.length?1:0).attr("transform","translate("+i.range()[1]+",0)"),Q.select(".nv-context .nv-y2.nv-axis").transition().call(y),x.dispatch.on("stateChange",function(e){t.update()}),I.on("tooltipShow",function(t){N&&L(t,B.parentNode)}),P()}),t}var n,r,i,a,o,s,l,c=e.models.line(),u=e.models.line(),h=e.models.historicalBar(),d=e.models.historicalBar(),f=e.models.axis(),p=e.models.axis(),g=e.models.axis(),v=e.models.axis(),m=e.models.axis(),y=e.models.axis(),x=e.models.legend(),b=d3.svg.brush(),w={top:30,right:30,bottom:30,left:60},k={top:0,right:30,bottom:20,left:60},M=null,S=null,C=100,A=function(t){return t.x},_=function(t){return t.y},E=e.utils.defaultColor(),D=!0,T=null,N=!0,F=function(t,e,n,r,i){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},z="No Data Available.",I=d3.dispatch("tooltipShow","tooltipHide","brush"),R=0;c.clipEdge(!0),u.interactive(!1),f.orient("bottom").tickPadding(5),g.orient("left"),v.orient("right"),p.orient("bottom").tickPadding(5),m.orient("left"),y.orient("right");var L=function(r,i){n&&(r.pointIndex+=Math.ceil(n[0]));var a=r.pos[0]+(i.offsetLeft||0),o=r.pos[1]+(i.offsetTop||0),s=f.tickFormat()(c.x()(r.point,r.pointIndex)),l=(r.series.bar?g:v).tickFormat()(c.y()(r.point,r.pointIndex)),u=F(r.series.key,s,l,r,t);e.tooltip.show([a,o],u,r.value<0?"n":"s",null,i)};return c.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],I.tooltipShow(t)}),c.dispatch.on("elementMouseout.tooltip",function(t){I.tooltipHide(t)}),h.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],I.tooltipShow(t)}),h.dispatch.on("elementMouseout.tooltip",function(t){I.tooltipHide(t)}),I.on("tooltipHide",function(){N&&e.tooltip.cleanup()}),t.dispatch=I,t.legend=x,t.lines=c,t.lines2=u,t.bars=h,t.bars2=d,t.xAxis=f,t.x2Axis=p,t.y1Axis=g,t.y2Axis=v,t.y3Axis=m,t.y4Axis=y,d3.rebind(t,c,"defined","size","clipVoronoi","interpolate"),t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(A=e,c.x(e),h.x(e),t):A},t.y=function(e){return arguments.length?(_=e,c.y(e),h.y(e),t):_},t.margin=function(e){return arguments.length?(w.top=void 0!==e.top?e.top:w.top,w.right=void 0!==e.right?e.right:w.right,w.bottom=void 0!==e.bottom?e.bottom:w.bottom,w.left=void 0!==e.left?e.left:w.left,t):w},t.width=function(e){return arguments.length?(M=e,t):M},t.height=function(e){return arguments.length?(S=e,t):S},t.color=function(n){return arguments.length?(E=e.utils.getColor(n),x.color(E),t):E},t.showLegend=function(e){return arguments.length?(D=e,t):D},t.tooltips=function(e){return arguments.length?(N=e,t):N},t.tooltipContent=function(e){return arguments.length?(F=e,t):F},t.noData=function(e){return arguments.length?(z=e,t):z},t.brushExtent=function(e){return arguments.length?(T=e,t):T},t},e.models.multiBar=function(){"use strict";function t(e){return e.each(function(t){var e=u-c.left-c.right,_=h-c.top-c.bottom,E=d3.select(this);k&&t.length&&(k=[{values:t[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),x&&(t=d3.layout.stack().offset(b).values(function(t){return t.values}).y(v)(!t.length&&k?k:t)),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),x&&t[0].values.map(function(e,n){var r=0,i=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=i,i-=e.size):(e.y1=e.size+r,r+=e.size)})});var D=r&&i?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:v(t,e),y0:t.y0,y1:t.y1}})});d.domain(r||d3.merge(D).map(function(t){return t.x})).rangeBands(a||[0,e],C),f.domain(i||d3.extent(d3.merge(D).map(function(t){return x?t.y>0?t.y1:t.y1+t.y:t.y}).concat(m))).range(o||[_,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1])),s=s||d,l=l||f;var T=E.selectAll("g.nv-wrap.nv-multibar").data([t]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),F=N.append("defs"),z=N.append("g"),I=T.select("g");z.append("g").attr("class","nv-groups"),T.attr("transform","translate("+c.left+","+c.top+")"),F.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect"),T.select("#nv-edge-clip-"+p+" rect").attr("width",e).attr("height",_),I.attr("clip-path",y?"url(#nv-edge-clip-"+p+")":"");var R=T.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});R.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),R.exit().transition().selectAll("rect.nv-bar").delay(function(e,n){return n*S/t[0].values.length}).attr("y",function(t){return l(x?t.y0:0)}).attr("height",0).remove(),R.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return w(t,e)}).style("stroke",function(t,e){return w(t,e)}),R.transition().style("stroke-opacity",1).style("fill-opacity",.75);var L=R.selectAll("rect.nv-bar").data(function(e){return k&&!t.length?k.values:e.values});L.exit().remove();L.enter().append("rect").attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(e,n,r){return x?0:r*d.rangeBand()/t.length}).attr("y",function(t){return l(x?t.y0:0)}).attr("height",0).attr("width",d.rangeBand()/(x?1:t.length)).attr("transform",function(t,e){return"translate("+d(g(t,e))+",0)"});L.style("fill",function(t,e,n){return w(t,n,e)}).style("stroke",function(t,e,n){return w(t,n,e)}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),A.elementMouseover({value:v(e,n),point:e,series:t[e.series],pos:[d(g(e,n))+d.rangeBand()*(x?t.length/2:e.series+.5)/t.length,f(v(e,n)+(x?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),A.elementMouseout({value:v(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){A.elementClick({value:v(e,n),point:e,series:t[e.series],pos:[d(g(e,n))+d.rangeBand()*(x?t.length/2:e.series+.5)/t.length,f(v(e,n)+(x?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){A.elementDblClick({value:v(e,n),point:e,series:t[e.series],pos:[d(g(e,n))+d.rangeBand()*(x?t.length/2:e.series+.5)/t.length,f(v(e,n)+(x?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),L.attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(t,e){return"translate("+d(g(t,e))+",0)"}),M&&(n||(n=t.map(function(){return!0})),L.style("fill",function(t,e,r){return d3.rgb(M(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[r]).toString()}).style("stroke",function(t,e,r){return d3.rgb(M(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[r]).toString()})),x?L.transition().delay(function(e,n){return n*S/t[0].values.length}).attr("y",function(t,e){return f(x?t.y1:0)}).attr("height",function(t,e){return Math.max(Math.abs(f(t.y+(x?t.y0:0))-f(x?t.y0:0)),1)}).attr("x",function(e,n){return x?0:e.series*d.rangeBand()/t.length}).attr("width",d.rangeBand()/(x?1:t.length)):L.transition().delay(function(e,n){return n*S/t[0].values.length}).attr("x",function(e,n){return e.series*d.rangeBand()/t.length}).attr("width",d.rangeBand()/t.length).attr("y",function(t,e){return v(t,e)<0?f(0):f(0)-f(v(t,e))<1?f(0)-1:f(v(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(f(v(t,e))-f(0)),1)||0}),s=d.copy(),l=f.copy()}),t}var n,r,i,a,o,s,l,c={top:0,right:0,bottom:0,left:0},u=960,h=500,d=d3.scale.ordinal(),f=d3.scale.linear(),p=Math.floor(1e4*Math.random()),g=function(t){return t.x},v=function(t){return t.y},m=[0],y=!0,x=!1,b="zero",w=e.utils.defaultColor(),k=!1,M=null,S=1200,C=.1,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=A,t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(v=e,t):v},t.margin=function(e){return arguments.length?(c.top=void 0!==e.top?e.top:c.top,c.right=void 0!==e.right?e.right:c.right,c.bottom=void 0!==e.bottom?e.bottom:c.bottom,c.left=void 0!==e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(h=e,t):h},t.xScale=function(e){return arguments.length?(d=e,t):d},t.yScale=function(e){return arguments.length?(f=e,t):f},t.xDomain=function(e){return arguments.length?(r=e,t):r},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(o=e,t):o},t.forceY=function(e){return arguments.length?(m=e,t):m},t.stacked=function(e){return arguments.length?(x=e,t):x},t.stackOffset=function(e){return arguments.length?(b=e,t):b},t.clipEdge=function(e){return arguments.length?(y=e,t):y},t.color=function(n){return arguments.length?(w=e.utils.getColor(n),t):w},t.barColor=function(n){return arguments.length?(M=e.utils.getColor(n),t):M},t.disabled=function(e){return arguments.length?(n=e,t):n},t.id=function(e){return arguments.length?(p=e,t):p},t.hideable=function(e){return arguments.length?(k=e,t):k},t.delay=function(e){return arguments.length?(S=e,t):S},t.groupSpacing=function(e){return arguments.length?(C=e,t):C},t},e.models.multiBarChart=function(){"use strict";function t(e){return e.each(function(e){var k=d3.select(this),T=this,N=(u||parseInt(k.style("width"))||960)-c.left-c.right,F=(h||parseInt(k.style("height"))||400)-c.top-c.bottom;if(t.update=function(){k.transition().duration(E).call(t)},t.container=this,M.disabled=e.map(function(t){return!!t.disabled}),!S){var z;S={};for(z in M)M[z]instanceof Array?S[z]=M[z].slice(0):S[z]=M[z]}if(!e||!e.length||!e.filter(function(t){return t.values.length}).length){var I=k.selectAll(".nv-noData").data([C]);return I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",c.left+N/2).attr("y",c.top+F/2).text(function(t){return t}),t}k.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var R=k.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([e]),L=R.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),H=R.select("g");if(L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis"),L.append("g").attr("class","nv-barsWrap"),L.append("g").attr("class","nv-legendWrap"),L.append("g").attr("class","nv-controlsWrap"),p&&(s.width(N-_()),i.barColor()&&e.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),H.select(".nv-legendWrap").datum(e).call(s),c.top!=s.height()&&(c.top=s.height(),F=(h||parseInt(k.style("height"))||400)-c.top-c.bottom),H.select(".nv-legendWrap").attr("transform","translate("+_()+","+-c.top+")")),f){var P=[{key:"Grouped",disabled:i.stacked()},{key:"Stacked",disabled:!i.stacked()}];l.width(_()).color(["#444","#444","#444"]),H.select(".nv-controlsWrap").datum(P).attr("transform","translate(0,"+-c.top+")").call(l)}if(R.attr("transform","translate("+c.left+","+c.top+")"),m&&H.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)"),i.disabled(e.map(function(t){return t.disabled})).width(N).height(F).color(e.map(function(t,e){return t.color||d(t,e)}).filter(function(t,n){return!e[n].disabled})),H.select(".nv-barsWrap").datum(e.filter(function(t){return!t.disabled})).transition().call(i),g){a.scale(n).ticks(N/100).tickSize(-F,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),H.select(".nv-x.nv-axis").transition().call(a);var W=H.select(".nv-x.nv-axis > g").selectAll("g");if(W.selectAll("line, text").style("opacity",1),x){var B=function(t,e){return"translate("+t+","+e+")"};W.selectAll("text").attr("transform",function(t,e,n){return B(0,n%2==0?5:17)});var Y=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;H.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return B(0,0===e||Y%2!=0?17:5)})}y&&W.filter(function(t,n){return n%Math.ceil(e[0].values.length/(N/100))!=0}).selectAll("text, line").style("opacity",0),b&&W.selectAll(".tick text").attr("transform","rotate("+b+" 0,0)").style("text-anchor",b>0?"start":"end"),H.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}v&&(o.scale(r).ticks(F/36).tickSize(-N,0),H.select(".nv-y.nv-axis").transition().call(o)),s.dispatch.on("stateChange",function(e){M=e,A.stateChange(M),t.update()}),l.dispatch.on("legendClick",function(e,n){if(e.disabled){switch(P=P.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":i.stacked(!1);break;case"Stacked":i.stacked(!0)}M.stacked=i.stacked(),A.stateChange(M),t.update()}}),A.on("tooltipShow",function(t){w&&D(t,T.parentNode)}),A.on("changeState",function(n){void 0!==n.disabled&&(e.forEach(function(t,e){t.disabled=n.disabled[e]}),M.disabled=n.disabled),void 0!==n.stacked&&(i.stacked(n.stacked),M.stacked=n.stacked),t.update()})}),t}var n,r,i=e.models.multiBar(),a=e.models.axis(),o=e.models.axis(),s=e.models.legend(),l=e.models.legend(),c={top:30,right:20,bottom:50,left:60},u=null,h=null,d=e.utils.defaultColor(),f=!0,p=!0,g=!0,v=!0,m=!1,y=!0,x=!1,b=0,w=!0,k=function(t,e,n,r,i){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},M={stacked:!1},S=null,C="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),_=function(){return f?180:0},E=250;i.stacked(!1),a.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(t){return t}),o.orient(m?"right":"left").tickFormat(d3.format(",.1f")),l.updateState(!1);var D=function(n,r){var s=n.pos[0]+(r.offsetLeft||0),l=n.pos[1]+(r.offsetTop||0),c=a.tickFormat()(i.x()(n.point,n.pointIndex)),u=o.tickFormat()(i.y()(n.point,n.pointIndex)),h=k(n.series.key,c,u,n,t);e.tooltip.show([s,l],h,n.value<0?"n":"s",null,r)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],A.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){A.tooltipHide(t)}),A.on("tooltipHide",function(){w&&e.tooltip.cleanup()}),t.dispatch=A,t.multibar=i,t.legend=s,t.xAxis=a,t.yAxis=o,d3.rebind(t,i,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top=void 0!==e.top?e.top:c.top,c.right=void 0!==e.right?e.right:c.right,c.bottom=void 0!==e.bottom?e.bottom:c.bottom,c.left=void 0!==e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(n){return arguments.length?(d=e.utils.getColor(n),s.color(d),t):d},t.showControls=function(e){return arguments.length?(f=e,t):f},t.showLegend=function(e){return arguments.length?(p=e,t):p},t.showXAxis=function(e){return arguments.length?(g=e,t):g},t.showYAxis=function(e){return arguments.length?(v=e,t):v},t.rightAlignYAxis=function(e){return arguments.length?(m=e,o.orient(e?"right":"left"),t):m},t.reduceXTicks=function(e){return arguments.length?(y=e,t):y},t.rotateLabels=function(e){return arguments.length?(b=e,t):b},t.staggerLabels=function(e){return arguments.length?(x=e,t):x},t.tooltip=function(e){return arguments.length?(k=e,t):k},t.tooltips=function(e){return arguments.length?(w=e,t):w},t.tooltipContent=function(e){return arguments.length?(k=e,t):k},t.state=function(e){return arguments.length?(M=e,t):M},t.defaultState=function(e){return arguments.length?(S=e,t):S},t.noData=function(e){return arguments.length?(C=e,t):C},t.transitionDuration=function(e){return arguments.length?(E=e,t):E},t},e.models.multiBarHorizontal=function(){"use strict";function t(e){return e.each(function(t){var e=u-c.left-c.right,d=h-c.top-c.bottom;d3.select(this);b&&(t=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(v)(t)),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),b&&t[0].values.map(function(e,n){var r=0,i=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=i-e.size,i-=e.size):(e.y1=r,r+=e.size)})});var C=r&&i?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:v(t,e),y0:t.y0,y1:t.y1}})});f.domain(r||d3.merge(C).map(function(t){return t.x})).rangeBands(a||[0,d],.1),p.domain(i||d3.extent(d3.merge(C).map(function(t){return b?t.y>0?t.y1+t.y:t.y1:t.y}).concat(m))),w&&!b?p.range(o||[p.domain()[0]<0?M:0,e-(p.domain()[1]>0?M:0)]):p.range(o||[0,e]),s=s||f,l=l||d3.scale.linear().domain(p.domain()).range([p(0),p(0)]);var _=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([t]),E=_.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),D=(E.append("defs"),E.append("g"));_.select("g");D.append("g").attr("class","nv-groups"),_.attr("transform","translate("+c.left+","+c.top+")");var T=_.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});T.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),T.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),T.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return y(t,e)}).style("stroke",function(t,e){return y(t,e)}),T.transition().style("stroke-opacity",1).style("fill-opacity",.75);var N=T.selectAll("g.nv-bar").data(function(t){return t.values});N.exit().remove();var F=N.enter().append("g").attr("transform",function(e,n,r){return"translate("+l(b?e.y0:0)+","+(b?0:r*f.rangeBand()/t.length+f(g(e,n)))+")"});F.append("rect").attr("width",0).attr("height",f.rangeBand()/(b?1:t.length)),N.on("mouseover",function(e,n){d3.select(this).classed("hover",!0),A.elementMouseover({value:v(e,n),point:e,series:t[e.series],pos:[p(v(e,n)+(b?e.y0:0)),f(g(e,n))+f.rangeBand()*(b?t.length/2:e.series+.5)/t.length],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),A.elementMouseout({value:v(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){A.elementClick({value:v(e,n),point:e,series:t[e.series],pos:[f(g(e,n))+f.rangeBand()*(b?t.length/2:e.series+.5)/t.length,p(v(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){A.elementDblClick({value:v(e,n),point:e,series:t[e.series],pos:[f(g(e,n))+f.rangeBand()*(b?t.length/2:e.series+.5)/t.length,p(v(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),F.append("text"),w&&!b?(N.select("text").attr("text-anchor",function(t,e){return v(t,e)<0?"end":"start"}).attr("y",f.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){return S(v(t,e))}),N.transition().select("text").attr("x",function(t,e){return v(t,e)<0?-4:p(v(t,e))-p(0)+4})):N.selectAll("text").text(""),k&&!b?(F.append("text").classed("nv-bar-label",!0),N.select("text.nv-bar-label").attr("text-anchor",function(t,e){return v(t,e)<0?"start":"end"}).attr("y",f.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){return g(t,e)}),N.transition().select("text.nv-bar-label").attr("x",function(t,e){return v(t,e)<0?p(0)-p(v(t,e))+4:-4})):N.selectAll("text.nv-bar-label").text(""),N.attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}),x&&(n||(n=t.map(function(){return!0})),N.style("fill",function(t,e,r){return d3.rgb(x(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[r]).toString()}).style("stroke",function(t,e,r){return d3.rgb(x(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[r]).toString()})),b?N.transition().attr("transform",function(t,e){return"translate("+p(t.y1)+","+f(g(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(p(v(t,e)+t.y0)-p(t.y0))}).attr("height",f.rangeBand()):N.transition().attr("transform",function(e,n){return"translate("+p(v(e,n)<0?v(e,n):0)+","+(e.series*f.rangeBand()/t.length+f(g(e,n)))+")"}).select("rect").attr("height",f.rangeBand()/t.length).attr("width",function(t,e){return Math.max(Math.abs(p(v(t,e))-p(0)),1)}),s=f.copy(),l=p.copy()}),t}var n,r,i,a,o,s,l,c={top:0,right:0,bottom:0,left:0},u=960,h=500,d=Math.floor(1e4*Math.random()),f=d3.scale.ordinal(),p=d3.scale.linear(),g=function(t){return t.x},v=function(t){return t.y},m=[0],y=e.utils.defaultColor(),x=null,b=!1,w=!1,k=!1,M=60,S=d3.format(",.2f"),C=1200,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=A,t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(v=e,t):v},t.margin=function(e){return arguments.length?(c.top=void 0!==e.top?e.top:c.top,c.right=void 0!==e.right?e.right:c.right,c.bottom=void 0!==e.bottom?e.bottom:c.bottom,c.left=void 0!==e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(h=e,t):h},t.xScale=function(e){return arguments.length?(f=e,t):f},t.yScale=function(e){return arguments.length?(p=e,t):p},t.xDomain=function(e){return arguments.length?(r=e,t):r},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(o=e,t):o},t.forceY=function(e){return arguments.length?(m=e,t):m},t.stacked=function(e){return arguments.length?(b=e,t):b},t.color=function(n){return arguments.length?(y=e.utils.getColor(n),t):y},t.barColor=function(n){return arguments.length?(x=e.utils.getColor(n),t):x},t.disabled=function(e){return arguments.length?(n=e,t):n},t.id=function(e){return arguments.length?(d=e,t):d},t.delay=function(e){return arguments.length?(C=e,t):C},t.showValues=function(e){return arguments.length?(w=e,t):w},t.showBarLabels=function(e){return arguments.length?(k=e,t):k},t.valueFormat=function(e){return arguments.length?(S=e,t):S},t.valuePadding=function(e){return arguments.length?(M=e,t):M},t},e.models.multiBarHorizontalChart=function(){"use strict";function t(e){return e.each(function(e){var y=d3.select(this),A=this,_=(u||parseInt(y.style("width"))||960)-c.left-c.right,E=(h||parseInt(y.style("height"))||400)-c.top-c.bottom;if(t.update=function(){y.transition().duration(S).call(t)},t.container=this,x.disabled=e.map(function(t){return!!t.disabled}),!b){var D;b={};for(D in x)x[D]instanceof Array?b[D]=x[D].slice(0):b[D]=x[D]}if(!e||!e.length||!e.filter(function(t){return t.values.length}).length){var T=y.selectAll(".nv-noData").data([w]);return T.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),T.attr("x",c.left+_/2).attr("y",c.top+E/2).text(function(t){return t}),t}y.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var N=y.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([e]),F=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),z=N.select("g");if(F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),F.append("g").attr("class","nv-barsWrap"),F.append("g").attr("class","nv-legendWrap"),F.append("g").attr("class","nv-controlsWrap"),p&&(s.width(_-M()),i.barColor()&&e.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),z.select(".nv-legendWrap").datum(e).call(s),c.top!=s.height()&&(c.top=s.height(),E=(h||parseInt(y.style("height"))||400)-c.top-c.bottom),z.select(".nv-legendWrap").attr("transform","translate("+M()+","+-c.top+")")),f){var I=[{key:"Grouped",disabled:i.stacked()},{key:"Stacked",disabled:!i.stacked()}];l.width(M()).color(["#444","#444","#444"]),z.select(".nv-controlsWrap").datum(I).attr("transform","translate(0,"+-c.top+")").call(l)}(N.attr("transform","translate("+c.left+","+c.top+")"),i.disabled(e.map(function(t){return t.disabled})).width(_).height(E).color(e.map(function(t,e){return t.color||d(t,e)}).filter(function(t,n){return!e[n].disabled})),z.select(".nv-barsWrap").datum(e.filter(function(t){return!t.disabled})).transition().call(i),g)&&(a.scale(n).ticks(E/24).tickSize(-_,0),z.select(".nv-x.nv-axis").transition().call(a),z.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));v&&(o.scale(r).ticks(_/100).tickSize(-E,0),z.select(".nv-y.nv-axis").attr("transform","translate(0,"+E+")"),z.select(".nv-y.nv-axis").transition().call(o)),z.select(".nv-zeroLine line").attr("x1",r(0)).attr("x2",r(0)).attr("y1",0).attr("y2",-E),s.dispatch.on("stateChange",function(e){x=e,k.stateChange(x),t.update()}),l.dispatch.on("legendClick",function(e,n){if(e.disabled){switch(I=I.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":i.stacked(!1);break;case"Stacked":i.stacked(!0)}x.stacked=i.stacked(),k.stateChange(x),t.update()}}),k.on("tooltipShow",function(t){m&&C(t,A.parentNode)}),k.on("changeState",function(n){void 0!==n.disabled&&(e.forEach(function(t,e){t.disabled=n.disabled[e]}),x.disabled=n.disabled),void 0!==n.stacked&&(i.stacked(n.stacked),x.stacked=n.stacked),t.update()})}),t}var n,r,i=e.models.multiBarHorizontal(),a=e.models.axis(),o=e.models.axis(),s=e.models.legend().height(30),l=e.models.legend().height(30),c={top:30,right:20,bottom:50,left:60},u=null,h=null,d=e.utils.defaultColor(),f=!0,p=!0,g=!0,v=!0,m=!0,y=function(t,e,n,r,i){return"<h3>"+t+" - "+e+"</h3><p>"+n+"</p>"},x={stacked:!1},b=null,w="No Data Available.",k=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),M=function(){return f?180:0},S=250;i.stacked(!1),a.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),o.orient("bottom").tickFormat(d3.format(",.1f")),l.updateState(!1);var C=function(n,r){var s=n.pos[0]+(r.offsetLeft||0),l=n.pos[1]+(r.offsetTop||0),c=a.tickFormat()(i.x()(n.point,n.pointIndex)),u=o.tickFormat()(i.y()(n.point,n.pointIndex)),h=y(n.series.key,c,u,n,t);e.tooltip.show([s,l],h,n.value<0?"e":"w",null,r)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],k.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){k.tooltipHide(t)}),k.on("tooltipHide",function(){m&&e.tooltip.cleanup()}),t.dispatch=k,t.multibar=i,t.legend=s,t.xAxis=a,t.yAxis=o,d3.rebind(t,i,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top=void 0!==e.top?e.top:c.top,c.right=void 0!==e.right?e.right:c.right,c.bottom=void 0!==e.bottom?e.bottom:c.bottom,c.left=void 0!==e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(n){return arguments.length?(d=e.utils.getColor(n),s.color(d),t):d},t.showControls=function(e){return arguments.length?(f=e,t):f},t.showLegend=function(e){return arguments.length?(p=e,t):p},t.showXAxis=function(e){return arguments.length?(g=e,t):g},t.showYAxis=function(e){return arguments.length?(v=e,t):v},t.tooltip=function(e){return arguments.length?(y=e,t):y},t.tooltips=function(e){return arguments.length?(m=e,t):m},t.tooltipContent=function(e){return arguments.length?(y=e,t):y},t.state=function(e){return arguments.length?(x=e,t):x},t.defaultState=function(e){return arguments.length?(b=e,
t):b},t.noData=function(e){return arguments.length?(w=e,t):w},t.transitionDuration=function(e){return arguments.length?(S=e,t):S},t},e.models.multiChart=function(){"use strict";function t(e){return e.each(function(e){var h=d3.select(this),A=this;t.update=function(){h.transition().call(t)},t.container=this;var _=(s||parseInt(h.style("width"))||960)-a.left-a.right,E=(l||parseInt(h.style("height"))||400)-a.top-a.bottom,D=e.filter(function(t){return!t.disabled&&"line"==t.type&&1==t.yAxis}),T=e.filter(function(t){return!t.disabled&&"line"==t.type&&2==t.yAxis}),N=e.filter(function(t){return!t.disabled&&"bar"==t.type&&1==t.yAxis}),F=e.filter(function(t){return!t.disabled&&"bar"==t.type&&2==t.yAxis}),z=e.filter(function(t){return!t.disabled&&"area"==t.type&&1==t.yAxis}),I=e.filter(function(t){return!t.disabled&&"area"==t.type&&2==t.yAxis}),R=e.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})}),L=e.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})});n.domain(d3.extent(d3.merge(R.concat(L)),function(t){return t.x})).range([0,_]);var H=h.selectAll("g.wrap.multiChart").data([e]),P=H.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");P.append("g").attr("class","x axis"),P.append("g").attr("class","y1 axis"),P.append("g").attr("class","y2 axis"),P.append("g").attr("class","lines1Wrap"),P.append("g").attr("class","lines2Wrap"),P.append("g").attr("class","bars1Wrap"),P.append("g").attr("class","bars2Wrap"),P.append("g").attr("class","stack1Wrap"),P.append("g").attr("class","stack2Wrap"),P.append("g").attr("class","legendWrap");var W=H.select("g");c&&(M.width(_/2),W.select(".legendWrap").datum(e.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call(M),a.top!=M.height()&&(a.top=M.height(),E=(l||parseInt(h.style("height"))||400)-a.top-a.bottom),W.select(".legendWrap").attr("transform","translate("+_/2+","+-a.top+")")),p.width(_).height(E).interpolate("monotone").color(e.map(function(t,e){return t.color||o[e%o.length]}).filter(function(t,n){return!e[n].disabled&&1==e[n].yAxis&&"line"==e[n].type})),g.width(_).height(E).interpolate("monotone").color(e.map(function(t,e){return t.color||o[e%o.length]}).filter(function(t,n){return!e[n].disabled&&2==e[n].yAxis&&"line"==e[n].type})),v.width(_).height(E).color(e.map(function(t,e){return t.color||o[e%o.length]}).filter(function(t,n){return!e[n].disabled&&1==e[n].yAxis&&"bar"==e[n].type})),m.width(_).height(E).color(e.map(function(t,e){return t.color||o[e%o.length]}).filter(function(t,n){return!e[n].disabled&&2==e[n].yAxis&&"bar"==e[n].type})),y.width(_).height(E).color(e.map(function(t,e){return t.color||o[e%o.length]}).filter(function(t,n){return!e[n].disabled&&1==e[n].yAxis&&"area"==e[n].type})),x.width(_).height(E).color(e.map(function(t,e){return t.color||o[e%o.length]}).filter(function(t,n){return!e[n].disabled&&2==e[n].yAxis&&"area"==e[n].type})),W.attr("transform","translate("+a.left+","+a.top+")");var B=W.select(".lines1Wrap").datum(D),Y=W.select(".bars1Wrap").datum(N),G=W.select(".stack1Wrap").datum(z),V=W.select(".lines2Wrap").datum(T),O=W.select(".bars2Wrap").datum(F),j=W.select(".stack2Wrap").datum(I),q=z.length?z.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],X=I.length?I.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];d.domain(r||d3.extent(d3.merge(R).concat(q),function(t){return t.y})).range([0,E]),f.domain(i||d3.extent(d3.merge(L).concat(X),function(t){return t.y})).range([0,E]),p.yDomain(d.domain()),v.yDomain(d.domain()),y.yDomain(d.domain()),g.yDomain(f.domain()),m.yDomain(f.domain()),x.yDomain(f.domain()),z.length&&d3.transition(G).call(y),I.length&&d3.transition(j).call(x),N.length&&d3.transition(Y).call(v),F.length&&d3.transition(O).call(m),D.length&&d3.transition(B).call(p),T.length&&d3.transition(V).call(g),b.ticks(_/100).tickSize(-E,0),W.select(".x.axis").attr("transform","translate(0,"+E+")"),d3.transition(W.select(".x.axis")).call(b),w.ticks(E/36).tickSize(-_,0),d3.transition(W.select(".y1.axis")).call(w),k.ticks(E/36).tickSize(-_,0),d3.transition(W.select(".y2.axis")).call(k),W.select(".y2.axis").style("opacity",L.length?1:0).attr("transform","translate("+n.range()[1]+",0)"),M.dispatch.on("stateChange",function(e){t.update()}),S.on("tooltipShow",function(t){u&&C(t,A.parentNode)})}),t}var n,r,i,a={top:30,right:20,bottom:50,left:60},o=d3.scale.category20().range(),s=null,l=null,c=!0,u=!0,h=function(t,e,n,r,i){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},n=d3.scale.linear(),d=d3.scale.linear(),f=d3.scale.linear(),p=e.models.line().yScale(d),g=e.models.line().yScale(f),v=e.models.multiBar().stacked(!1).yScale(d),m=e.models.multiBar().stacked(!1).yScale(f),y=e.models.stackedArea().yScale(d),x=e.models.stackedArea().yScale(f),b=e.models.axis().scale(n).orient("bottom").tickPadding(5),w=e.models.axis().scale(d).orient("left"),k=e.models.axis().scale(f).orient("right"),M=e.models.legend().height(30),S=d3.dispatch("tooltipShow","tooltipHide"),C=function(n,r){var i=n.pos[0]+(r.offsetLeft||0),a=n.pos[1]+(r.offsetTop||0),o=b.tickFormat()(p.x()(n.point,n.pointIndex)),s=(2==n.series.yAxis?k:w).tickFormat()(p.y()(n.point,n.pointIndex)),l=h(n.series.key,o,s,n,t);e.tooltip.show([i,a],l,void 0,void 0,r.offsetParent)};return p.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],S.tooltipShow(t)}),p.dispatch.on("elementMouseout.tooltip",function(t){S.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],S.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){S.tooltipHide(t)}),v.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],S.tooltipShow(t)}),v.dispatch.on("elementMouseout.tooltip",function(t){S.tooltipHide(t)}),m.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],S.tooltipShow(t)}),m.dispatch.on("elementMouseout.tooltip",function(t){S.tooltipHide(t)}),y.dispatch.on("tooltipShow",function(t){if(!Math.round(100*y.y()(t.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],S.tooltipShow(t)}),y.dispatch.on("tooltipHide",function(t){S.tooltipHide(t)}),x.dispatch.on("tooltipShow",function(t){if(!Math.round(100*x.y()(t.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],S.tooltipShow(t)}),x.dispatch.on("tooltipHide",function(t){S.tooltipHide(t)}),p.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],S.tooltipShow(t)}),p.dispatch.on("elementMouseout.tooltip",function(t){S.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],S.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){S.tooltipHide(t)}),S.on("tooltipHide",function(){u&&e.tooltip.cleanup()}),t.dispatch=S,t.lines1=p,t.lines2=g,t.bars1=v,t.bars2=m,t.stack1=y,t.stack2=x,t.xAxis=b,t.yAxis1=w,t.yAxis2=k,t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(getX=e,p.x(e),v.x(e),t):getX},t.y=function(e){return arguments.length?(getY=e,p.y(e),v.y(e),t):getY},t.yDomain1=function(e){return arguments.length?(r=e,t):r},t.yDomain2=function(e){return arguments.length?(i=e,t):i},t.margin=function(e){return arguments.length?(a=e,t):a},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(l=e,t):l},t.color=function(e){return arguments.length?(o=e,M.color(e),t):o},t.showLegend=function(e){return arguments.length?(c=e,t):c},t.tooltips=function(e){return arguments.length?(u=e,t):u},t.tooltipContent=function(e){return arguments.length?(h=e,t):h},t},e.models.ohlcBar=function(){"use strict";function t(e){return e.each(function(t){var e=s-o.left-o.right,k=l-o.top-o.bottom,S=d3.select(this);u.domain(n||d3.extent(t[0].values.map(d).concat(y))),b?u.range(i||[.5*e/t[0].values.length,e*(t[0].values.length-.5)/t[0].values.length]):u.range(i||[0,e]),h.domain(r||[d3.min(t[0].values.map(m).concat(x)),d3.max(t[0].values.map(v).concat(x))]).range(a||[k,0]),u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]-.01*u.domain()[0],u.domain()[1]+.01*u.domain()[1]]):u.domain([-1,1])),h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));var C=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([t[0].values]),A=C.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),_=A.append("defs"),E=A.append("g"),D=C.select("g");E.append("g").attr("class","nv-ticks"),C.attr("transform","translate("+o.left+","+o.top+")"),S.on("click",function(t,e){M.chartClick({data:t,index:e,pos:d3.event,id:c})}),_.append("clipPath").attr("id","nv-chart-clip-path-"+c).append("rect"),C.select("#nv-chart-clip-path-"+c+" rect").attr("width",e).attr("height",k),D.attr("clip-path",w?"url(#nv-chart-clip-path-"+c+")":"");var T=C.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});T.exit().remove();T.enter().append("path").attr("class",function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(n,r){var i=e/t[0].values.length*.9;return"m0,0l0,"+(h(p(n,r))-h(v(n,r)))+"l"+-i/2+",0l"+i/2+",0l0,"+(h(m(n,r))-h(p(n,r)))+"l0,"+(h(g(n,r))-h(m(n,r)))+"l"+i/2+",0l"+-i/2+",0z"}).attr("transform",function(t,e){return"translate("+u(d(t,e))+","+h(v(t,e))+")"}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),M.elementMouseover({point:e,series:t[0],pos:[u(d(e,n)),h(f(e,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),M.elementMouseout({point:e,series:t[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(t,e){M.elementClick({value:f(t,e),data:t,index:e,pos:[u(d(t,e)),h(f(t,e))],e:d3.event,id:c}),d3.event.stopPropagation()}).on("dblclick",function(t,e){M.elementDblClick({value:f(t,e),data:t,index:e,pos:[u(d(t,e)),h(f(t,e))],e:d3.event,id:c}),d3.event.stopPropagation()});T.attr("class",function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(T).attr("transform",function(t,e){return"translate("+u(d(t,e))+","+h(v(t,e))+")"}).attr("d",function(n,r){var i=e/t[0].values.length*.9;return"m0,0l0,"+(h(p(n,r))-h(v(n,r)))+"l"+-i/2+",0l"+i/2+",0l0,"+(h(m(n,r))-h(p(n,r)))+"l0,"+(h(g(n,r))-h(m(n,r)))+"l"+i/2+",0l"+-i/2+",0z"})}),t}var n,r,i,a,o={top:0,right:0,bottom:0,left:0},s=960,l=500,c=Math.floor(1e4*Math.random()),u=d3.scale.linear(),h=d3.scale.linear(),d=function(t){return t.x},f=function(t){return t.y},p=function(t){return t.open},g=function(t){return t.close},v=function(t){return t.high},m=function(t){return t.low},y=[],x=[],b=!1,w=!0,k=e.utils.defaultColor(),M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=M,t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(d=e,t):d},t.y=function(e){return arguments.length?(f=e,t):f},t.open=function(e){return arguments.length?(p=e,t):p},t.close=function(e){return arguments.length?(g=e,t):g},t.high=function(e){return arguments.length?(v=e,t):v},t.low=function(e){return arguments.length?(m=e,t):m},t.margin=function(e){return arguments.length?(o.top=void 0!==e.top?e.top:o.top,o.right=void 0!==e.right?e.right:o.right,o.bottom=void 0!==e.bottom?e.bottom:o.bottom,o.left=void 0!==e.left?e.left:o.left,t):o},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(u=e,t):u},t.yScale=function(e){return arguments.length?(h=e,t):h},t.xDomain=function(e){return arguments.length?(n=e,t):n},t.yDomain=function(e){return arguments.length?(r=e,t):r},t.xRange=function(e){return arguments.length?(i=e,t):i},t.yRange=function(e){return arguments.length?(a=e,t):a},t.forceX=function(e){return arguments.length?(y=e,t):y},t.forceY=function(e){return arguments.length?(x=e,t):x},t.padData=function(e){return arguments.length?(b=e,t):b},t.clipEdge=function(e){return arguments.length?(w=e,t):w},t.color=function(n){return arguments.length?(k=e.utils.getColor(n),t):k},t.id=function(e){return arguments.length?(c=e,t):c},t},e.models.pie=function(){"use strict";function t(e){return e.each(function(t){function e(t){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,m||(t.innerRadius=0);var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return T(e(t))}}var s=r-n.left-n.right,u=i-n.top-n.bottom,M=Math.min(s,u)/2,S=M-M/5,C=d3.select(this),A=C.selectAll(".nv-wrap.nv-pie").data(t),_=A.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+l),E=_.append("g"),D=A.select("g");E.append("g").attr("class","nv-pie"),E.append("g").attr("class","nv-pieLabels"),A.attr("transform","translate("+n.left+","+n.top+")"),D.select(".nv-pie").attr("transform","translate("+s/2+","+u/2+")"),D.select(".nv-pieLabels").attr("transform","translate("+s/2+","+u/2+")"),C.on("click",function(t,e){k.chartClick({data:t,index:e,pos:d3.event,id:l})});var T=d3.svg.arc().outerRadius(S);x&&T.startAngle(x),b&&T.endAngle(b),m&&T.innerRadius(M*w);var N=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:o(t)}),F=A.select(".nv-pie").selectAll(".nv-slice").data(N),z=A.select(".nv-pieLabels").selectAll(".nv-label").data(N);F.exit().remove(),z.exit().remove();var I=F.enter().append("g").attr("class","nv-slice").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),k.elementMouseover({label:a(t.data),value:o(t.data),point:t.data,pointIndex:e,pos:[d3.event.pageX,d3.event.pageY],id:l})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),k.elementMouseout({label:a(t.data),value:o(t.data),point:t.data,index:e,id:l})}).on("click",function(t,e){k.elementClick({label:a(t.data),value:o(t.data),point:t.data,index:e,pos:d3.event,id:l}),d3.event.stopPropagation()}).on("dblclick",function(t,e){k.elementDblClick({label:a(t.data),value:o(t.data),point:t.data,index:e,pos:d3.event,id:l}),d3.event.stopPropagation()});F.attr("fill",function(t,e){return c(t,e)}).attr("stroke",function(t,e){return c(t,e)});I.append("path").each(function(t){this._current=t});if(F.select("path").transition().attr("d",T).attrTween("d",e),h){var R=d3.svg.arc().innerRadius(0);f&&(R=T),p&&(R=d3.svg.arc().outerRadius(T.outerRadius())),z.enter().append("g").classed("nv-label",!0).each(function(t,e){var n=d3.select(this);n.attr("transform",function(t){if(y){t.outerRadius=S+10,t.innerRadius=S+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+R.centroid(t)+") rotate("+e+")"}return t.outerRadius=M+10,t.innerRadius=M+15,"translate("+R.centroid(t)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",y?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var L={},H=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)};z.transition().attr("transform",function(t){if(y){t.outerRadius=S+10,t.innerRadius=S+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+R.centroid(t)+") rotate("+e+")"}t.outerRadius=M+10,t.innerRadius=M+15;var n=R.centroid(t),r=H(n);return L[r]&&(n[1]-=14),L[H(n)]=!0,"translate("+n+")"}),z.select(".nv-label text").style("text-anchor",y?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(t,e){var n=(t.endAngle-t.startAngle)/(2*Math.PI),r={key:a(t.data),value:o(t.data),percent:d3.format("%")(n)};return t.value&&n>v?r[g]:""})}}),t}var n={top:0,right:0,bottom:0,left:0},r=500,i=500,a=function(t){return t.x},o=function(t){return t.y},s=function(t){return t.description},l=Math.floor(1e4*Math.random()),c=e.utils.defaultColor(),u=d3.format(",.2f"),h=!0,f=!0,p=!1,g="key",v=.02,m=!1,y=!1,x=!1,b=!1,w=.5,k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=k,t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left,t):n},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(i=e,t):i},t.values=function(n){return e.log("pie.values() is no longer supported."),t},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=d3.functor(e),t):o},t.description=function(e){return arguments.length?(s=e,t):s},t.showLabels=function(e){return arguments.length?(h=e,t):h},t.labelSunbeamLayout=function(e){return arguments.length?(y=e,t):y},t.donutLabelsOutside=function(e){return arguments.length?(p=e,t):p},t.pieLabelsOutside=function(e){return arguments.length?(f=e,t):f},t.labelType=function(e){return arguments.length?(g=e,g=g||"key",t):g},t.donut=function(e){return arguments.length?(m=e,t):m},t.donutRatio=function(e){return arguments.length?(w=e,t):w},t.startAngle=function(e){return arguments.length?(x=e,t):x},t.endAngle=function(e){return arguments.length?(b=e,t):b},t.id=function(e){return arguments.length?(l=e,t):l},t.color=function(n){return arguments.length?(c=e.utils.getColor(n),t):c},t.valueFormat=function(e){return arguments.length?(u=e,t):u},t.labelThreshold=function(e){return arguments.length?(v=e,t):v},t},e.models.pieChart=function(){"use strict";function t(e){return e.each(function(e){var l=d3.select(this),c=(a||parseInt(l.style("width"))||960)-i.left-i.right,u=(o||parseInt(l.style("height"))||400)-i.top-i.bottom;if(t.update=function(){l.transition().call(t)},t.container=this,h.disabled=e.map(function(t){return!!t.disabled}),!d){var g;d={};for(g in h)h[g]instanceof Array?d[g]=h[g].slice(0):d[g]=h[g]}if(!e||!e.length){var v=l.selectAll(".nv-noData").data([f]);return v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",i.left+c/2).attr("y",i.top+u/2).text(function(t){return t}),t}l.selectAll(".nv-noData").remove();var m=l.selectAll("g.nv-wrap.nv-pieChart").data([e]),y=m.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),x=m.select("g");y.append("g").attr("class","nv-pieWrap"),y.append("g").attr("class","nv-legendWrap"),s&&(r.width(c).key(n.x()),m.select(".nv-legendWrap").datum(e).call(r),i.top!=r.height()&&(i.top=r.height(),u=(o||parseInt(l.style("height"))||400)-i.top-i.bottom),m.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")")),m.attr("transform","translate("+i.left+","+i.top+")"),n.width(c).height(u);var b=x.select(".nv-pieWrap").datum([e]);d3.transition(b).call(n),r.dispatch.on("stateChange",function(e){h=e,p.stateChange(h),t.update()}),n.dispatch.on("elementMouseout.tooltip",function(t){p.tooltipHide(t)}),p.on("changeState",function(n){void 0!==n.disabled&&(e.forEach(function(t,e){t.disabled=n.disabled[e]}),h.disabled=n.disabled),t.update()})}),t}var n=e.models.pie(),r=e.models.legend(),i={top:30,right:20,bottom:20,left:20},a=null,o=null,s=!0,l=e.utils.defaultColor(),c=!0,u=function(t,e,n,r){return"<h3>"+t+"</h3><p>"+e+"</p>"},h={},d=null,f="No Data Available.",p=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),g=function(r,i){var a=n.description()(r.point)||n.x()(r.point),o=r.pos[0]+(i&&i.offsetLeft||0),s=r.pos[1]+(i&&i.offsetTop||0),l=n.valueFormat()(n.y()(r.point)),c=u(a,l,r,t);e.tooltip.show([o,s],c,r.value<0?"n":"s",null,i)};return n.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],p.tooltipShow(t)}),p.on("tooltipShow",function(t){c&&g(t)}),p.on("tooltipHide",function(){c&&e.tooltip.cleanup()}),t.legend=r,t.dispatch=p,t.pie=n,d3.rebind(t,n,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(i.top=void 0!==e.top?e.top:i.top,i.right=void 0!==e.right?e.right:i.right,i.bottom=void 0!==e.bottom?e.bottom:i.bottom,i.left=void 0!==e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(o=e,t):o},t.color=function(i){return arguments.length?(l=e.utils.getColor(i),r.color(l),n.color(l),t):l},t.showLegend=function(e){return arguments.length?(s=e,t):s},t.tooltips=function(e){return arguments.length?(c=e,t):c},t.tooltipContent=function(e){return arguments.length?(u=e,t):u},t.state=function(e){return arguments.length?(h=e,t):h},t.defaultState=function(e){return arguments.length?(d=e,t):d},t.noData=function(e){return arguments.length?(f=e,t):f},t},e.models.scatter=function(){"use strict";function t(B){return B.each(function(t){function B(){if(!k)return!1;var e=d3.merge(t.map(function(t,e){return t.values.map(function(t,n){var r=p(t,n),i=g(t,n);return[h(r)+1e-7*Math.random(),d(i)+1e-7*Math.random(),e,n,t]}).filter(function(t,e){return S(t[4],e)})}));if(!0===P){if(E){j.select("defs").selectAll(".nv-point-clips").data([u]).enter().append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+u);var n=j.select("#nv-points-clip-"+u).selectAll("circle").data(e);n.enter().append("circle").attr("r",D),n.exit().remove(),n.attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}),j.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+u+")")}e.length&&(e.push([h.range()[0]-20,d.range()[0]-20,null,null]),e.push([h.range()[1]+20,d.range()[1]+20,null,null]),e.push([h.range()[0]-20,d.range()[0]+20,null,null]),e.push([h.range()[1]+20,d.range()[1]-20,null,null]));var r=d3.geom.polygon([[-10,-10],[-10,l+10],[s+10,l+10],[s+10,-10]]),i=d3.geom.voronoi(e).map(function(t,n){return{data:r.clip(t),series:e[n][2],point:e[n][3]}}),a=j.select(".nv-point-paths").selectAll("path").data(i);a.enter().append("path").attr("class",function(t,e){return"nv-path-"+e}),a.exit().remove(),a.attr("d",function(t){return 0===t.data.length?"M 0 0":"M"+t.data.join("L")+"Z"});var c=function(e,n){if(W)return 0;var r=t[e.series];if(void 0!==r){var i=r.values[e.point];n({point:i,series:r,pos:[h(p(i,e.point))+o.left,d(g(i,e.point))+o.top],seriesIndex:e.series,pointIndex:e.point})}};a.on("click",function(t){c(t,H.elementClick)}).on("mouseover",function(t){c(t,H.elementMouseover)}).on("mouseout",function(t,e){c(t,H.elementMouseout)})}else j.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,n){if(W||!t[e.series])return 0;var r=t[e.series],i=r.values[n];H.elementClick({point:i,series:r,pos:[h(p(i,n))+o.left,d(g(i,n))+o.top],seriesIndex:e.series,pointIndex:n})}).on("mouseover",function(e,n){if(W||!t[e.series])return 0;var r=t[e.series],i=r.values[n];H.elementMouseover({point:i,series:r,pos:[h(p(i,n))+o.left,d(g(i,n))+o.top],seriesIndex:e.series,pointIndex:n})}).on("mouseout",function(e,n){if(W||!t[e.series])return 0;var r=t[e.series],i=r.values[n];H.elementMouseout({point:i,series:r,seriesIndex:e.series,pointIndex:n})});W=!1}var Y=s-o.left-o.right,G=l-o.top-o.bottom,V=d3.select(this);t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var O=T&&N&&I?[]:d3.merge(t.map(function(t){return t.values.map(function(t,e){return{x:p(t,e),y:g(t,e),size:v(t,e)}})}));h.domain(T||d3.extent(O.map(function(t){return t.x}).concat(x))),C&&t[0]?h.range(F||[(Y*A+Y)/(2*t[0].values.length),Y-Y*(1+A)/(2*t[0].values.length)]):h.range(F||[0,Y]),d.domain(N||d3.extent(O.map(function(t){return t.y}).concat(b))).range(z||[G,0]),f.domain(I||d3.extent(O.map(function(t){return t.size}).concat(w))).range(R||[16,256]),h.domain()[0]!==h.domain()[1]&&d.domain()[0]!==d.domain()[1]||(L=!0),h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),isNaN(h.domain()[0])&&h.domain([-1,1]),isNaN(d.domain()[0])&&d.domain([-1,1]),n=n||h,r=r||d,i=i||f;var j=V.selectAll("g.nv-wrap.nv-scatter").data([t]),q=j.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+u+(L?" nv-single-point":"")),X=q.append("defs"),U=q.append("g"),Z=j.select("g");U.append("g").attr("class","nv-groups"),U.append("g").attr("class","nv-point-paths"),j.attr("transform","translate("+o.left+","+o.top+")"),X.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),j.select("#nv-edge-clip-"+u+" rect").attr("width",Y).attr("height",G>0?G:0),Z.attr("clip-path",_?"url(#nv-edge-clip-"+u+")":""),W=!0;var K=j.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});if(K.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),K.exit().remove(),K.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),K.transition().style("fill",function(t,e){return c(t,e)}).style("stroke",function(t,e){return c(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5),y){var Q=K.selectAll("circle.nv-point").data(function(t){return t.values},M);Q.enter().append("circle").style("fill",function(t,e){return t.color}).style("stroke",function(t,e){return t.color}).attr("cx",function(t,r){return e.utils.NaNtoZero(n(p(t,r)))}).attr("cy",function(t,n){return e.utils.NaNtoZero(r(g(t,n)))}).attr("r",function(t,e){return Math.sqrt(f(v(t,e))/Math.PI)}),Q.exit().remove(),K.exit().selectAll("path.nv-point").transition().attr("cx",function(t,n){return e.utils.NaNtoZero(h(p(t,n)))}).attr("cy",function(t,n){return e.utils.NaNtoZero(d(g(t,n)))}).remove(),Q.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),Q.transition().attr("cx",function(t,n){return e.utils.NaNtoZero(h(p(t,n)))}).attr("cy",function(t,n){return e.utils.NaNtoZero(d(g(t,n)))}).attr("r",function(t,e){return Math.sqrt(f(v(t,e))/Math.PI)})}else{var Q=K.selectAll("path.nv-point").data(function(t){return t.values});Q.enter().append("path").style("fill",function(t,e){return t.color}).style("stroke",function(t,e){return t.color}).attr("transform",function(t,e){return"translate("+n(p(t,e))+","+r(g(t,e))+")"}).attr("d",d3.svg.symbol().type(m).size(function(t,e){return f(v(t,e))})),Q.exit().remove(),K.exit().selectAll("path.nv-point").transition().attr("transform",function(t,e){return"translate("+h(p(t,e))+","+d(g(t,e))+")"}).remove(),Q.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),Q.transition().attr("transform",function(t,e){return"translate("+h(p(t,e))+","+d(g(t,e))+")"}).attr("d",d3.svg.symbol().type(m).size(function(t,e){return f(v(t,e))}))}clearTimeout(a),a=setTimeout(B,300),n=h.copy(),r=d.copy(),i=f.copy()}),t}var n,r,i,a,o={top:0,right:0,bottom:0,left:0},s=960,l=500,c=e.utils.defaultColor(),u=Math.floor(1e5*Math.random()),h=d3.scale.linear(),d=d3.scale.linear(),f=d3.scale.linear(),p=function(t){return t.x},g=function(t){return t.y},v=function(t){return t.size||1},m=function(t){return t.shape||"circle"},y=!0,x=[],b=[],w=[],k=!0,M=null,S=function(t){return!t.notActive},C=!1,A=.1,_=!1,E=!0,D=function(){return 25},T=null,N=null,F=null,z=null,I=null,R=null,L=!1,H=d3.dispatch("elementClick","elementMouseover","elementMouseout"),P=!0,W=!1;return t.clearHighlights=function(){d3.selectAll(".nv-chart-"+u+" .nv-point.hover").classed("hover",!1)},t.highlightPoint=function(t,e,n){d3.select(".nv-chart-"+u+" .nv-series-"+t+" .nv-point-"+e).classed("hover",n)},H.on("elementMouseover.point",function(e){k&&t.highlightPoint(e.seriesIndex,e.pointIndex,!0)}),H.on("elementMouseout.point",function(e){k&&t.highlightPoint(e.seriesIndex,e.pointIndex,!1)}),t.dispatch=H,t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(p=d3.functor(e),t):p},t.y=function(e){return arguments.length?(g=d3.functor(e),t):g},t.size=function(e){return arguments.length?(v=d3.functor(e),t):v},t.margin=function(e){return arguments.length?(o.top=void 0!==e.top?e.top:o.top,o.right=void 0!==e.right?e.right:o.right,o.bottom=void 0!==e.bottom?e.bottom:o.bottom,o.left=void 0!==e.left?e.left:o.left,t):o},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(h=e,t):h},t.yScale=function(e){return arguments.length?(d=e,t):d},t.zScale=function(e){return arguments.length?(f=e,t):f},t.xDomain=function(e){return arguments.length?(T=e,t):T},t.yDomain=function(e){return arguments.length?(N=e,t):N},t.sizeDomain=function(e){return arguments.length?(I=e,t):I},t.xRange=function(e){return arguments.length?(F=e,t):F},t.yRange=function(e){return arguments.length?(z=e,t):z},t.sizeRange=function(e){return arguments.length?(R=e,t):R},t.forceX=function(e){return arguments.length?(x=e,t):x},t.forceY=function(e){return arguments.length?(b=e,t):b},t.forceSize=function(e){return arguments.length?(w=e,t):w},t.interactive=function(e){return arguments.length?(k=e,t):k},t.pointKey=function(e){return arguments.length?(M=e,t):M},t.pointActive=function(e){return arguments.length?(S=e,t):S},t.padData=function(e){return arguments.length?(C=e,t):C},t.padDataOuter=function(e){return arguments.length?(A=e,t):A},t.clipEdge=function(e){return arguments.length?(_=e,t):_},t.clipVoronoi=function(e){return arguments.length?(E=e,t):E},t.useVoronoi=function(e){return arguments.length?(P=e,!1===P&&(E=!1),t):P},t.clipRadius=function(e){return arguments.length?(D=e,t):D},t.color=function(n){return arguments.length?(c=e.utils.getColor(n),t):c},t.shape=function(e){return arguments.length?(m=e,t):m},t.onlyCircles=function(e){return arguments.length?(y=e,t):y},t.id=function(e){return arguments.length?(u=e,t):u},t.singlePoint=function(e){return arguments.length?(L=e,t):L},t},e.models.scatterChart=function(){"use strict";function t(e){return e.each(function(e){function _(){if(C)return q.select(".nv-point-paths").style("pointer-events","all"),!1;q.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);f.distortion(S).focus(t[0]),p.distortion(S).focus(t[1]),q.select(".nv-scatterWrap").call(n),b&&q.select(".nv-x.nv-axis").call(r),w&&q.select(".nv-y.nv-axis").call(i),q.select(".nv-distributionX").datum(e.filter(function(t){return!t.disabled})).call(s),q.select(".nv-distributionY").datum(e.filter(function(t){return!t.disabled})).call(l)}var E=d3.select(this),D=this,W=(u||parseInt(E.style("width"))||960)-c.left-c.right,B=(h||parseInt(E.style("height"))||400)-c.top-c.bottom;if(t.update=function(){E.transition().duration(I).call(t)},t.container=this,T.disabled=e.map(function(t){return!!t.disabled}),!N){var Y;N={};for(Y in T)T[Y]instanceof Array?N[Y]=T[Y].slice(0):N[Y]=T[Y]}if(!e||!e.length||!e.filter(function(t){return t.values.length}).length){var G=E.selectAll(".nv-noData").data([z]);return G.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),G.attr("x",c.left+W/2).attr("y",c.top+B/2).text(function(t){return t}),t}E.selectAll(".nv-noData").remove(),R=R||f,L=L||p;var V=E.selectAll("g.nv-wrap.nv-scatterChart").data([e]),O=V.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+n.id()),j=O.append("g"),q=V.select("g");if(j.append("rect").attr("class","nvd3 nv-background"),
j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-scatterWrap"),j.append("g").attr("class","nv-distWrap"),j.append("g").attr("class","nv-legendWrap"),j.append("g").attr("class","nv-controlsWrap"),x){var X=M?W/2:W;a.width(X),V.select(".nv-legendWrap").datum(e).call(a),c.top!=a.height()&&(c.top=a.height(),B=(h||parseInt(E.style("height"))||400)-c.top-c.bottom),V.select(".nv-legendWrap").attr("transform","translate("+(W-X)+","+-c.top+")")}if(M&&(o.width(180).color(["#444"]),q.select(".nv-controlsWrap").datum(P).attr("transform","translate(0,"+-c.top+")").call(o)),V.attr("transform","translate("+c.left+","+c.top+")"),k&&q.select(".nv-y.nv-axis").attr("transform","translate("+W+",0)"),n.width(W).height(B).color(e.map(function(t,e){return t.color||d(t,e)}).filter(function(t,n){return!e[n].disabled})),0!==g&&n.xDomain(null),0!==v&&n.yDomain(null),V.select(".nv-scatterWrap").datum(e.filter(function(t){return!t.disabled})).call(n),0!==g){var U=f.domain()[1]-f.domain()[0];n.xDomain([f.domain()[0]-g*U,f.domain()[1]+g*U])}if(0!==v){var Z=p.domain()[1]-p.domain()[0];n.yDomain([p.domain()[0]-v*Z,p.domain()[1]+v*Z])}(0!==v||0!==g)&&V.select(".nv-scatterWrap").datum(e.filter(function(t){return!t.disabled})).call(n),b&&(r.scale(f).ticks(r.ticks()&&r.ticks().length?r.ticks():W/100).tickSize(-B,0),q.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(r)),w&&(i.scale(p).ticks(i.ticks()&&i.ticks().length?i.ticks():B/36).tickSize(-W,0),q.select(".nv-y.nv-axis").call(i)),m&&(s.getData(n.x()).scale(f).width(W).color(e.map(function(t,e){return t.color||d(t,e)}).filter(function(t,n){return!e[n].disabled})),j.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),q.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(e.filter(function(t){return!t.disabled})).call(s)),y&&(l.getData(n.y()).scale(p).width(B).color(e.map(function(t,e){return t.color||d(t,e)}).filter(function(t,n){return!e[n].disabled})),j.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),q.select(".nv-distributionY").attr("transform","translate("+(k?W:-l.size())+",0)").datum(e.filter(function(t){return!t.disabled})).call(l)),d3.fisheye&&(q.select(".nv-background").attr("width",W).attr("height",B),q.select(".nv-background").on("mousemove",_),q.select(".nv-background").on("click",function(){C=!C}),n.dispatch.on("elementClick.freezeFisheye",function(){C=!C})),o.dispatch.on("legendClick",function(e,a){e.disabled=!e.disabled,S=e.disabled?0:2.5,q.select(".nv-background").style("pointer-events",e.disabled?"none":"all"),q.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none"),e.disabled?(f.distortion(S).focus(0),p.distortion(S).focus(0),q.select(".nv-scatterWrap").call(n),q.select(".nv-x.nv-axis").call(r),q.select(".nv-y.nv-axis").call(i)):C=!1,t.update()}),a.dispatch.on("stateChange",function(e){T.disabled=e.disabled,F.stateChange(T),t.update()}),n.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",function(e,n){return t.pos[1]-B}),d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+s.size()),t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],F.tooltipShow(t)}),F.on("tooltipShow",function(t){A&&H(t,D.parentNode)}),F.on("changeState",function(n){void 0!==n.disabled&&(e.forEach(function(t,e){t.disabled=n.disabled[e]}),T.disabled=n.disabled),t.update()}),R=f.copy(),L=p.copy()}),t}var n=e.models.scatter(),r=e.models.axis(),i=e.models.axis(),a=e.models.legend(),o=e.models.legend(),s=e.models.distribution(),l=e.models.distribution(),c={top:30,right:20,bottom:50,left:75},u=null,h=null,d=e.utils.defaultColor(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):n.xScale(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):n.yScale(),g=0,v=0,m=!1,y=!1,x=!0,b=!0,w=!0,k=!1,M=!!d3.fisheye,S=0,C=!1,A=!0,_=function(t,e,n){return"<strong>"+e+"</strong>"},E=function(t,e,n){return"<strong>"+n+"</strong>"},D=null,T={},N=null,F=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),z="No Data Available.",I=250;n.xScale(f).yScale(p),r.orient("bottom").tickPadding(10),i.orient(k?"right":"left").tickPadding(10),s.axis("x"),l.axis("y"),o.updateState(!1);var R,L,H=function(a,o){var s=a.pos[0]+(o.offsetLeft||0),l=a.pos[1]+(o.offsetTop||0),u=a.pos[0]+(o.offsetLeft||0),h=p.range()[0]+c.top+(o.offsetTop||0),d=f.range()[0]+c.left+(o.offsetLeft||0),g=a.pos[1]+(o.offsetTop||0),v=r.tickFormat()(n.x()(a.point,a.pointIndex)),m=i.tickFormat()(n.y()(a.point,a.pointIndex));null!=_&&e.tooltip.show([u,h],_(a.series.key,v,m,a,t),"n",1,o,"x-nvtooltip"),null!=E&&e.tooltip.show([d,g],E(a.series.key,v,m,a,t),"e",1,o,"y-nvtooltip"),null!=D&&e.tooltip.show([s,l],D(a.series.key,v,m,a,t),a.value<0?"n":"s",null,o)},P=[{key:"Magnify",disabled:!0}];return n.dispatch.on("elementMouseout.tooltip",function(t){F.tooltipHide(t),d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",l.size())}),F.on("tooltipHide",function(){A&&e.tooltip.cleanup()}),t.dispatch=F,t.scatter=n,t.legend=a,t.controls=o,t.xAxis=r,t.yAxis=i,t.distX=s,t.distY=l,d3.rebind(t,n,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top=void 0!==e.top?e.top:c.top,c.right=void 0!==e.right?e.right:c.right,c.bottom=void 0!==e.bottom?e.bottom:c.bottom,c.left=void 0!==e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(n){return arguments.length?(d=e.utils.getColor(n),a.color(d),s.color(d),l.color(d),t):d},t.showDistX=function(e){return arguments.length?(m=e,t):m},t.showDistY=function(e){return arguments.length?(y=e,t):y},t.showControls=function(e){return arguments.length?(M=e,t):M},t.showLegend=function(e){return arguments.length?(x=e,t):x},t.showXAxis=function(e){return arguments.length?(b=e,t):b},t.showYAxis=function(e){return arguments.length?(w=e,t):w},t.rightAlignYAxis=function(e){return arguments.length?(k=e,i.orient(e?"right":"left"),t):k},t.fisheye=function(e){return arguments.length?(S=e,t):S},t.xPadding=function(e){return arguments.length?(g=e,t):g},t.yPadding=function(e){return arguments.length?(v=e,t):v},t.tooltips=function(e){return arguments.length?(A=e,t):A},t.tooltipContent=function(e){return arguments.length?(D=e,t):D},t.tooltipXContent=function(e){return arguments.length?(_=e,t):_},t.tooltipYContent=function(e){return arguments.length?(E=e,t):E},t.state=function(e){return arguments.length?(T=e,t):T},t.defaultState=function(e){return arguments.length?(N=e,t):N},t.noData=function(e){return arguments.length?(z=e,t):z},t.transitionDuration=function(e){return arguments.length?(I=e,t):I},t},e.models.scatterPlusLineChart=function(){"use strict";function t(e){return e.each(function(e){function C(){if(M)return O.select(".nv-point-paths").style("pointer-events","all"),!1;O.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);f.distortion(k).focus(t[0]),p.distortion(k).focus(t[1]),O.select(".nv-scatterWrap").datum(e.filter(function(t){return!t.disabled})).call(n),y&&O.select(".nv-x.nv-axis").call(r),x&&O.select(".nv-y.nv-axis").call(i),O.select(".nv-distributionX").datum(e.filter(function(t){return!t.disabled})).call(s),O.select(".nv-distributionY").datum(e.filter(function(t){return!t.disabled})).call(l)}var A=d3.select(this),_=this,H=(u||parseInt(A.style("width"))||960)-c.left-c.right,P=(h||parseInt(A.style("height"))||400)-c.top-c.bottom;if(t.update=function(){A.transition().duration(F).call(t)},t.container=this,E.disabled=e.map(function(t){return!!t.disabled}),!D){var W;D={};for(W in E)E[W]instanceof Array?D[W]=E[W].slice(0):D[W]=E[W]}if(!e||!e.length||!e.filter(function(t){return t.values.length}).length){var B=A.selectAll(".nv-noData").data([N]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",c.left+H/2).attr("y",c.top+P/2).text(function(t){return t}),t}A.selectAll(".nv-noData").remove(),f=n.xScale(),p=n.yScale(),z=z||f,I=I||p;var Y=A.selectAll("g.nv-wrap.nv-scatterChart").data([e]),G=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+n.id()),V=G.append("g"),O=Y.select("g");V.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),V.append("g").attr("class","nv-x nv-axis"),V.append("g").attr("class","nv-y nv-axis"),V.append("g").attr("class","nv-scatterWrap"),V.append("g").attr("class","nv-regressionLinesWrap"),V.append("g").attr("class","nv-distWrap"),V.append("g").attr("class","nv-legendWrap"),V.append("g").attr("class","nv-controlsWrap"),Y.attr("transform","translate("+c.left+","+c.top+")"),b&&O.select(".nv-y.nv-axis").attr("transform","translate("+H+",0)"),m&&(a.width(H/2),Y.select(".nv-legendWrap").datum(e).call(a),c.top!=a.height()&&(c.top=a.height(),P=(h||parseInt(A.style("height"))||400)-c.top-c.bottom),Y.select(".nv-legendWrap").attr("transform","translate("+H/2+","+-c.top+")")),w&&(o.width(180).color(["#444"]),O.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+-c.top+")").call(o)),n.width(H).height(P).color(e.map(function(t,e){return t.color||d(t,e)}).filter(function(t,n){return!e[n].disabled})),Y.select(".nv-scatterWrap").datum(e.filter(function(t){return!t.disabled})).call(n),Y.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+n.id()+")");var j=Y.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});j.enter().append("g").attr("class","nv-regLines");var q=j.selectAll(".nv-regLine").data(function(t){return[t]});q.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);q.transition().attr("x1",f.range()[0]).attr("x2",f.range()[1]).attr("y1",function(t,e){return p(f.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t,e){return p(f.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return d(t,n)}).style("stroke-opacity",function(t,e){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1}),y&&(r.scale(f).ticks(r.ticks()?r.ticks():H/100).tickSize(-P,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(r)),x&&(i.scale(p).ticks(i.ticks()?i.ticks():P/36).tickSize(-H,0),O.select(".nv-y.nv-axis").call(i)),g&&(s.getData(n.x()).scale(f).width(H).color(e.map(function(t,e){return t.color||d(t,e)}).filter(function(t,n){return!e[n].disabled})),V.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),O.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(e.filter(function(t){return!t.disabled})).call(s)),v&&(l.getData(n.y()).scale(p).width(P).color(e.map(function(t,e){return t.color||d(t,e)}).filter(function(t,n){return!e[n].disabled})),V.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),O.select(".nv-distributionY").attr("transform","translate("+(b?H:-l.size())+",0)").datum(e.filter(function(t){return!t.disabled})).call(l)),d3.fisheye&&(O.select(".nv-background").attr("width",H).attr("height",P),O.select(".nv-background").on("mousemove",C),O.select(".nv-background").on("click",function(){M=!M}),n.dispatch.on("elementClick.freezeFisheye",function(){M=!M})),o.dispatch.on("legendClick",function(e,a){e.disabled=!e.disabled,k=e.disabled?0:2.5,O.select(".nv-background").style("pointer-events",e.disabled?"none":"all"),O.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none"),e.disabled?(f.distortion(k).focus(0),p.distortion(k).focus(0),O.select(".nv-scatterWrap").call(n),O.select(".nv-x.nv-axis").call(r),O.select(".nv-y.nv-axis").call(i)):M=!1,t.update()}),a.dispatch.on("stateChange",function(e){E=e,T.stateChange(E),t.update()}),n.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos[1]-P),d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+s.size()),t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],T.tooltipShow(t)}),T.on("tooltipShow",function(t){S&&R(t,_.parentNode)}),T.on("changeState",function(n){void 0!==n.disabled&&(e.forEach(function(t,e){t.disabled=n.disabled[e]}),E.disabled=n.disabled),t.update()}),z=f.copy(),I=p.copy()}),t}var n=e.models.scatter(),r=e.models.axis(),i=e.models.axis(),a=e.models.legend(),o=e.models.legend(),s=e.models.distribution(),l=e.models.distribution(),c={top:30,right:20,bottom:50,left:75},u=null,h=null,d=e.utils.defaultColor(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):n.xScale(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):n.yScale(),g=!1,v=!1,m=!0,y=!0,x=!0,b=!1,w=!!d3.fisheye,k=0,M=!1,S=!0,C=function(t,e,n){return"<strong>"+e+"</strong>"},A=function(t,e,n){return"<strong>"+n+"</strong>"},_=function(t,e,n,r){return"<h3>"+t+"</h3><p>"+r+"</p>"},E={},D=null,T=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),N="No Data Available.",F=250;n.xScale(f).yScale(p),r.orient("bottom").tickPadding(10),i.orient(b?"right":"left").tickPadding(10),s.axis("x"),l.axis("y"),o.updateState(!1);var z,I,R=function(a,o){var s=a.pos[0]+(o.offsetLeft||0),l=a.pos[1]+(o.offsetTop||0),u=a.pos[0]+(o.offsetLeft||0),h=p.range()[0]+c.top+(o.offsetTop||0),d=f.range()[0]+c.left+(o.offsetLeft||0),g=a.pos[1]+(o.offsetTop||0),v=r.tickFormat()(n.x()(a.point,a.pointIndex)),m=i.tickFormat()(n.y()(a.point,a.pointIndex));null!=C&&e.tooltip.show([u,h],C(a.series.key,v,m,a,t),"n",1,o,"x-nvtooltip"),null!=A&&e.tooltip.show([d,g],A(a.series.key,v,m,a,t),"e",1,o,"y-nvtooltip"),null!=_&&e.tooltip.show([s,l],_(a.series.key,v,m,a.point.tooltip,a,t),a.value<0?"n":"s",null,o)},L=[{key:"Magnify",disabled:!0}];return n.dispatch.on("elementMouseout.tooltip",function(t){T.tooltipHide(t),d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",l.size())}),T.on("tooltipHide",function(){S&&e.tooltip.cleanup()}),t.dispatch=T,t.scatter=n,t.legend=a,t.controls=o,t.xAxis=r,t.yAxis=i,t.distX=s,t.distY=l,d3.rebind(t,n,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top=void 0!==e.top?e.top:c.top,c.right=void 0!==e.right?e.right:c.right,c.bottom=void 0!==e.bottom?e.bottom:c.bottom,c.left=void 0!==e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(n){return arguments.length?(d=e.utils.getColor(n),a.color(d),s.color(d),l.color(d),t):d},t.showDistX=function(e){return arguments.length?(g=e,t):g},t.showDistY=function(e){return arguments.length?(v=e,t):v},t.showControls=function(e){return arguments.length?(w=e,t):w},t.showLegend=function(e){return arguments.length?(m=e,t):m},t.showXAxis=function(e){return arguments.length?(y=e,t):y},t.showYAxis=function(e){return arguments.length?(x=e,t):x},t.rightAlignYAxis=function(e){return arguments.length?(b=e,i.orient(e?"right":"left"),t):b},t.fisheye=function(e){return arguments.length?(k=e,t):k},t.tooltips=function(e){return arguments.length?(S=e,t):S},t.tooltipContent=function(e){return arguments.length?(_=e,t):_},t.tooltipXContent=function(e){return arguments.length?(C=e,t):C},t.tooltipYContent=function(e){return arguments.length?(A=e,t):A},t.state=function(e){return arguments.length?(E=e,t):E},t.defaultState=function(e){return arguments.length?(D=e,t):D},t.noData=function(e){return arguments.length?(N=e,t):N},t.transitionDuration=function(e){return arguments.length?(F=e,t):F},t},e.models.sparkline=function(){"use strict";function t(e){return e.each(function(t){var e=s-o.left-o.right,c=l-o.top-o.bottom,g=d3.select(this);u.domain(n||d3.extent(t,d)).range(i||[0,e]),h.domain(r||d3.extent(t,f)).range(a||[c,0]);var v=g.selectAll("g.nv-wrap.nv-sparkline").data([t]),m=v.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");m.append("g"),v.select("g");v.attr("transform","translate("+o.left+","+o.top+")");var y=v.selectAll("path").data(function(t){return[t]});y.enter().append("path"),y.exit().remove(),y.style("stroke",function(t,e){return t.color||p(t,e)}).attr("d",d3.svg.line().x(function(t,e){return u(d(t,e))}).y(function(t,e){return h(f(t,e))}));var x=v.selectAll("circle.nv-point").data(function(t){function e(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var n=t.map(function(t,e){return f(t,e)}),r=e(n.lastIndexOf(h.domain()[1]));return[e(n.indexOf(h.domain()[0])),r,e(n.length-1)].filter(function(t){return null!=t})});x.enter().append("circle"),x.exit().remove(),x.attr("cx",function(t,e){return u(d(t,t.pointIndex))}).attr("cy",function(t,e){return h(f(t,t.pointIndex))}).attr("r",2).attr("class",function(t,e){return d(t,t.pointIndex)==u.domain()[1]?"nv-point nv-currentValue":f(t,t.pointIndex)==h.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),t}var n,r,i,a,o={top:2,right:0,bottom:2,left:0},s=400,l=32,c=!0,u=d3.scale.linear(),h=d3.scale.linear(),d=function(t){return t.x},f=function(t){return t.y},p=e.utils.getColor(["#000"]);return t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(o.top=void 0!==e.top?e.top:o.top,o.right=void 0!==e.right?e.right:o.right,o.bottom=void 0!==e.bottom?e.bottom:o.bottom,o.left=void 0!==e.left?e.left:o.left,t):o},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(l=e,t):l},t.x=function(e){return arguments.length?(d=d3.functor(e),t):d},t.y=function(e){return arguments.length?(f=d3.functor(e),t):f},t.xScale=function(e){return arguments.length?(u=e,t):u},t.yScale=function(e){return arguments.length?(h=e,t):h},t.xDomain=function(e){return arguments.length?(n=e,t):n},t.yDomain=function(e){return arguments.length?(r=e,t):r},t.xRange=function(e){return arguments.length?(i=e,t):i},t.yRange=function(e){return arguments.length?(a=e,t):a},t.animate=function(e){return arguments.length?(c=e,t):c},t.color=function(n){return arguments.length?(p=e.utils.getColor(n),t):p},t},e.models.sparklinePlus=function(){"use strict";function t(e){return e.each(function(d){function v(){if(!c){var t=A.selectAll(".nv-hoverValue").data(l),e=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+n(i.x()(d[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),l.length&&(e.append("line").attr("x1",0).attr("y1",-a.top).attr("x2",0).attr("y2",b),e.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-a.top).attr("text-anchor","end").attr("dy",".9em"),A.select(".nv-hoverValue .nv-xValue").text(u(i.x()(d[l[0]],l[0]))),e.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-a.top).attr("text-anchor","start").attr("dy",".9em"),A.select(".nv-hoverValue .nv-yValue").text(h(i.y()(d[l[0]],l[0]))))}}function m(){if(!c){var t=d3.mouse(this)[0]-a.left;l=[function(t,e){for(var n=Math.abs(i.x()(t[0],0)-e),r=0,a=0;a<t.length;a++)Math.abs(i.x()(t[a],a)-e)<n&&(n=Math.abs(i.x()(t[a],a)-e),r=a);return r}(d,Math.round(n.invert(t)))],v()}}var y=d3.select(this),x=(o||parseInt(y.style("width"))||960)-a.left-a.right,b=(s||parseInt(y.style("height"))||400)-a.top-a.bottom;if(t.update=function(){t(e)},t.container=this,!d||!d.length){var w=y.selectAll(".nv-noData").data([g]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",a.left+x/2).attr("y",a.top+b/2).text(function(t){return t}),t}y.selectAll(".nv-noData").remove();var k=i.y()(d[d.length-1],d.length-1);n=i.xScale(),r=i.yScale();var M=y.selectAll("g.nv-wrap.nv-sparklineplus").data([d]),S=M.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),C=S.append("g"),A=M.select("g");C.append("g").attr("class","nv-sparklineWrap"),C.append("g").attr("class","nv-valueWrap"),C.append("g").attr("class","nv-hoverArea"),M.attr("transform","translate("+a.left+","+a.top+")");var _=A.select(".nv-sparklineWrap");i.width(x).height(b),_.call(i);var E=A.select(".nv-valueWrap"),D=E.selectAll(".nv-currentValue").data([k]);D.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),D.attr("x",x+(p?a.right:0)).attr("y",f?function(t){return r(t)}:0).style("fill",i.color()(d[d.length-1],d.length-1)).text(h(k)),C.select(".nv-hoverArea").append("rect").on("mousemove",m).on("click",function(){c=!c}).on("mouseout",function(){l=[],v()}),A.select(".nv-hoverArea rect").attr("transform",function(t){return"translate("+-a.left+","+-a.top+")"}).attr("width",x+a.left+a.right).attr("height",b+a.top)}),t}var n,r,i=e.models.sparkline(),a={top:15,right:100,bottom:10,left:50},o=null,s=null,l=[],c=!1,u=d3.format(",r"),h=d3.format(",.2f"),d=!0,f=!0,p=!1,g="No Data Available.";return t.sparkline=i,d3.rebind(t,i,"x","y","xScale","yScale","color"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(a.top=void 0!==e.top?e.top:a.top,a.right=void 0!==e.right?e.right:a.right,a.bottom=void 0!==e.bottom?e.bottom:a.bottom,a.left=void 0!==e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(s=e,t):s},t.xTickFormat=function(e){return arguments.length?(u=e,t):u},t.yTickFormat=function(e){return arguments.length?(h=e,t):h},t.showValue=function(e){return arguments.length?(d=e,t):d},t.alignValue=function(e){return arguments.length?(f=e,t):f},t.rightAlignValue=function(e){return arguments.length?(p=e,t):p},t.noData=function(e){return arguments.length?(g=e,t):g},t},e.models.stackedArea=function(){"use strict";function t(e){return e.each(function(e){var h=a-i.left-i.right,y=o-i.top-i.bottom,x=d3.select(this);n=v.xScale(),r=v.yScale();var b=e;e.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var w=e.filter(function(t){return!t.disabled});e=d3.layout.stack().order(f).offset(d).values(function(t){return t.values}).x(c).y(u).out(function(t,e,n){var r=0===u(t)?0:n;t.display={y:r,y0:e}})(w);var k=x.selectAll("g.nv-wrap.nv-stackedarea").data([e]),M=k.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),S=M.append("defs"),C=M.append("g"),A=k.select("g");C.append("g").attr("class","nv-areaWrap"),C.append("g").attr("class","nv-scatterWrap"),k.attr("transform","translate("+i.left+","+i.top+")"),v.width(h).height(y).x(c).y(function(t){return t.display.y+t.display.y0}).forceY([0]).color(e.map(function(t,e){return t.color||s(t,t.seriesIndex)})),A.select(".nv-scatterWrap").datum(e).call(v),S.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),k.select("#nv-edge-clip-"+l+" rect").attr("width",h).attr("height",y),A.attr("clip-path",g?"url(#nv-edge-clip-"+l+")":"");var _=d3.svg.area().x(function(t,e){return n(c(t,e))}).y0(function(t){return r(t.display.y0)}).y1(function(t){return r(t.display.y+t.display.y0)}).interpolate(p),E=d3.svg.area().x(function(t,e){return n(c(t,e))}).y0(function(t){return r(t.display.y0)}).y1(function(t){return r(t.display.y0)}),D=A.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});D.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t,e){return E(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),m.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),m.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t,e){d3.select(this).classed("hover",!1),m.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),D.exit().remove(),D.style("fill",function(t,e){return t.color||s(t,t.seriesIndex)}).style("stroke",function(t,e){return t.color||s(t,t.seriesIndex)}),D.transition().attr("d",function(t,e){return _(t.values,e)}),v.dispatch.on("elementMouseover.area",function(t){A.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),v.dispatch.on("elementMouseout.area",function(t){A.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),t.d3_stackedOffset_stackPercent=function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(e=0,r=0;e<b.length;e++)r+=u(b[e].values[n]);if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s}}),t}var n,r,i={top:0,right:0,bottom:0,left:0},a=960,o=500,s=e.utils.defaultColor(),l=Math.floor(1e5*Math.random()),c=function(t){return t.x},u=function(t){return t.y},h="stack",d="zero",f="default",p="linear",g=!1,v=e.models.scatter(),m=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return v.size(2.2).sizeDomain([2.2,2.2]),v.dispatch.on("elementClick.area",function(t){m.areaClick(t)}),v.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],m.tooltipShow(t)}),v.dispatch.on("elementMouseout.tooltip",function(t){m.tooltipHide(t)}),t.dispatch=m,t.scatter=v,d3.rebind(t,v,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),t.options=e.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(c=d3.functor(e),t):c},t.y=function(e){return arguments.length?(u=d3.functor(e),t):u},t.margin=function(e){return arguments.length?(i.top=void 0!==e.top?e.top:i.top,i.right=void 0!==e.right?e.right:i.right,i.bottom=void 0!==e.bottom?e.bottom:i.bottom,i.left=void 0!==e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(o=e,t):o},t.clipEdge=function(e){return arguments.length?(g=e,t):g},t.color=function(n){return arguments.length?(s=e.utils.getColor(n),t):s},t.offset=function(e){return arguments.length?(d=e,t):d},t.order=function(e){return arguments.length?(f=e,t):f},t.style=function(e){if(!arguments.length)return h;switch(h=e){case"stack":t.offset("zero"),t.order("default");break;case"stream":t.offset("wiggle"),t.order("inside-out");break;case"stream-center":t.offset("silhouette"),t.order("inside-out");break;case"expand":t.offset("expand"),t.order("default");break;case"stack_percent":t.offset(t.d3_stackedOffset_stackPercent),t.order("default")}return t},t.interpolate=function(e){return arguments.length?(p=e,t):p},t},e.models.stackedAreaChart=function(){"use strict";function t(w){return w.each(function(w){var F=d3.select(this),z=this,I=(h||parseInt(F.style("width"))||960)-u.left-u.right,R=(d||parseInt(F.style("height"))||400)-u.top-u.bottom;if(t.update=function(){F.transition().duration(T).call(t)},t.container=this,M.disabled=w.map(function(t){return!!t.disabled}),!S){var L;S={};for(L in M)M[L]instanceof Array?S[L]=M[L].slice(0):S[L]=M[L]}if(!w||!w.length||!w.filter(function(t){return t.values.length}).length){var H=F.selectAll(".nv-noData").data([C]);return H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",u.left+I/2).attr("y",u.top+R/2).text(function(t){return t}),t}F.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var P=F.selectAll("g.nv-wrap.nv-stackedAreaChart").data([w]),W=P.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),B=P.select("g");if(W.append("rect").style("opacity",0),W.append("g").attr("class","nv-x nv-axis"),W.append("g").attr("class","nv-y nv-axis"),W.append("g").attr("class","nv-stackedWrap"),W.append("g").attr("class","nv-legendWrap"),W.append("g").attr("class","nv-controlsWrap"),W.append("g").attr("class","nv-interactive"),B.select("rect").attr("width",I).attr("height",R),g){var Y=p?I-_:I;s.width(Y),B.select(".nv-legendWrap").datum(w).call(s),u.top!=s.height()&&(u.top=s.height(),R=(d||parseInt(F.style("height"))||400)-u.top-u.bottom),B.select(".nv-legendWrap").attr("transform","translate("+(I-Y)+","+-u.top+")")}if(p){var G=[{key:D.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=i.style(),style:"stack"},{key:D.stream||"Stream",metaKey:"Stream",disabled:"stream"!=i.style(),style:"stream"},{key:D.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=i.style(),style:"expand"},{key:D.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=i.style(),style:"stack_percent"}];_=E.length/3*260,G=G.filter(function(t){return-1!==E.indexOf(t.metaKey)}),l.width(_).color(["#444","#444","#444"]),B.select(".nv-controlsWrap").datum(G).call(l),u.top!=Math.max(l.height(),s.height())&&(u.top=Math.max(l.height(),s.height()),R=(d||parseInt(F.style("height"))||400)-u.top-u.bottom),B.select(".nv-controlsWrap").attr("transform","translate(0,"+-u.top+")")}P.attr("transform","translate("+u.left+","+u.top+")"),y&&B.select(".nv-y.nv-axis").attr("transform","translate("+I+",0)"),x&&(c.width(I).height(R).margin({left:u.left,top:u.top}).svgContainer(F).xScale(n),P.select(".nv-interactive").call(c)),i.width(I).height(R),B.select(".nv-stackedWrap").datum(w).transition().call(i),v&&(a.scale(n).ticks(I/100).tickSize(-R,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+R+")"),B.select(".nv-x.nv-axis").transition().duration(0).call(a)),m&&(o.scale(r).ticks("wiggle"==i.offset()?0:R/36).tickSize(-I,0).setTickFormat("expand"==i.style()||"stack_percent"==i.style()?d3.format("%"):k),B.select(".nv-y.nv-axis").transition().duration(0).call(o)),i.dispatch.on("areaClick.toggle",function(e){1===w.filter(function(t){return!t.disabled}).length?w.forEach(function(t){t.disabled=!1}):w.forEach(function(t,n){t.disabled=n!=e.seriesIndex}),M.disabled=w.map(function(t){return!!t.disabled}),A.stateChange(M),t.update()}),s.dispatch.on("stateChange",function(e){M.disabled=e.disabled,A.stateChange(M),t.update()}),l.dispatch.on("legendClick",function(e,n){e.disabled&&(G=G.map(function(t){return t.disabled=!0,t}),e.disabled=!1,i.style(e.style),M.style=i.style(),A.stateChange(M),t.update())}),c.dispatch.on("elementMousemove",function(n){i.clearHighlights();var r,s,l,h=[];if(w.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a,o){s=e.interactiveBisect(a.values,n.pointXValue,t.x()),i.highlightPoint(o,s,!0);var c=a.values[s];if(void 0!==c){void 0===r&&(r=c),void 0===l&&(l=t.xScale()(t.x()(c,s)));var u="expand"==i.style()?c.display.y:t.y()(c,s);h.push({key:a.key,value:u,color:f(a,a.seriesIndex),stackedValue:c.display})}}),h.reverse(),h.length>2){var d=t.yScale().invert(n.mouseY),p=null;h.forEach(function(t,e){d=Math.abs(d);var n=Math.abs(t.stackedValue.y0),r=Math.abs(t.stackedValue.y);if(d>=n&&d<=r+n)return void(p=e)}),null!=p&&(h[p].highlight=!0)}var g=a.tickFormat()(t.x()(r,s)),v="expand"==i.style()?function(t,e){return d3.format(".1%")(t)}:function(t,e){return o.tickFormat()(t)};c.tooltip.position({left:l+u.left,top:n.mouseY+u.top}).chartContainer(z.parentNode).enabled(b).valueFormatter(v).data({value:g,series:h})(),c.renderGuideLine(l)}),
c.dispatch.on("elementMouseout",function(t){A.tooltipHide(),i.clearHighlights()}),A.on("tooltipShow",function(t){b&&N(t,z.parentNode)}),A.on("changeState",function(e){void 0!==e.disabled&&w.length===e.disabled.length&&(w.forEach(function(t,n){t.disabled=e.disabled[n]}),M.disabled=e.disabled),void 0!==e.style&&i.style(e.style),t.update()})}),t}var n,r,i=e.models.stackedArea(),a=e.models.axis(),o=e.models.axis(),s=e.models.legend(),l=e.models.legend(),c=e.interactiveGuideline(),u={top:30,right:25,bottom:50,left:60},h=null,d=null,f=e.utils.defaultColor(),p=!0,g=!0,v=!0,m=!0,y=!1,x=!1,b=!0,w=function(t,e,n,r,i){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},k=d3.format(",.2f"),M={style:i.style()},S=null,C="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),_=250,E=["Stacked","Stream","Expanded"],D={},T=250;a.orient("bottom").tickPadding(7),o.orient(y?"right":"left"),l.updateState(!1);var N=function(n,r){var s=n.pos[0]+(r.offsetLeft||0),l=n.pos[1]+(r.offsetTop||0),c=a.tickFormat()(i.x()(n.point,n.pointIndex)),u=o.tickFormat()(i.y()(n.point,n.pointIndex)),h=w(n.series.key,c,u,n,t);e.tooltip.show([s,l],h,n.value<0?"n":"s",null,r)};return i.dispatch.on("tooltipShow",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],A.tooltipShow(t)}),i.dispatch.on("tooltipHide",function(t){A.tooltipHide(t)}),A.on("tooltipHide",function(){b&&e.tooltip.cleanup()}),t.dispatch=A,t.stacked=i,t.legend=s,t.controls=l,t.xAxis=a,t.yAxis=o,t.interactiveLayer=c,d3.rebind(t,i,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),t.options=e.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top=void 0!==e.top?e.top:u.top,u.right=void 0!==e.right?e.right:u.right,u.bottom=void 0!==e.bottom?e.bottom:u.bottom,u.left=void 0!==e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(h=e,t):h},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(n){return arguments.length?(f=e.utils.getColor(n),s.color(f),i.color(f),t):f},t.showControls=function(e){return arguments.length?(p=e,t):p},t.showLegend=function(e){return arguments.length?(g=e,t):g},t.showXAxis=function(e){return arguments.length?(v=e,t):v},t.showYAxis=function(e){return arguments.length?(m=e,t):m},t.rightAlignYAxis=function(e){return arguments.length?(y=e,o.orient(e?"right":"left"),t):y},t.useInteractiveGuideline=function(e){return arguments.length?(x=e,!0===e&&(t.interactive(!1),t.useVoronoi(!1)),t):x},t.tooltip=function(e){return arguments.length?(w=e,t):w},t.tooltips=function(e){return arguments.length?(b=e,t):b},t.tooltipContent=function(e){return arguments.length?(w=e,t):w},t.state=function(e){return arguments.length?(M=e,t):M},t.defaultState=function(e){return arguments.length?(S=e,t):S},t.noData=function(e){return arguments.length?(C=e,t):C},t.transitionDuration=function(e){return arguments.length?(T=e,t):T},t.controlsData=function(e){return arguments.length?(E=e,t):E},t.controlLabels=function(e){return arguments.length?"object"!=typeof e?D:(D=e,t):D},o.setTickFormat=o.tickFormat,o.tickFormat=function(t){return arguments.length?(k=t,o):k},t}}(),nv.utils.windowSize=function(){var t={width:640,height:480};return document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(t.width=window.innerWidth,t.height=window.innerHeight),t},nv.utils.windowResize=function(t){if(void 0!==t){var e=window.onresize;window.onresize=function(n){"function"==typeof e&&e(n),t(n)}}},nv.utils.getColor=function(t){return arguments.length?"[object Array]"===Object.prototype.toString.call(t)?function(e,n){return e.color||t[n%t.length]}:t:nv.utils.defaultColor()},nv.utils.defaultColor=function(){var t=d3.scale.category20().range();return function(e,n){return e.color||t[n%t.length]}},nv.utils.customTheme=function(t,e,n){e=e||function(t){return t.key},n=n||d3.scale.category20().range();var r=n.length;return function(i,a){var o=e(i);return r||(r=n.length),void 0!==t[o]?"function"==typeof t[o]?t[o]():t[o]:n[--r]}},nv.utils.pjax=function(t,e){function n(n){d3.html(n,function(n){var r=d3.select(e).node();r.parentNode.replaceChild(d3.select(n).select(e).node(),r),nv.utils.pjax(t,e)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),n(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&n(d3.event.state)})},nv.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px",""));return t.text().length*e*.5}return 0},nv.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||t===1/0?0:t},nv.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){"function"==typeof this[t]&&this[t](e)}.bind(this)),this},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function t(){if(u){var t=d3.select(u);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"))/e[2];d.left=d.left*n,d.top=d.top*n}}}function e(t){var e;e=u?d3.select(u):d3.select("body");var n=e.select(".nvtooltip");return null===n.node()&&(n=e.append("div").attr("class","nvtooltip "+(c||"xy-tooltip")).attr("id",p)),n.node().innerHTML=t,n.style("top",0).style("left",0).style("opacity",0),n.selectAll("div, table, td, tr").classed(g,!0),n.classed(g,!0),n.node()}function n(){if(f&&x(i)){t();var r=d.left,c=null!=l?l:d.top,p=e(y(i));if(h=p,u){var g=u.getElementsByTagName("svg")[0],v=(g?g.getBoundingClientRect():u.getBoundingClientRect(),{left:0,top:0});if(g){var m=g.getBoundingClientRect(),b=u.getBoundingClientRect(),w=m.top;if(w<0){var k=u.getBoundingClientRect();w=Math.abs(w)>k.height?0:w}v.top=Math.abs(w-b.top),v.left=Math.abs(m.left-b.left)}r+=u.offsetLeft+v.left-2*u.scrollLeft,c+=u.offsetTop+v.top-2*u.scrollTop}return s&&s>0&&(c=Math.floor(c/s)*s),nv.tooltip.calcTooltipPosition([r,c],a,o,p),n}}var r=null,i=null,a="w",o=50,s=25,l=null,c=null,u=null,h=null,d={left:null,top:null},f=!0,p="nvtooltip-"+Math.floor(1e5*Math.random()),g="nv-pointer-events-none",v=function(t,e){return t},m=function(t){return t},y=function(t){if(null!=r)return r;if(null==t)return"";var e=d3.select(document.createElement("table"));e.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(m(t.value));var n=e.selectAll("tbody").data([t]).enter().append("tbody"),i=n.selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});i.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),i.append("td").classed("key",!0).html(function(t){return t.key}),i.append("td").classed("value",!0).html(function(t,e){return v(t.value,e)}),i.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}});var a=e.node().outerHTML;return void 0!==t.footer&&(a+="<div class='footer'>"+t.footer+"</div>"),a},x=function(t){return!!(t&&t.series&&t.series.length>0)};return n.nvPointerEventsClass=g,n.content=function(t){return arguments.length?(r=t,n):r},n.tooltipElem=function(){return h},n.contentGenerator=function(t){return arguments.length?("function"==typeof t&&(y=t),n):y},n.data=function(t){return arguments.length?(i=t,n):i},n.gravity=function(t){return arguments.length?(a=t,n):a},n.distance=function(t){return arguments.length?(o=t,n):o},n.snapDistance=function(t){return arguments.length?(s=t,n):s},n.classes=function(t){return arguments.length?(c=t,n):c},n.chartContainer=function(t){return arguments.length?(u=t,n):u},n.position=function(t){return arguments.length?(d.left=void 0!==t.left?t.left:d.left,d.top=void 0!==t.top?t.top:d.top,n):d},n.fixedTop=function(t){return arguments.length?(l=t,n):l},n.enabled=function(t){return arguments.length?(f=t,n):f},n.valueFormatter=function(t){return arguments.length?("function"==typeof t&&(v=t),n):v},n.headerFormatter=function(t){return arguments.length?("function"==typeof t&&(m=t),n):m},n.id=function(){return p},n},nv.tooltip.show=function(t,e,n,r,i,a){var o=document.createElement("div");o.className="nvtooltip "+(a||"xy-tooltip");var s=i;i&&!i.tagName.match(/g|svg/i)||(s=document.getElementsByTagName("body")[0]),o.style.left=0,o.style.top=0,o.style.opacity=0,o.innerHTML=e,s.appendChild(o),i&&(t[0]=t[0]-i.scrollLeft,t[1]=t[1]-i.scrollTop),nv.tooltip.calcTooltipPosition(t,n,r,o)},nv.tooltip.findFirstNonSVGParent=function(t){for(;null!==t.tagName.match(/^g|svg$/i);)t=t.parentNode;return t},nv.tooltip.findTotalOffsetTop=function(t,e){var n=e;do{isNaN(t.offsetTop)||(n+=t.offsetTop)}while(t=t.offsetParent);return n},nv.tooltip.findTotalOffsetLeft=function(t,e){var n=e;do{isNaN(t.offsetLeft)||(n+=t.offsetLeft)}while(t=t.offsetParent);return n},nv.tooltip.calcTooltipPosition=function(t,e,n,r){var i,a,o=parseInt(r.offsetHeight),s=parseInt(r.offsetWidth),l=nv.utils.windowSize().width,c=nv.utils.windowSize().height,u=window.pageYOffset,h=window.pageXOffset;c=window.innerWidth>=document.body.scrollWidth?c:c-16,l=window.innerHeight>=document.body.scrollHeight?l:l-16,e=e||"s",n=n||20;var d=function(t){return nv.tooltip.findTotalOffsetTop(t,a)},f=function(t){return nv.tooltip.findTotalOffsetLeft(t,i)};switch(e){case"e":i=t[0]-s-n,a=t[1]-o/2;var p=f(r),g=d(r);p<h&&(i=t[0]+n>h?t[0]+n:h-p+i),g<u&&(a=u-g+a),g+o>u+c&&(a=u+c-g+a-o);break;case"w":i=t[0]+n,a=t[1]-o/2;var p=f(r),g=d(r);p+s>l&&(i=t[0]-s-n),g<u&&(a=u+5),g+o>u+c&&(a=u+c-g+a-o);break;case"n":i=t[0]-s/2-5,a=t[1]+n;var p=f(r),g=d(r);p<h&&(i=h+5),p+s>l&&(i=i-s/2+5),g+o>u+c&&(a=u+c-g+a-o);break;case"s":i=t[0]-s/2,a=t[1]-o-n;var p=f(r),g=d(r);p<h&&(i=h+5),p+s>l&&(i=i-s/2+5),u>g&&(a=u);break;case"none":i=t[0],a=t[1]-n;var p=f(r),g=d(r)}return r.style.left=i+"px",r.style.top=a+"px",r.style.opacity=1,r.style.position="absolute",r},nv.tooltip.cleanup=function(){for(var t=document.getElementsByClassName("nvtooltip"),e=[];t.length;)e.push(t[0]),t[0].style.transitionDelay="0 !important",t[0].style.opacity=0,t[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;e.length;){var t=e.pop();t.parentNode.removeChild(t)}},500)}}(),nv.interactiveGuideline=function(){"use strict";function t(u){u.each(function(u){function h(){var n=d3.mouse(this),r=n[0],s=n[1],l=!0,u=!1;if(c&&(r=d3.event.offsetX,s=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(l=!1),d3.event.target.className.baseVal.match("nv-legend")&&(u=!0)),l&&(r-=i.left,s-=i.top),r<0||s<0||r>f||s>p||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||u){if(c&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(e.nvPointerEventsClass))return;return o.elementMouseout({mouseX:r,mouseY:s}),void t.renderGuideLine(null)}var h=a.invert(r);o.elementMousemove({mouseX:r,mouseY:s,pointXValue:h}),"dblclick"===d3.event.type&&o.elementDblclick({mouseX:r,mouseY:s,pointXValue:h})}var d=d3.select(this),f=n||960,p=r||400,g=d.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([u]);g.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),l&&(l.on("mousemove",h,!0).on("mouseout",h,!0).on("dblclick",h),t.renderGuideLine=function(t){if(s){var e=g.select(".nv-interactiveGuideLine").selectAll("line").data(null!=t?[nv.utils.NaNtoZero(t)]:[],String);e.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",p).attr("y2",0),e.exit().remove()}})})}var e=nv.models.tooltip(),n=null,r=null,i={left:0,top:0},a=d3.scale.linear(),o=(d3.scale.linear(),d3.dispatch("elementMousemove","elementMouseout","elementDblclick")),s=!0,l=null,c=-1!==navigator.userAgent.indexOf("MSIE");return t.dispatch=o,t.tooltip=e,t.margin=function(e){return arguments.length?(i.top=void 0!==e.top?e.top:i.top,i.left=void 0!==e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(e){return arguments.length?(r=e,t):r},t.xScale=function(e){return arguments.length?(a=e,t):a},t.showGuideLine=function(e){return arguments.length?(s=e,t):s},t.svgContainer=function(e){return arguments.length?(l=e,t):l},t},nv.interactiveBisect=function(t,e,n){"use strict";if(!t instanceof Array)return null;"function"!=typeof n&&(n=function(t,e){return t.x});var r=d3.bisector(n).left,i=d3.max([0,r(t,e)-1]),a=n(t[i],i);if(void 0===a&&(a=i),a===e)return i;var o=d3.min([i+1,t.length-1]),s=n(t[o],o);return void 0===s&&(s=o),Math.abs(s-e)>=Math.abs(a-e)?i:o},nv.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach(function(t,a){var o=Math.abs(e-t);o<=r&&o<n&&(r=o,i=a)}),i},nv.models.axis=function(){"use strict";function t(i){return i.each(function(t){var i=d3.select(this),v=i.selectAll("g.nv-wrap.nv-axis").data([t]),m=v.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),y=(m.append("g"),v.select("g"));null!==f?e.ticks(f):"top"!=e.orient()&&"bottom"!=e.orient()||e.ticks(Math.abs(a.range()[1]-a.range()[0])/100),y.transition().call(e),g=g||e.scale();var x=e.tickFormat();null==x&&(x=g.tickFormat());var b=y.selectAll("text.nv-axislabel").data([o||null]);switch(b.exit().remove(),e.orient()){case"top":b.enter().append("text").attr("class","nv-axislabel");var w=2==a.range().length?a.range()[1]:a.range()[a.range().length-1]+(a.range()[1]-a.range()[0]);if(b.attr("text-anchor","middle").attr("y",0).attr("x",w/2),s){var k=v.selectAll("g.nv-axisMaxMin").data(a.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text"),k.exit().remove(),k.attr("transform",function(t,e){return"translate("+a(t)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=x(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate("+a.range()[e]+",0)"})}break;case"bottom":var M=36,S=30,C=y.selectAll("g").select("text");if(c%360){C.each(function(t,e){var n=this.getBBox().width;n>S&&(S=n)});var A=Math.abs(Math.sin(c*Math.PI/180)),M=(A?A*S:S)+30;C.attr("transform",function(t,e,n){return"rotate("+c+" 0,0)"}).style("text-anchor",c%360>0?"start":"end")}b.enter().append("text").attr("class","nv-axislabel");var w=2==a.range().length?a.range()[1]:a.range()[a.range().length-1]+(a.range()[1]-a.range()[0]);if(b.attr("text-anchor","middle").attr("y",M).attr("x",w/2),s){var k=v.selectAll("g.nv-axisMaxMin").data([a.domain()[0],a.domain()[a.domain().length-1]]);k.enter().append("g").attr("class","nv-axisMaxMin").append("text"),k.exit().remove(),k.attr("transform",function(t,e){return"translate("+(a(t)+(d?a.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",function(t,e,n){return"rotate("+c+" 0,0)"}).style("text-anchor",c?c%360>0?"start":"end":"middle").text(function(t,e){var n=x(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate("+(a(t)+(d?a.rangeBand()/2:0))+",0)"})}h&&C.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":if(b.enter().append("text").attr("class","nv-axislabel"),b.style("text-anchor",u?"middle":"begin").attr("transform",u?"rotate(90)":"").attr("y",u?12-Math.max(n.right,r):-10).attr("x",u?a.range()[0]/2:e.tickPadding()),s){var k=v.selectAll("g.nv-axisMaxMin").data(a.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t,e){return"translate(0,"+a(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(t,e){var n=x(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate(0,"+a.range()[e]+")"}).select("text").style("opacity",1)}break;case"left":if(b.enter().append("text").attr("class","nv-axislabel"),b.style("text-anchor",u?"middle":"end").attr("transform",u?"rotate(-90)":"").attr("y",u?-Math.max(n.left,r)+p:-10).attr("x",u?-a.range()[0]/2:-e.tickPadding()),s){var k=v.selectAll("g.nv-axisMaxMin").data(a.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t,e){return"translate(0,"+g(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=x(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate(0,"+a.range()[e]+")"}).select("text").style("opacity",1)}}if(b.text(function(t){return t}),!s||"left"!==e.orient()&&"right"!==e.orient()||(y.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(a(t)<a.range()[1]+10||a(t)>a.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),a.domain()[0]==a.domain()[1]&&0==a.domain()[0]&&v.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),s&&("top"===e.orient()||"bottom"===e.orient())){var _=[];v.selectAll("g.nv-axisMaxMin").each(function(t,e){try{e?_.push(a(t)-this.getBBox().width-4):_.push(a(t)+this.getBBox().width+4)}catch(n){e?_.push(a(t)-4):_.push(a(t)+4)}}),y.selectAll("g").each(function(t,e){(a(t)<_[0]||a(t)>_[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}l&&y.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t.__data__)/1e6)&&void 0!==t.__data__}).classed("zero",!0),g=a.copy()}),t}var e=d3.svg.axis(),n={top:0,right:0,bottom:0,left:0},r=75,i=60,a=d3.scale.linear(),o=null,s=!0,l=!0,c=0,u=!0,h=!1,d=!1,f=null,p=12;e.scale(a).orient("bottom").tickFormat(function(t){return t});var g;return t.axis=e,d3.rebind(t,e,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(t,a,"domain","range","rangeBand","rangeBands"),t.options=nv.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left,t):n},t.width=function(e){return arguments.length?(r=e,t):r},t.ticks=function(e){return arguments.length?(f=e,t):f},t.height=function(e){return arguments.length?(i=e,t):i},t.axisLabel=function(e){return arguments.length?(o=e,t):o},t.showMaxMin=function(e){return arguments.length?(s=e,t):s},t.highlightZero=function(e){return arguments.length?(l=e,t):l},t.scale=function(n){return arguments.length?(a=n,e.scale(a),d="function"==typeof a.rangeBands,d3.rebind(t,a,"domain","range","rangeBand","rangeBands"),t):a},t.rotateYLabel=function(e){return arguments.length?(u=e,t):u},t.rotateLabels=function(e){return arguments.length?(c=e,t):c},t.staggerLabels=function(e){return arguments.length?(h=e,t):h},t.axisLabelDistance=function(e){return arguments.length?(p=e,t):p},t},nv.models.line=function(){"use strict";function t(v){return v.each(function(t){var v=a-i.left-i.right,m=o-i.top-i.bottom,y=d3.select(this);e=r.xScale(),n=r.yScale(),p=p||e,g=g||n;var x=y.selectAll("g.nv-wrap.nv-line").data([t]),b=x.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),w=b.append("defs"),k=b.append("g"),M=x.select("g");k.append("g").attr("class","nv-groups"),k.append("g").attr("class","nv-scatterWrap"),x.attr("transform","translate("+i.left+","+i.top+")"),r.width(v).height(m);var S=x.select(".nv-scatterWrap");S.transition().call(r),w.append("clipPath").attr("id","nv-edge-clip-"+r.id()).append("rect"),x.select("#nv-edge-clip-"+r.id()+" rect").attr("width",v).attr("height",m>0?m:0),M.attr("clip-path",d?"url(#nv-edge-clip-"+r.id()+")":""),S.attr("clip-path",d?"url(#nv-edge-clip-"+r.id()+")":"");var C=x.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});C.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),C.exit().remove(),C.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return s(t,e)}).style("stroke",function(t,e){return s(t,e)}),C.transition().style("stroke-opacity",1).style("fill-opacity",.5);var A=C.selectAll("path.nv-area").data(function(t){return h(t)?[t]:[]});A.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(f).defined(u).x(function(t,e){return nv.utils.NaNtoZero(p(l(t,e)))}).y0(function(t,e){return nv.utils.NaNtoZero(g(c(t,e)))}).y1(function(t,e){return g(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])}).apply(this,[t.values])}),C.exit().selectAll("path.nv-area").remove(),A.transition().attr("d",function(t){return d3.svg.area().interpolate(f).defined(u).x(function(t,n){return nv.utils.NaNtoZero(e(l(t,n)))}).y0(function(t,e){return nv.utils.NaNtoZero(n(c(t,e)))}).y1(function(t,e){return n(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])}).apply(this,[t.values])});var _=C.selectAll("path.nv-line").data(function(t){return[t.values]});_.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(f).defined(u).x(function(t,e){return nv.utils.NaNtoZero(p(l(t,e)))}).y(function(t,e){return nv.utils.NaNtoZero(g(c(t,e)))})),_.transition().attr("d",d3.svg.line().interpolate(f).defined(u).x(function(t,n){return nv.utils.NaNtoZero(e(l(t,n)))}).y(function(t,e){return nv.utils.NaNtoZero(n(c(t,e)))})),p=e.copy(),g=n.copy()}),t}var e,n,r=nv.models.scatter(),i={top:0,right:0,bottom:0,left:0},a=960,o=500,s=nv.utils.defaultColor(),l=function(t){return t.x},c=function(t){return t.y},u=function(t,e){return!isNaN(c(t,e))&&null!==c(t,e)},h=function(t){return t.area},d=!1,f="linear";r.size(16).sizeDomain([16,256]);var p,g;return t.dispatch=r.dispatch,t.scatter=r,d3.rebind(t,r,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),t.options=nv.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(i.top=void 0!==e.top?e.top:i.top,i.right=void 0!==e.right?e.right:i.right,i.bottom=void 0!==e.bottom?e.bottom:i.bottom,i.left=void 0!==e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(o=e,t):o},t.x=function(e){return arguments.length?(l=e,r.x(e),t):l},t.y=function(e){return arguments.length?(c=e,r.y(e),t):c},t.clipEdge=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(s=nv.utils.getColor(e),r.color(s),t):s},t.interpolate=function(e){return arguments.length?(f=e,t):f},t.defined=function(e){return arguments.length?(u=e,t):u},t.isArea=function(e){return arguments.length?(h=d3.functor(e),t):h},t},nv.models.lineWithFocusChart=function(){"use strict";function t(k){return k.each(function(k){function _(t){var e=+("e"==t),n=e?1:-1,r=I/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function E(){d.empty()||d.extent(b),G.data([d.empty()?r.domain():b]).each(function(t,n){var i=r(t[0])-e.range()[0],a=e.range()[1]-r(t[1]);d3.select(this).select(".left").attr("width",i<0?0:i),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",a<0?0:a)})}function D(){b=d.empty()?null:d.extent();var t=d.empty()?r.domain():d.extent();if(!(Math.abs(t[0]-t[1])<=1)){S.brush({extent:t,brush:d}),E();P.select(".nv-focus .nv-linesWrap").datum(k.filter(function(t){return!t.disabled}).map(function(e,n){return{key:e.key,area:e.area,values:e.values.filter(function(e,n){return a.x()(e,n)>=t[0]&&a.x()(e,n)<=t[1]})}})).transition().duration(C).call(a),P.select(".nv-focus .nv-x.nv-axis").transition().duration(C).call(s),P.select(".nv-focus .nv-y.nv-axis").transition().duration(C).call(l)}}var T=d3.select(this),N=this,F=(v||parseInt(T.style("width"))||960)-f.left-f.right,z=(m||parseInt(T.style("height"))||400)-f.top-f.bottom-y,I=y-p.top-p.bottom;if(t.update=function(){T.transition().duration(C).call(t)},t.container=this,!(k&&k.length&&k.filter(function(t){return t.values.length}).length)){var R=T.selectAll(".nv-noData").data([M]);return R.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),R.attr("x",f.left+F/2).attr("y",f.top+z/2).text(function(t){return t}),t}T.selectAll(".nv-noData").remove(),e=a.xScale(),n=a.yScale(),r=o.xScale(),i=o.yScale();var L=T.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([k]),H=L.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),P=L.select("g");H.append("g").attr("class","nv-legendWrap");var W=H.append("g").attr("class","nv-context");W.append("g").attr("class","nv-x nv-axis"),W.append("g").attr("class","nv-y nv-axis"),W.append("g").attr("class","nv-linesWrap"),W.append("g").attr("class","nv-brushBackground"),W.append("g").attr("class","nv-x nv-brush");var B=H.append("g").attr("class","nv-focus");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-linesWrap"),x&&(h.width(F),P.select(".nv-legendWrap").datum(k).call(h),f.top!=h.height()&&(f.top=h.height(),z=(m||parseInt(T.style("height"))||400)-f.top-f.bottom-y),P.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")),L.attr("transform","translate("+f.left+","+f.top+")"),a.width(F).height(z).color(k.map(function(t,e){return t.color||g(t,e)}).filter(function(t,e){return!k[e].disabled})),o.defined(a.defined()).width(F).height(I).color(k.map(function(t,e){return t.color||g(t,e)}).filter(function(t,e){return!k[e].disabled})),P.select(".nv-context").attr("transform","translate(0,"+(z+f.bottom+p.top)+")");var Y=P.select(".nv-context .nv-linesWrap").datum(k.filter(function(t){return!t.disabled}));d3.transition(Y).call(o),s.scale(e).ticks(F/100).tickSize(-z,0),l.scale(n).ticks(z/36).tickSize(-F,0),P.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+z+")"),d.x(r).on("brush",function(){var e=t.transitionDuration();t.transitionDuration(0),D(),t.transitionDuration(e)}),b&&d.extent(b);var G=P.select(".nv-brushBackground").selectAll("g").data([b||d.extent()]),V=G.enter().append("g");V.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",I),V.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",I);var O=P.select(".nv-x.nv-brush").call(d);O.selectAll("rect").attr("height",I),O.selectAll(".resize").append("path").attr("d",_),D(),c.scale(r).ticks(F/100).tickSize(-I,0),P.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(P.select(".nv-context .nv-x.nv-axis")).call(c),u.scale(i).ticks(I/36).tickSize(-F,0),d3.transition(P.select(".nv-context .nv-y.nv-axis")).call(u),P.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),h.dispatch.on("stateChange",function(e){t.update()}),S.on("tooltipShow",function(t){w&&A(t,N.parentNode)})}),t}var e,n,r,i,a=nv.models.line(),o=nv.models.line(),s=nv.models.axis(),l=nv.models.axis(),c=nv.models.axis(),u=nv.models.axis(),h=nv.models.legend(),d=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},p={top:0,right:30,bottom:20,left:60},g=nv.utils.defaultColor(),v=null,m=null,y=100,x=!0,b=null,w=!0,k=function(t,e,n,r,i){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},M="No Data Available.",S=d3.dispatch("tooltipShow","tooltipHide","brush"),C=250;a.clipEdge(!0),o.interactive(!1),s.orient("bottom").tickPadding(5),l.orient("left"),c.orient("bottom").tickPadding(5),u.orient("left");var A=function(e,n){var r=e.pos[0]+(n.offsetLeft||0),i=e.pos[1]+(n.offsetTop||0),o=s.tickFormat()(a.x()(e.point,e.pointIndex)),c=l.tickFormat()(a.y()(e.point,e.pointIndex)),u=k(e.series.key,o,c,e,t);nv.tooltip.show([r,i],u,null,null,n)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+f.left,t.pos[1]+f.top],S.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){S.tooltipHide(t)}),S.on("tooltipHide",function(){w&&nv.tooltip.cleanup()}),t.dispatch=S,t.legend=h,t.lines=a,t.lines2=o,t.xAxis=s,t.yAxis=l,t.x2Axis=c,t.y2Axis=u,d3.rebind(t,a,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),t.options=nv.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(a.x(e),o.x(e),t):a.x},t.y=function(e){return arguments.length?(a.y(e),o.y(e),t):a.y},t.margin=function(e){return arguments.length?(f.top=void 0!==e.top?e.top:f.top,f.right=void 0!==e.right?e.right:f.right,f.bottom=void 0!==e.bottom?e.bottom:f.bottom,f.left=void 0!==e.left?e.left:f.left,t):f},t.margin2=function(e){return arguments.length?(p=e,t):p},t.width=function(e){return arguments.length?(v=e,t):v},t.height=function(e){return arguments.length?(m=e,t):m},t.height2=function(e){return arguments.length?(y=e,t):y},t.color=function(e){return arguments.length?(g=nv.utils.getColor(e),h.color(g),t):g},t.showLegend=function(e){return arguments.length?(x=e,t):x},t.tooltips=function(e){return arguments.length?(w=e,t):w},t.tooltipContent=function(e){return arguments.length?(k=e,t):k},t.interpolate=function(e){return arguments.length?(a.interpolate(e),o.interpolate(e),t):a.interpolate()},t.noData=function(e){return arguments.length?(M=e,t):M},t.xTickFormat=function(e){return arguments.length?(s.tickFormat(e),c.tickFormat(e),t):s.tickFormat()},t.yTickFormat=function(e){return arguments.length?(l.tickFormat(e),u.tickFormat(e),t):l.tickFormat()},t.brushExtent=function(e){return arguments.length?(b=e,t):b},t.transitionDuration=function(e){return arguments.length?(C=e,t):C},t}()(window),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var i,a=e||window.event,o=[].slice.call(arguments,1),s=0,l=0,c=0,u=0,h=0;return e=t.event.fix(a),e.type="mousewheel",a.wheelDelta&&(s=a.wheelDelta),a.detail&&(s=-1*a.detail),a.deltaY&&(c=-1*a.deltaY,s=c),a.deltaX&&(l=a.deltaX,s=-1*l),void 0!==a.wheelDeltaY&&(c=a.wheelDeltaY),void 0!==a.wheelDeltaX&&(l=-1*a.wheelDeltaX),u=Math.abs(s),(!n||u<n)&&(n=u),h=Math.max(Math.abs(c),Math.abs(l)),(!r||h<r)&&(r=h),i=s>0?"floor":"ceil",s=Math[i](s/n),l=Math[i](l/r),c=Math[i](c/r),o.unshift(e,s,l,c),(t.event.dispatch||t.event.handle).apply(this,o)}var n,r,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(t.event.fixHooks)for(var o=i.length;o;)t.event.fixHooks[i[--o]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=a.length;t;)this.addEventListener(a[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=a.length;t;)this.removeEventListener(a[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){var e=function(){function e(){this.el=null,this.shift=6,this.drop=0,this.init=function(){var e=this;this.el=t("<div></div>").addClass("mapplic-tooltip"),t("<a></a>").addClass("mapplic-tooltip-close").attr("href","#").click(function(t){
t.preventDefault(),c.deeplinking.clear(),e.hide()}).appendTo(this.el),this.image=t("<img>").addClass("mapplic-tooltip-image").hide().appendTo(this.el),this.title=t("<h4></h4>").addClass("mapplic-tooltip-title").appendTo(this.el),this.content=t("<div></div>").addClass("mapplic-tooltip-content").appendTo(this.el),this.desc=t("<div></div>").addClass("mapplic-tooltip-description").appendTo(this.content),this.link=t("<a>More</a>").addClass("mapplic-tooltip-link").attr("href","#").hide().appendTo(this.el),t("<div></div>").addClass("mapplic-tooltip-triangle").prependTo(this.el),c.map.append(this.el)},this.set=function(e){if(e){if("none"==e.action)return void this.el.stop().fadeOut(300);var n=this;e.image?this.image.attr("src",e.image).show():this.image.hide(),e.link?this.link.attr("href",e.link).show():this.link.hide(),this.title.text(e.title),this.desc.html(e.description);var r=t('.mapplic-pin[data-location="'+e.id+'"]');0==r.length?this.shift=6:this.shift=r.height()+6,t("img",this.desc).load(function(){n.position(e)}),this.position(e)}},this.show=function(e){if(e){if("none"==e.action)return void this.el.stop().fadeOut(300);var n=this;e.image?this.image.attr("src",e.image).show():this.image.hide(),e.link?this.link.attr("href",e.link).show():this.link.hide(),this.title.text(e.title),this.desc.html(e.description);var r=t('.mapplic-pin[data-location="'+e.id+'"]');0==r.length?this.shift=6:this.shift=r.height()+6,t("img",this.desc).load(function(){n.position(e)}),this.position(e),this.el.stop().fadeIn(200).show()}},this.position=function(t){var e=100*t.x;y=100*t.y,mt=-this.el.outerHeight()-this.shift,ml=-this.el.outerWidth()/2,this.el.css({left:e+"%",top:y+"%",marginTop:mt,marginLeft:ml}),this.drop=this.el.outerHeight()+this.shift},this.hide=function(){var t=this;this.el.stop().fadeOut(300,function(){t.desc.empty()})}}function n(){this.init=function(){var e=location.hash.slice(1);if(e){var n=f(e);c.tooltip.set(n),p(e,0),c.tooltip.show(n)}else x(.5,.5,1,0);t(window).on("hashchange",function(){var t=location.hash.slice(1);if(t){var e=f(t);c.tooltip.set(e),p(t,800),c.tooltip.show(e)}})},this.clear=function(){history.pushState?history.pushState("",document.title,window.location.pathname):window.location.hash=""}}function r(){this.el=null,this.shift=6,this.init=function(){var e=this;this.el=t("<div></div>").addClass("mapplic-tooltip mapplic-hovertip"),this.title=t("<h4></h4>").addClass("mapplic-tooltip-title").appendTo(this.el),t("<div></div>").addClass("mapplic-tooltip-triangle").appendTo(this.el),t(c.map).on("mouseover",".mapplic-layer a",function(){var n="";t(this).hasClass("mapplic-pin")?(n=t(this).data("location"),e.shift=t(this).height()+6):(n=t(this).attr("xlink:href").slice(1),e.shift=6);var r=f(n);r&&e.show(r)}).on("mouseout",function(){e.hide()}),c.map.append(this.el)},this.show=function(t){this.title.text(t.title);var e=100*t.x,n=100*t.y,r=-this.el.outerHeight()-this.shift,i=-this.el.outerWidth()/2;this.el.css({left:e+"%",top:n+"%",marginTop:r,marginLeft:i}),this.el.stop().fadeIn(100)},this.hide=function(){this.el.stop().fadeOut(200)}}function i(){this.el=null,this.init=function(){this.el=t("<div></div>").addClass("mapplic-minimap").appendTo(c.container),this.el.css("height",this.el.width()*c.hw_ratio),this.el.click(function(e){e.preventDefault();var n=(e.pageX-t(this).offset().left)/t(this).width(),r=(e.pageY-t(this).offset().top)/t(this).height();x(n,r,c.scale/c.fitscale,100)})},this.addLayer=function(e){var n=t("<div></div>").addClass("mapplic-minimap-layer").addClass(e.id).appendTo(this.el);t("<img>").attr("src",e.minimap).addClass("mapplic-minimap-background").appendTo(n),t("<div></div>").addClass("mapplic-minimap-overlay").appendTo(n),t("<img>").attr("src",e.minimap).addClass("mapplic-minimap-active").appendTo(n)},this.show=function(e){t(".mapplic-minimap-layer:visible",this.el).hide(),t(".mapplic-minimap-layer."+e,this.el).show()},this.update=function(e,n){var r=t(".mapplic-minimap-active",this.el);void 0===e&&(e=c.x),void 0===n&&(n=c.y);var i=Math.round(c.container.width()/c.contentWidth/c.scale*this.el.width()),a=Math.round(c.container.height()/c.contentHeight/c.scale*this.el.height()),o=Math.round(-n/c.contentHeight/c.scale*this.el.height()),s=Math.round(-e/c.contentWidth/c.scale*this.el.width()),l=s+i,u=o+a;r.css("clip","rect("+o+"px, "+l+"px, "+u+"px, "+s+"px)")}}function a(){this.el=null,this.list=null,this.init=function(){var e=this;if(this.el=t("<div></div>").addClass("mapplic-sidebar").appendTo(c.el),c.o.search){var n=t("<form></form>").addClass("mapplic-search-form").submit(function(){return!1}).appendTo(this.el);c.clear=t("<button></button>").addClass("mapplic-search-clear").click(function(){r.val(""),r.keyup()}).appendTo(n);var r=t("<input>").attr({type:"text",spellcheck:"false",placeholder:"Search for location..."}).addClass("mapplic-search-input").keyup(function(){var n=t(this).val();e.search(n)}).prependTo(n)}var i=t("<div></div>").addClass("mapplic-list-container").appendTo(this.el);this.list=t("<ol></ol>").addClass("mapplic-list").appendTo(i),this.notfound=t("<p></p>").addClass("mapplic-not-found").text("Nothing found. Please try a different search.").appendTo(i),c.o.search||i.css("padding-top","0")},this.addCategories=function(e){var n=this.list;t.each(e,function(e,r){var i=t("<li></li>").addClass("mapplic-list-category").addClass(r.id),a=t("<ol></ol>").css("border-color",r.color).appendTo(i);"false"==r.show&&a.hide();var o=t("<a></a>").attr("href","#").attr("title",r.title).css("background-color",r.color).text(r.title).click(function(t){return a.slideToggle(200),!1}).prependTo(i);r.icon&&t("<img>").attr("src",r.icon).addClass("mapplic-list-thumbnail").prependTo(o),t("<span></span>").text("0").addClass("mapplic-list-count").prependTo(o),n.append(i)})},this.addLocation=function(e){var n=t("<li></li>").addClass("mapplic-list-location").addClass("mapplic-list-shown"),r=t("<a></a>").attr("href","#"+e.id).appendTo(n);e.thumbnail&&t("<img>").attr("src",e.thumbnail).addClass("mapplic-list-thumbnail").appendTo(r),t("<h4></h4>").text(e.title).appendTo(r),t("<span></span>").html(e.about).appendTo(r);var i=t(".mapplic-list-category."+e.category);i.length?t("ol",i).append(n):this.list.append(n),t(".mapplic-list-count",i).text(t(".mapplic-list-shown",i).length)},this.search=function(e){e?c.clear.fadeIn(100):c.clear.fadeOut(100),t(".mapplic-list li",c.el).each(function(){t(this).text().search(new RegExp(e,"i"))<0?(t(this).removeClass("mapplic-list-shown"),t(this).slideUp(200)):(t(this).addClass("mapplic-list-shown"),t(this).show())}),t(".mapplic-list > li",c.el).each(function(){var e=t(".mapplic-list-shown",this).length;t(".mapplic-list-count",this).text(e)}),t(".mapplic-list > li.mapplic-list-shown").length>0?this.notfound.fadeOut(200):this.notfound.fadeIn(200)}}function o(){this.el=null,this.init=function(){this.el=t("<div></div>").addClass("mapplic-coordinates").appendTo(c.container),this.el.append("x: "),t("<code></code>").addClass("mapplic-coordinates-x").appendTo(this.el),this.el.append(" y: "),t("<code></code>").addClass("mapplic-coordinates-y").appendTo(this.el),t(".mapplic-layer",c.map).on("mousemove",function(e){var n=(e.pageX-c.map.offset().left)/c.map.width(),r=(e.pageY-c.map.offset().top)/c.map.height();t(".mapplic-coordinates-x").text(parseFloat(n).toFixed(4)),t(".mapplic-coordinates-y").text(parseFloat(r).toFixed(4))})}}function s(){this.el=null,this.init=function(){this.el=t("<a></a>").attr("href","#").addClass("mapplic-clear-button").click(function(t){t.preventDefault(),c.deeplinking.clear(),c.tooltip.hide(),x(.5,.5,1)}).appendTo(c.container)}}function l(){this.el=null,this.init=function(){var e=this;this.element=c.el[0],t("<a></a>").attr("href","#").attr("href","#").addClass("mapplic-fullscreen-button").click(function(t){t.preventDefault(),e.isFull()?e.exitFull():e.goFull()}).appendTo(c.container)},this.goFull=function(){this.element.requestFullscreen?this.element.requestFullscreen():this.element.mozRequestFullScreen?this.element.mozRequestFullScreen():this.element.webkitRequestFullscreen?this.element.webkitRequestFullscreen():this.element.msRequestFullscreen&&this.element.msRequestFullscreen()},this.exitFull=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},this.isFull=function(){return window.innerHeight==screen.height}}var c=this;c.o={source:"locations.json",height:420,locations:!0,minimap:!0,sidebar:!0,deeplinking:!0,search:!0,clearbutton:!0,hovertip:!0,fullscreen:!1,developer:!1,animate:!0,maxscale:4},c.init=function(e,n){return c.o=t.extend(c.o,n),c.x=0,c.y=0,c.scale=1,c.el=e.addClass("mapplic-element mapplic-loading").height(c.o.height),t.getJSON(c.o.source,function(t){u(t),c.el.removeClass("mapplic-loading"),h()}).fail(function(){alert("Data file missing or invalid!")}),c},c.goToLocation=function(t,e){p(t,e)};var u=function(u){function h(){var e=t(".mapplic-pin:not(.mapplic-animate):visible");e.length>0?(e.first().addClass("mapplic-animate"),window.setTimeout(h,200)):(t(".mapplic-animate").removeClass("mapplic-animate"),t(".mapplic-pin").css("opacity","1"))}c.data=u;var f,p=0;if(c.container=t("<div></div>").addClass("mapplic-container").appendTo(c.el),c.map=t("<div></div>").addClass("mapplic-map").appendTo(c.container),c.levelselect=t("<select></select>").addClass("mapplic-levels-select"),c.o.sidebar||c.container.css("width","100%"),c.contentWidth=u.mapwidth,c.contentHeight=u.mapheight,c.hw_ratio=u.mapheight/u.mapwidth,u.mapheight/c.container.height()>u.mapwidth/c.container.width()?(c.min_width=c.container.width(),c.min_height=c.container.width()*c.hw_ratio):(c.min_height=c.container.height(),c.min_width=c.container.height()/c.hw_ratio),c.map.css({width:u.mapwidth,height:u.mapheight}),c.o.minimap&&(c.minimap=new i,c.minimap.init()),c.o.sidebar&&(c.sidebar=new a,c.sidebar.init(),c.sidebar.addCategories(u.categories)),u.levels&&t.each(u.levels,function(e,n){var r=n.map,i=r.substr(r.lastIndexOf(".")+1).toLowerCase(),a=t("<div></div>").addClass("mapplic-layer").addClass(n.id).hide().appendTo(c.map);switch(i){case"jpg":case"jpeg":case"png":case"gif":t("<img>").attr("src",r).addClass("mapplic-map-image").appendTo(a);break;case"svg":t("<div></div>").addClass("mapplic-map-image").load(r).appendTo(a);break;default:alert("File type "+i+" is not supported!")}c.minimap&&c.minimap.addLayer(n),c.levelselect.prepend(t("<option></option>").attr("value",n.id).text(n.title)),f&&!n.show||(f=n.id),t.each(n.locations,function(e,n){var r=100*n.y,i=100*n.x;if("hidden"!=n.pin&&c.o.locations){var o="#"+n.id;"redirect"==n.action&&(o=n.link);var s=t("<a></a>").attr("href",o).addClass("mapplic-pin").css({top:r+"%",left:i+"%"}).appendTo(a);s.attr("data-location",n.id),s.addClass(n.pin)}c.sidebar&&c.sidebar.addLocation(n)}),p++}),c.o.animate&&(t(".mapplic-pin").css("opacity","0"),window.setTimeout(h,200)),c.o.hovertip&&(c.hovertip=(new r).init()),c.tooltip=new e,c.tooltip.init(),c.o.developer&&(c.devtools=(new o).init()),c.o.clearbutton&&(c.clearbutton=(new s).init()),c.o.fullscreen&&(c.fullscreen=(new l).init()),p>1){c.levels=t("<div></div>").addClass("mapplic-levels");var y=t('<a href="#"></a>').addClass("mapplic-levels-up").appendTo(c.levels);c.levelselect.appendTo(c.levels);var x=t('<a href="#"></a>').addClass("mapplic-levels-down").appendTo(c.levels);c.container.append(c.levels),c.levelselect.change(function(){var e=t(this).val();d(e)}),y.click(function(e){e.preventDefault(),t(this).hasClass("disabled")||d("+")}),x.click(function(e){e.preventDefault(),t(this).hasClass("disabled")||d("-")})}d(f),t(window).resize(function(){var t=c.container.width()/c.contentWidth,e=c.container.height()/c.contentHeight;c.fitscale=t>e?t:e,c.scale=m(c.scale),c.x=g(c.x),c.y=v(c.y),b(c.x,c.y,c.scale,100)}).resize(),c.o.deeplinking&&(c.deeplinking=new n,c.deeplinking.init())},h=function(){var e=c.map,n=t(".mapplic-map-image",c.map);if(document.ondragstart=function(){return!1},n.on("mousedown",function(n){e.stop(),e.data("mouseX",n.pageX),e.data("mouseY",n.pageY),e.data("lastX",c.x),e.data("lastY",c.y),e.addClass("mapplic-dragging"),c.map.on("mousemove",function(t){var n=t.pageX-e.data("mouseX")+c.x;y=t.pageY-e.data("mouseY")+c.y,n=g(n),y=v(y),b(n,y),e.data("lastX",n),e.data("lastY",y)}),t(document).on("mouseup",function(n){c.x=e.data("lastX"),c.y=e.data("lastY"),c.map.off("mousemove"),t(document).off("mouseup"),e.removeClass("mapplic-dragging")})}),t(document).on("dblclick",".mapplic-map-image",function(t){var e=c.map.offset(),n=(t.pageX-e.left)/c.map.width(),r=(t.pageY-e.top)/c.map.height(),i=c.map.width()/c.min_width*2;x(n,r,i,600)}),t(".mapplic-layer",this.el).bind("mousewheel DOMMouseScroll",function(t,e){t.preventDefault();var n=c.scale;c.scale=m(n+n*e/5),c.x=g(c.x-(t.pageX-c.container.offset().left-c.x)*(c.scale/n-1)),c.y=v(c.y-(t.pageY-c.container.offset().top-c.y)*(c.scale/n-1)),b(c.x,c.y,c.scale,100)}),!("ontouchstart"in window||"onmsgesturechange"in window))return!0;n.on("touchstart",function(t){var r=t.originalEvent,i=e.position();e.data("touchY",r.changedTouches[0].pageY-i.top),e.data("touchX",r.changedTouches[0].pageX-i.left),n.on("touchmove",function(t){t.preventDefault();var r=t.originalEvent;1==r.touches.length?(c.x=g(r.changedTouches[0].pageX-e.data("touchX")),c.y=v(r.changedTouches[0].pageY-e.data("touchY")),b(c.x,c.y,c.scale,100)):n.off("touchmove")}),n.on("touchend",function(t){n.off("touchmove touchend")})});var r,i=Hammer(c.map[0],{transform_always_block:!0,drag_block_horizontal:!0,drag_block_vertical:!0}),a=1;i.on("touch transform",function(t){switch(t.type){case"touch":r=a;break;case"transform":var e=t.gesture.center;a=Math.max(1,Math.min(r*t.gesture.scale,10));var n=c.scale;c.scale=m(a*c.fitscale),c.x=g(c.x-(e.pageX-c.container.offset().left-c.x)*(c.scale/n-1)),c.y=v(c.y-(e.pageY-c.container.offset().top-c.y)*(c.scale/n-1)),b(c.x,c.y,c.scale,200)}})},d=function(e){switch(e){case"+":e=t("option:selected",c.levelselect).removeAttr("selected").prev().prop("selected","selected").val();break;case"-":e=t("option:selected",c.levelselect).removeAttr("selected").next().prop("selected","selected").val();break;default:t('option[value="'+e+'"]',c.levelselect).prop("selected","selected")}var n=t(".mapplic-layer."+e,c.map);if(!n.is(":visible")){c.tooltip.hide(),t(".mapplic-layer:visible",c.map).hide(),n.show(),c.minimap&&c.minimap.show(e);var r=c.levelselect.get(0).selectedIndex,i=t(".mapplic-levels-up",c.levels),a=t(".mapplic-levels-down",c.levels);i.removeClass("disabled"),a.removeClass("disabled"),0==r?i.addClass("disabled"):r==c.levelselect.get(0).length-1&&a.addClass("disabled")}},f=function(e){var n=null;return t.each(c.data.levels,function(r,i){t.each(i.locations,function(t,r){r.id==e&&(n=r)})}),n},p=function(e,n){t.each(c.data.levels,function(r,i){t.each(i.locations,function(t,r){if(r.id==e){var a=void 0!==r.zoom?r.zoom:4,o=c.tooltip.drop/c.contentHeight/a;d(i.id),x(r.x,parseFloat(r.y)-o,a,n,"easeInOutCubic")}})})},g=function(t){var e=c.container.width()-c.contentWidth*c.scale;return t>0?t=0:t<e&&(t=e),t},v=function(t){var e=c.container.height()-c.contentHeight*c.scale;return t>=0?t=0:t<e&&(t=e),t},m=function(t){return t<c.fitscale?t=c.fitscale:t>c.o.maxscale&&(t=c.o.maxscale),t},x=function(t,e,n,r,i){r=void 0!==r?r:400,c.scale=m(c.fitscale*n);c.contentWidth,c.scale;c.x=g(.5*c.container.width()-c.scale*c.contentWidth*t),c.y=v(.5*c.container.height()-c.scale*c.contentHeight*e),b(c.x,c.y,c.scale,r,i)},b=function(t,e,n,r,i){void 0!==n?c.map.stop().animate({left:t,top:e,width:c.contentWidth*n,height:c.contentHeight*n},r,i):c.map.css({left:t,top:e}),c.minimap&&c.minimap.update(t,e)}};t.fn.mapplic=function(n){var r=this.length;return this.each(function(i){var a=t(this),o="mapplic"+(r>1?"-"+ ++i:""),s=(new e).init(a,n);a.data(o,s).data("key",o)})}}(jQuery),function(t,e){"function"==typeof define&&define.amd?define(["d3"],function(n){return t.Rickshaw=e(n)}):"object"==typeof exports?module.exports=e(require("d3")):t.Rickshaw=e(d3)}(this,function(t){var e={namespace:function(t,n){for(var r=t.split("."),i=e,a=1,o=r.length;a<o;a++){var s=r[a];i[s]=i[s]||{},i=i[s]}return i},keys:function(t){var e=[];for(var n in t)e.push(n);return e},extend:function(t,e){for(var n in e)t[n]=e[n];return t},clone:function(t){return JSON.parse(JSON.stringify(t))}};return function(t){function e(t){return h.call(t)===y}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function r(t){if(i(t)!==m)throw new TypeError;var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function i(t){switch(t){case null:return d;case void 0:return f}switch(typeof t){case"boolean":return p;case"number":return g;case"string":return v}return m}function a(t){return void 0===t}function o(t){var e=t.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=e.length||e[0]?e:[]}function s(t,e){var n=t;return function(){var t=l([u(n,this)],arguments);return e.apply(this,t)}}function l(t,e){for(var n=t.length,r=e.length;r--;)t[n+r]=e[r];return t}function c(t,e){return t=x.call(t,0),l(t,e)}function u(t,e){if(arguments.length<2&&a(arguments[0]))return this;var n=t,r=x.call(arguments,2);return function(){var t=c(r,arguments);return n.apply(e,t)}}var h=Object.prototype.toString,d="Null",f="Undefined",p="Boolean",g="Number",v="String",m="Object",y="[object Function]",x=Array.prototype.slice,b=function(){},w=function(){function t(){}function i(){function r(){this.initialize.apply(this,arguments)}var i=null,a=[].slice.apply(arguments);if(e(a[0])&&(i=a.shift()),n(r,w.Methods),r.superclass=i,r.subclasses=[],i){t.prototype=i.prototype,r.prototype=new t;try{i.subclasses.push(r)}catch(t){}}for(var o=0,s=a.length;o<s;o++)r.addMethods(a[o]);return r.prototype.initialize||(r.prototype.initialize=b),r.prototype.constructor=r,r}function a(t){var n=this.superclass&&this.superclass.prototype,i=r(t);l&&(t.toString!=Object.prototype.toString&&i.push("toString"),t.valueOf!=Object.prototype.valueOf&&i.push("valueOf"));for(var a=0,c=i.length;a<c;a++){var h=i[a],d=t[h];if(n&&e(d)&&"$super"==o(d)[0]){var f=d;d=s(function(t){return function(){return n[t].apply(this,arguments)}}(h),f),d.valueOf=u(f.valueOf,f),d.toString=u(f.toString,f)}this.prototype[h]=d}return this}var l=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}();return{create:i,Methods:{addMethods:a}}}();t.exports?t.exports.Class=w:t.Class=w}(e),e.namespace("Rickshaw.Compat.ClassList"),e.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||function(t){"use strict";var e=(t.HTMLElement||t.Element).prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},i=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},o=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return i.call(t,e)},s=function(t){for(var e=r.call(t.className),n=e?e.split(/\s+/):[],i=0,a=n.length;i<a;i++)this.push(n[i]);this._updateClassName=function(){t.className=this.toString()}},l=s.prototype=[],c=function(){return new s(this)};if(a.prototype=Error.prototype,l.item=function(t){return this[t]||null},l.contains=function(t){return t+="",-1!==o(this,t)},l.add=function(t){t+="",-1===o(this,t)&&(this.push(t),this._updateClassName())},l.remove=function(t){t+="";var e=o(this,t);-1!==e&&(this.splice(e,1),this._updateClassName())},l.toggle=function(t){t+="",-1===o(this,t)?this.add(t):this.remove(t)},l.toString=function(){return this.join(" ")},n.defineProperty){var u={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(e,"classList",u)}catch(t){-2146823252===t.number&&(u.enumerable=!1,n.defineProperty(e,"classList",u))}}else n.prototype.__defineGetter__&&e.__defineGetter__("classList",c)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new e.Compat.ClassList,e.namespace("Rickshaw.Graph"),e.Graph=function(n){var r=this;this.initialize=function(e){if(!e.element)throw"Rickshaw.Graph needs a reference to an element";if(1!==e.element.nodeType)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=e.element,this.series=e.series,this.window={},this.updateCallbacks=[],this.configureCallbacks=[],this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0,preserve:!1,xScale:void 0,yScale:void 0,stack:!0},this._loadRenderers(),this.configure(e),this.validateSeries(e.series),this.series.active=function(){return r.series.filter(function(t){return!t.disabled})},this.setSize({width:e.width,height:e.height}),this.element.classList.add("rickshaw_graph"),this.vis=t.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height),this.discoverRange()},this._loadRenderers=function(){for(var t in e.Graph.Renderer)if(t&&e.Graph.Renderer.hasOwnProperty(t)){var n=e.Graph.Renderer[t];n&&n.prototype&&n.prototype.render&&r.registerRenderer(new n({graph:r}))}},this.validateSeries=function(t){if(!(Array.isArray(t)||t instanceof e.Series)){throw"series is not an array: "+Object.prototype.toString.apply(t)}t.forEach(function(t){if(!(t instanceof Object))throw"series element is not an object: "+t;if(!t.data)throw"series has no data: "+JSON.stringify(t);if(!Array.isArray(t.data))throw"series data is not an array: "+JSON.stringify(t.data);if(t.data.length>0){var e=t.data[0].x,n=t.data[0].y;if("number"!=typeof e||"number"!=typeof n&&null!==n)throw"x and y properties of points should be numbers instead of "+typeof e+" and "+typeof n}if(t.data.length>=3&&(t.data[2].x<t.data[1].x||t.data[1].x<t.data[0].x||t.data[t.data.length-1].x<t.data[0].x))throw"series data needs to be sorted on x values for series name: "+t.name},this)},this.dataDomain=function(){var e=this.series.map(function(t){return t.data});return[t.min(e.map(function(t){return t[0].x})),t.max(e.map(function(t){return t[t.length-1].x}))]},this.discoverRange=function(){var e=this.renderer.domain();this.x=(this.xScale||t.scale.linear()).copy().domain(e.x).range([0,this.width]),this.y=(this.yScale||t.scale.linear()).copy().domain(e.y).range([this.height,0]),this.x.magnitude=t.scale.linear().domain([e.x[0]-e.x[0],e.x[1]-e.x[0]]).range([0,this.width]),this.y.magnitude=t.scale.linear().domain([e.y[0]-e.y[0],e.y[1]-e.y[0]]).range([0,this.height])},this.render=function(){this.stackData();this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(t){t()})},this.update=this.render,this.stackData=function(){var n=this.series.active().map(function(t){return t.data}).map(function(t){return t.filter(function(t){return this._slice(t)},this)},this),i=this.preserve;i||this.series.forEach(function(t){t.scale&&(i=!0)}),n=i?e.clone(n):n,this.series.active().forEach(function(t,e){if(t.scale){var r=n[e];r&&r.forEach(function(e){e.y=t.scale(e.y)})}}),this.stackData.hooks.data.forEach(function(t){n=t.f.apply(r,[n])});var a;if(!this.renderer.unstack){this._validateStackable();var o=t.layout.stack();o.offset(r.offset),a=o(n)}a=a||n,this.renderer.unstack&&a.forEach(function(t){t.forEach(function(t){t.y0=void 0===t.y0?0:t.y0})}),this.stackData.hooks.after.forEach(function(t){a=t.f.apply(r,[n])});var s=0;return this.series.forEach(function(t){t.disabled||(t.stack=a[s++])}),this.stackedData=a,a},this._validateStackable=function(){var t,e=this.series;e.forEach(function(e){if((t=t||e.data.length)&&e.data.length!=t)throw"stacked series cannot have differing numbers of points: "+t+" vs "+e.data.length+"; see Rickshaw.Series.fill()"},this)},this.stackData.hooks={data:[],after:[]},this._slice=function(t){if(this.window.xMin||this.window.xMax){var e=!0;return this.window.xMin&&t.x<this.window.xMin&&(e=!1),this.window.xMax&&t.x>this.window.xMax&&(e=!1),e}return!0},this.onUpdate=function(t){this.updateCallbacks.push(t)},this.onConfigure=function(t){this.configureCallbacks.push(t)},this.registerRenderer=function(t){this._renderers=this._renderers||{},this._renderers[t.name]=t},this.configure=function(t){this.config=this.config||{},(t.width||t.height)&&this.setSize(t),e.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this?this[e]:this.defaults[e]},this),e.keys(this.config).forEach(function(t){this[t]=this.config[t]},this),"stack"in t&&(t.unstack=!t.stack);var n=t.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(n,t),this.configureCallbacks.forEach(function(e){e(t)})},this.setRenderer=function(t,e){if("function"==typeof t)this.renderer=new t({graph:r}),this.registerRenderer(this.renderer);else{if(!this._renderers[t])throw"couldn't find renderer "+t;this.renderer=this._renderers[t]}"object"==typeof e&&this.renderer.configure(e)},this.setSize=function(t){if(t=t||{},void 0!==typeof window)var e=window.getComputedStyle(this.element,null),n=parseInt(e.getPropertyValue("width"),10),r=parseInt(e.getPropertyValue("height"),10);this.width=t.width||n||400,this.height=t.height||r||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(n)},e.namespace("Rickshaw.Fixtures.Color"),e.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},e.namespace("Rickshaw.Fixtures.RandomData"),e.Fixtures.RandomData=function(t){t=t||1;var e=200,n=Math.floor((new Date).getTime()/1e3);this.addData=function(r){var i=100*Math.random()+15+e,a=r[0].length,o=1;r.forEach(function(e){var r=20*Math.random(),s=i/25+o+++15*(Math.cos(a*o*11/960)+2)+7*(Math.cos(a/7)+2)+1*(Math.cos(a/17)+2);e.push({x:a*t+n,y:s+r})}),e=.85*i},this.removeData=function(e){e.forEach(function(t){t.shift()}),n+=t}},e.namespace("Rickshaw.Fixtures.Time"),e.Fixtures.Time=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getUTCFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getUTCMilliseconds()+"ms"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(e){return t.time.format("%b %e")(e)},this.formatTime=function(t){return t.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var n,r;if("month"==e.name){if(n=new Date(1e3*t),Date.UTC(n.getUTCFullYear(),n.getUTCMonth())/1e3==t)return t;r=n.getUTCFullYear();var i=n.getUTCMonth();return 11==i?(i=0,r+=1):i+=1,Date.UTC(r,i)/1e3}return"year"==e.name?(n=new Date(1e3*t),Date.UTC(n.getUTCFullYear(),0)/1e3==t?t:(r=n.getUTCFullYear()+1,Date.UTC(r,0)/1e3)):Math.ceil(t/e.seconds)*e.seconds}},e.namespace("Rickshaw.Fixtures.Time.Local"),e.Fixtures.Time.Local=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getMilliseconds()+"ms"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(e){return t.time.format("%b %e")(e)},this.formatTime=function(t){return t.toString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var n,r;if("day"==e.name){var i=new Date(1e3*(t+e.seconds-1)),a=new Date(0);return a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),a.setDate(i.getDate()),a.setMonth(i.getMonth()),a.setFullYear(i.getFullYear()),a.getTime()/1e3}if("month"==e.name){if(n=new Date(1e3*t),new Date(n.getFullYear(),n.getMonth()).getTime()/1e3==t)return t;r=n.getFullYear();var o=n.getMonth();return 11==o?(o=0,r+=1):o+=1,new Date(r,o).getTime()/1e3}return"year"==e.name?(n=new Date(1e3*t),new Date(n.getUTCFullYear(),0).getTime()/1e3==t?t:(r=n.getFullYear()+1,new Date(r,0).getTime()/1e3)):Math.ceil(t/e.seconds)*e.seconds}},e.namespace("Rickshaw.Fixtures.Number"),e.Fixtures.Number.formatKMBT=function(t){var e=Math.abs(t);return e>=1e12?t/1e12+"T":e>=1e9?t/1e9+"B":e>=1e6?t/1e6+"M":e>=1e3?t/1e3+"K":e<1&&t>0?t.toFixed(2):0===e?"":t},e.Fixtures.Number.formatBase1024KMGTP=function(t){var e=Math.abs(t);return e>=0x4000000000000?t/0x4000000000000+"P":e>=1099511627776?t/1099511627776+"T":e>=1073741824?t/1073741824+"G":e>=1048576?t/1048576+"M":e>=1024?t/1024+"K":e<1&&t>0?t.toFixed(2):0===e?"":t},e.namespace("Rickshaw.Color.Palette"),e.Color.Palette=function(n){var r=new e.Fixtures.Color
;if(n=n||{},this.schemes={},this.scheme=r.schemes[n.scheme]||n.scheme||r.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,n.interpolatedStopCount){var i,a,o=this.scheme.length-1,s=[];for(i=0;i<o;i++){s.push(this.scheme[i]);var l=t.interpolateHsl(this.scheme[i],this.scheme[i+1]);for(a=1;a<n.interpolatedStopCount;a++)s.push(l(1/n.interpolatedStopCount*a))}s.push(this.scheme[this.scheme.length-1]),this.scheme=s}this.rotateCount=this.scheme.length,this.color=function(t){return this.scheme[t]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){if(Array.isArray(this.scheme)){var e;return this.generatorIndex==2*this.rotateCount-1?(e=t.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(e=t.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(e),e}}},e.namespace("Rickshaw.Graph.Ajax"),e.Graph.Ajax=e.Class.create({initialize:function(t){this.dataURL=t.dataURL,this.onData=t.onData||function(t){return t},this.onComplete=t.onComplete||function(){},this.onError=t.onError||function(){},this.args=t,this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){this.onError(this)},success:function(t,n){t=this.onData(t),this.args.series=this._splice({data:t,series:this.args.series}),this.graph=this.graph||new e.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(t){var e=t.data,n=t.series;return t.series?(n.forEach(function(t){var n=t.key||t.name;if(!n)throw"series needs a key or a name";e.forEach(function(e){var r=e.key||e.name;if(!r)throw"data needs a key or a name";if(n==r){["color","name","data"].forEach(function(n){e[n]&&(t[n]=e[n])})}})}),n):e}}),e.namespace("Rickshaw.Graph.Annotate"),e.Graph.Annotate=function(t){this.graph=t.graph;this.elements={timeline:t.element};var n=this;this.data={},this.elements.timeline.classList.add("rickshaw_annotation_timeline"),this.add=function(t,e,r){n.data[t]=n.data[t]||{boxes:[]},n.data[t].boxes.push({content:e,end:r})},this.update=function(){e.keys(n.data).forEach(function(t){var e=n.data[t],r=n.graph.x(t);if(r<0||r>n.graph.x.range()[1])return e.element&&(e.line.classList.add("offscreen"),e.element.style.display="none"),void e.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.add("offscreen")});if(!e.element){var i=e.element=document.createElement("div");i.classList.add("annotation"),this.elements.timeline.appendChild(i),i.addEventListener("click",function(t){i.classList.toggle("active"),e.line.classList.toggle("active"),e.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.toggle("active")})},!1)}e.element.style.left=r+"px",e.element.style.display="block",e.boxes.forEach(function(t){var i=t.element;if(i||(i=t.element=document.createElement("div"),i.classList.add("content"),i.innerHTML=t.content,e.element.appendChild(i),e.line=document.createElement("div"),e.line.classList.add("annotation_line"),n.graph.element.appendChild(e.line),t.end&&(t.rangeElement=document.createElement("div"),t.rangeElement.classList.add("annotation_range"),n.graph.element.appendChild(t.rangeElement))),t.end){var a=r,o=Math.min(n.graph.x(t.end),n.graph.x.range()[1]);a>o&&(o=r,a=Math.max(n.graph.x(t.end),n.graph.x.range()[0]));var s=o-a;t.rangeElement.style.left=a+"px",t.rangeElement.style.width=s+"px",t.rangeElement.classList.remove("offscreen")}e.line.classList.remove("offscreen"),e.line.style.left=r+"px"})},this)},this.graph.onUpdate(function(){n.update()})},e.namespace("Rickshaw.Graph.Axis.Time"),e.Graph.Axis.Time=function(t){var n=this;this.graph=t.graph,this.elements=[],this.ticksTreatment=t.ticksTreatment||"plain",this.fixedTimeUnit=t.timeUnit;var r=t.timeFixture||new e.Fixtures.Time;this.appropriateTimeUnit=function(){var t,e=r.units,n=this.graph.x.domain(),i=n[1]-n[0];return e.forEach(function(e){Math.floor(i/e.seconds)>=2&&(t=t||e)}),t||r.units[r.units.length-1]},this.tickOffsets=function(){for(var t=this.graph.x.domain(),e=this.fixedTimeUnit||this.appropriateTimeUnit(),n=Math.ceil((t[1]-t[0])/e.seconds),i=t[0],a=[],o=0;o<n;o++){var s=r.ceil(i,e);i=s+e.seconds/2,a.push({value:s,unit:e})}return a},this.render=function(){this.elements.forEach(function(t){t.parentNode.removeChild(t)}),this.elements=[],this.tickOffsets().forEach(function(t){if(!(n.graph.x(t.value)>n.graph.x.range()[1])){var e=document.createElement("div");e.style.left=n.graph.x(t.value)+"px",e.classList.add("x_tick"),e.classList.add(n.ticksTreatment);var r=document.createElement("div");r.classList.add("title"),r.innerHTML=t.unit.formatter(new Date(1e3*t.value)),e.appendChild(r),n.graph.element.appendChild(e),n.elements.push(e)}})},this.graph.onUpdate(function(){n.render()})},e.namespace("Rickshaw.Graph.Axis.X"),e.Graph.Axis.X=function(e){var n=this;this.initialize=function(e){this.graph=e.graph,this.orientation=e.orientation||"top",this.pixelsPerTick=e.pixelsPerTick||75,e.ticks&&(this.staticTicks=e.ticks),e.tickValues&&(this.tickValues=e.tickValues),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",e.element?(this.element=e.element,this._discoverSize(e.element,e),this.vis=t.select(e.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){n.render()})},this.setSize=function(t){if(t=t||{},this.element){this._discoverSize(this.element.parentNode,t),this.vis.attr("height",this.height).attr("width",1.1*this.width);var e=Math.floor(.1*this.width/2);this.element.style.left=-1*e+"px"}},this.render=function(){void 0!==this._renderWidth&&this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var n=t.svg.axis().scale(this.graph.x).orient(this.orientation);n.tickFormat(e.tickFormat||function(t){return t}),this.tickValues&&n.tickValues(this.tickValues),this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);var r,i=Math.floor(.1*this.width/2)||0;if("top"==this.orientation){r="translate("+i+","+(this.height||this.graph.height)+")"}else r="translate("+i+", 0)";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",r).call(n.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var a=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(n.ticks(this.ticks).tickSubdivide(0).tickSize(a)).selectAll("text").each(function(){this.parentNode.setAttribute("data-x-value",this.textContent)}),this._renderHeight=this.graph.height},this._discoverSize=function(t,e){if("undefined"!=typeof window){var n=window.getComputedStyle(t,null),r=parseInt(n.getPropertyValue("height"),10);if(!e.auto)var i=parseInt(n.getPropertyValue("width"),10)}this.width=1.1*(e.width||i||this.graph.width),this.height=e.height||r||40},this.initialize(e)},e.namespace("Rickshaw.Graph.Axis.Y"),e.Graph.Axis.Y=e.Class.create({initialize:function(e){this.graph=e.graph,this.orientation=e.orientation||"right",this.pixelsPerTick=e.pixelsPerTick||75,e.ticks&&(this.staticTicks=e.ticks),e.tickValues&&(this.tickValues=e.tickValues),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",this.tickFormat=e.tickFormat||function(t){return t},this.berthRate=.1,e.element?(this.element=e.element,this.vis=t.select(e.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis;var n=this;this.graph.onUpdate(function(){n.render()})},setSize:function(t){if(t=t||{},this.element){if("undefined"!=typeof window){var e=window.getComputedStyle(this.element.parentNode,null),n=parseInt(e.getPropertyValue("width"),10);if(!t.auto)var r=parseInt(e.getPropertyValue("height"),10)}this.width=t.width||n||this.graph.width*this.berthRate,this.height=t.height||r||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate));var i=this.height*this.berthRate;"left"==this.orientation&&(this.element.style.top=-1*i+"px")}},render:function(){void 0!==this._renderHeight&&this.graph.height!==this._renderHeight&&this.setSize({auto:!0}),this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var t=this._drawAxis(this.graph.y);this._drawGrid(t),this._renderHeight=this.graph.height},_drawAxis:function(e){var n=t.svg.axis().scale(e).orient(this.orientation);if(n.tickFormat(this.tickFormat),this.tickValues&&n.tickValues(this.tickValues),"left"==this.orientation)var r=this.height*this.berthRate,i="translate("+this.width+", "+r+")";return this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",i).call(n.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize)),n},_drawGrid:function(t){var e=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(e)).selectAll("text").each(function(){this.parentNode.setAttribute("data-y-value",this.textContent)})}}),e.namespace("Rickshaw.Graph.Axis.Y.Scaled"),e.Graph.Axis.Y.Scaled=e.Class.create(e.Graph.Axis.Y,{initialize:function(t,e){if(void 0===e.scale)throw new Error("Scaled requires scale");this.scale=e.scale,void 0===e.grid?this.grid=!0:this.grid=e.grid,t(e)},_drawAxis:function(e,n){var r=this.scale.domain(),i=this.graph.renderer.domain().y,a=[Math.min.apply(Math,r),Math.max.apply(Math,r)],o=t.scale.linear().domain([0,1]).range(a),s=[o(i[0]),o(i[1])],l=t.scale.linear().domain(a).range(s);return e(this.scale.copy().domain(r.map(l)).range(n.range()))},_drawGrid:function(t,e){this.grid&&t(e)}}),e.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),e.Graph.Behavior.Series.Highlight=function(e){this.graph=e.graph,this.legend=e.legend;var n=this,r={},i=null,a=e.disabledColor||function(e){return t.interpolateRgb(e,t.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(t){t.element.addEventListener("mouseover",function(e){i||(i=t,n.legend.lines.forEach(function(e){if(t!==e)r[e.series.name]=r[e.series.name]||e.series.color,e.series.color=a(e.series.color);else if(n.graph.renderer.unstack&&(!e.series.renderer||e.series.renderer.unstack)){var i=n.graph.series.indexOf(e.series);e.originalIndex=i;var o=n.graph.series.splice(i,1)[0];n.graph.series.push(o)}}),n.graph.update())},!1),t.element.addEventListener("mouseout",function(e){i&&(i=null,n.legend.lines.forEach(function(e){if(t===e&&e.hasOwnProperty("originalIndex")){var i=n.graph.series.pop();n.graph.series.splice(e.originalIndex,0,i),delete e.originalIndex}r[e.series.name]&&(e.series.color=r[e.series.name])}),n.graph.update())},!1)},this.legend&&this.legend.lines.forEach(function(t){n.addHighlightEvents(t)})},e.namespace("Rickshaw.Graph.Behavior.Series.Order"),e.Graph.Behavior.Series.Order=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;if(void 0===window.jQuery)throw"couldn't find jQuery at window.jQuery";if(void 0===window.jQuery.ui)throw"couldn't find jQuery UI at window.jQuery.ui";jQuery(function(){jQuery(e.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(t,n){var r=[];jQuery(e.legend.list).find("li").each(function(t,e){e.series&&r.push(e.series)});for(var i=e.graph.series.length-1;i>=0;i--)e.graph.series[i]=r.shift();e.graph.update()}}),jQuery(e.legend.list).disableSelection()}),this.graph.onUpdate(function(){var t=window.getComputedStyle(e.legend.element).height;e.legend.element.style.height=t})},e.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),e.Graph.Behavior.Series.Toggle=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;if(this.addAnchor=function(t){var n=document.createElement("a");n.innerHTML="&#10004;",n.classList.add("action"),t.element.insertBefore(n,t.element.firstChild),n.onclick=function(e){if(t.series.disabled)t.series.enable(),t.element.classList.remove("disabled");else{if(this.graph.series.filter(function(t){return!t.disabled}).length<=1)return;t.series.disable(),t.element.classList.add("disabled")}}.bind(this),t.element.getElementsByTagName("span")[0].onclick=function(n){var r=t.series.disabled;if(!r)for(var i=0;i<e.legend.lines.length;i++){var a=e.legend.lines[i];if(t.series===a.series);else if(!a.series.disabled){r=!0;break}}r?(t.series.enable(),t.element.classList.remove("disabled"),e.legend.lines.forEach(function(e){t.series===e.series||(e.series.disable(),e.element.classList.add("disabled"))})):e.legend.lines.forEach(function(t){t.series.enable(),t.element.classList.remove("disabled")})}},this.legend){var n=jQuery;void 0!==n&&n(this.legend.list).sortable&&n(this.legend.list).sortable({start:function(t,e){e.item.bind("no.onclick",function(t){t.preventDefault()})},stop:function(t,e){setTimeout(function(){e.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(t){e.addAnchor(t)})}this._addBehavior=function(){this.graph.series.forEach(function(t){t.disable=function(){if(e.graph.series.length<=1)throw"only one series left";t.disabled=!0,e.graph.update()},t.enable=function(){t.disabled=!1,e.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},e.namespace("Rickshaw.Graph.HoverDetail"),e.Graph.HoverDetail=e.Class.create({initialize:function(t){var e=this.graph=t.graph;this.xFormatter=t.xFormatter||function(t){return new Date(1e3*t).toUTCString()},this.yFormatter=t.yFormatter||function(t){return null===t?t:t.toFixed(2)};var n=this.element=document.createElement("div");n.className="detail",this.visible=!0,e.element.appendChild(n),this.lastEvent=null,this._addListeners(),this.onShow=t.onShow,this.onHide=t.onHide,this.onRender=t.onRender,this.formatter=t.formatter||this.formatter},formatter:function(t,e,n,r,i,a){return t.name+":&nbsp;"+i},update:function(e){if((e=e||this.lastEvent)&&(this.lastEvent=e,e.target.nodeName.match(/^(path|svg|rect|circle)$/))){var n,r=this.graph,i=e.offsetX||e.layerX,a=e.offsetY||e.layerY,o=0,s=[];if(this.graph.series.active().forEach(function(e){var l=this.graph.stackedData[o++];if(l.length){var c=r.x.invert(i),u=t.scale.linear().domain([l[0].x,l.slice(-1)[0].x]).range([0,l.length-1]),h=Math.round(u(c));h==l.length-1&&h--;for(var d=Math.min(h||0,l.length-1),f=h;f<l.length-1&&(l[f]&&l[f+1]);){if(l[f].x<=c&&l[f+1].x>c){d=Math.abs(c-l[f].x)<Math.abs(c-l[f+1].x)?f:f+1;break}l[f+1].x<=c?f++:f--}d<0&&(d=0);var p=l[d],g=Math.sqrt(Math.pow(Math.abs(r.x(p.x)-i),2)+Math.pow(Math.abs(r.y(p.y+p.y0)-a),2)),v=e.xFormatter||this.xFormatter,m=e.yFormatter||this.yFormatter,y={formattedXValue:v(p.x),formattedYValue:m(e.scale?e.scale.invert(p.y):p.y),series:e,value:p,distance:g,order:o,name:e.name};(!n||g<n.distance)&&(n=y),s.push(y)}},this),n){n.active=!0;var l=n.value.x,c=n.formattedXValue;this.element.innerHTML="",this.element.style.left=r.x(l)+"px",this.visible&&this.render({points:s,detail:s,mouseX:i,mouseY:a,formattedXValue:c,domainX:l})}}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(t){var e=this.graph,n=t.points,r=n.filter(function(t){return t.active}).shift();if(null!==r.value.y){var i=r.formattedXValue,a=r.formattedYValue;this.element.innerHTML="",this.element.style.left=e.x(r.value.x)+"px";var o=document.createElement("div");o.className="x_label",o.innerHTML=i,this.element.appendChild(o);var s=document.createElement("div");s.className="item";var l=r.series,c=l.scale?l.scale.invert(r.value.y):r.value.y;s.innerHTML=this.formatter(l,r.value.x,c,i,a,r),s.style.top=this.graph.y(r.value.y0+r.value.y)+"px",this.element.appendChild(s);var u=document.createElement("div");u.className="dot",u.style.top=s.style.top,u.style.borderColor=l.color,this.element.appendChild(u),r.active&&(s.classList.add("active"),u.classList.add("active"));var h=[o,s];h.forEach(function(t){t.classList.add("left")}),this.show();var d=this._calcLayoutError(h);if(d>0){h.forEach(function(t){t.classList.remove("left"),t.classList.add("right")});this._calcLayoutError(h)>d&&h.forEach(function(t){t.classList.remove("right"),t.classList.add("left")})}"function"==typeof this.onRender&&this.onRender(t)}},_calcLayoutError:function(t){var e=this.element.parentNode.getBoundingClientRect(),n=0;t.forEach(function(t){var r=t.getBoundingClientRect();r.width&&(r.right>e.right&&(n+=r.right-e.right),r.left<e.left&&(n+=e.left-r.left))});return n},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(t){this.visible=!0,this.update(t)}.bind(this),!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.graph.element.addEventListener("mouseout",function(t){!t.relatedTarget||t.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),!1)}}),e.namespace("Rickshaw.Graph.JSONP"),e.Graph.JSONP=e.Class.create(e.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),e.namespace("Rickshaw.Graph.Legend"),e.Graph.Legend=e.Class.create({className:"rickshaw_legend",initialize:function(t){this.element=t.element,this.graph=t.graph,this.naturalOrder=t.naturalOrder,this.element.classList.add(this.className),this.list=document.createElement("ul"),this.element.appendChild(this.list),this.render(),this.graph.onUpdate(function(){})},render:function(){for(var t=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.lines=[];var e=this.graph.series.map(function(t){return t});this.naturalOrder||(e=e.reverse()),e.forEach(function(e){t.addLine(e)})},addLine:function(e){var n=document.createElement("li");n.className="line",e.disabled&&(n.className+=" disabled"),e.className&&t.select(n).classed(e.className,!0);var r=document.createElement("div");r.className="swatch",r.style.backgroundColor=e.color,n.appendChild(r);var i=document.createElement("span");i.className="label",i.innerHTML=e.name,n.appendChild(i),this.list.appendChild(n),n.series=e,e.noLegend&&(n.style.display="none");var a={element:n,series:e};return this.shelving&&(this.shelving.addAnchor(a),this.shelving.updateBehaviour()),this.highlighter&&this.highlighter.addHighlightEvents(a),this.lines.push(a),n}}),e.namespace("Rickshaw.Graph.RangeSlider"),e.Graph.RangeSlider=e.Class.create({initialize:function(t){var e=(this.element=t.element,this.graph=t.graph);this.slideCallbacks=[],this.build(),e.onUpdate(function(){this.update()}.bind(this))},build:function(){var t=this.element,e=this.graph,n=jQuery,r=e.dataDomain(),i=this;n(function(){n(t).slider({range:!0,min:r[0],max:r[1],values:[r[0],r[1]],slide:function(t,n){if(!(n.values[1]<=n.values[0])){e.window.xMin=n.values[0],e.window.xMax=n.values[1],e.update();var r=e.dataDomain();r[0]==n.values[0]&&(e.window.xMin=void 0),r[1]==n.values[1]&&(e.window.xMax=void 0),i.slideCallbacks.forEach(function(t){t(e,e.window.xMin,e.window.xMax)})}}})}),n(t)[0].style.width=e.width+"px"},update:function(){var t=this.element,e=this.graph,n=jQuery,r=n(t).slider("option","values"),i=e.dataDomain();n(t).slider("option","min",i[0]),n(t).slider("option","max",i[1]),null==e.window.xMin&&(r[0]=i[0]),null==e.window.xMax&&(r[1]=i[1]),n(t).slider("option","values",r)},onSlide:function(t){this.slideCallbacks.push(t)}}),e.namespace("Rickshaw.Graph.RangeSlider.Preview"),e.Graph.RangeSlider.Preview=e.Class.create({initialize:function(e){if(!e.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!e.graph&&!e.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";this.element=e.element,this.element.style.position="relative",this.graphs=e.graph?[e.graph]:e.graphs,this.defaults={height:75,width:400,gripperColor:void 0,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2},this.heightRatio=e.heightRatio||this.defaults.heightRatio,this.defaults.gripperColor=t.rgb(this.defaults.frameColor).darker().toString(),this.configureCallbacks=[],this.slideCallbacks=[],this.previews=[],e.width||(this.widthFromGraph=!0),e.height||(this.heightFromGraph=!0),(this.widthFromGraph||this.heightFromGraph)&&this.graphs[0].onConfigure(function(){this.configure(e),this.render()}.bind(this)),e.width=e.width||this.graphs[0].width||this.defaults.width,e.height=e.height||this.graphs[0].height*this.heightRatio||this.defaults.height,this.configure(e),this.render()},onSlide:function(t){this.slideCallbacks.push(t)},onConfigure:function(t){this.configureCallbacks.push(t)},configure:function(t){this.config=this.config||{},this.configureCallbacks.forEach(function(e){e(t)}),e.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this.config?this.config[e]:this.defaults[e]},this),("width"in t||"height"in t)&&(this.widthFromGraph&&(this.config.width=this.graphs[0].width),this.heightFromGraph&&(this.config.height=this.graphs[0].height*this.heightRatio,this.previewHeight=this.config.height),this.previews.forEach(function(t){var e=this.previewHeight/this.graphs.length-2*this.config.frameTopThickness,n=this.config.width-2*this.config.frameHandleThickness;if(t.setSize({width:n,height:e}),this.svg){var r=e+2*this.config.frameHandleThickness,i=n+2*this.config.frameHandleThickness;this.svg.style("width",i+"px"),this.svg.style("height",r+"px")}},this))},render:function(){var n=this;this.svg=t.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]),this.previewHeight=this.config.height-2*this.config.frameTopThickness,this.previewWidth=this.config.width-2*this.config.frameHandleThickness,this.currentFrame=[0,this.previewWidth];var r=function(t,r){var i=e.extend({},t.config),a=n.previewHeight/n.graphs.length,o=t.renderer.name;e.extend(i,{element:this.appendChild(document.createElement("div")),height:a,width:n.previewWidth,series:t.series,renderer:o});var s=new e.Graph(i);n.previews.push(s),t.onUpdate(function(){s.render(),n.render()}),t.onConfigure(function(t){delete t.height,t.width=t.width-2*n.config.frameHandleThickness,s.configure(t),s.render()}),s.render()},i=t.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs),a="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";i.enter().append("div").classed("rickshaw_range_slider_preview_container",!0).style("-webkit-transform",a).style("-moz-transform",a).style("-ms-transform",a).style("transform",a).each(r),i.exit().remove();var o=this.graphs[0],s=t.scale.linear().domain([0,this.previewWidth]).range(o.dataDomain()),l=[o.window.xMin,o.window.xMax];this.currentFrame[0]=void 0===l[0]?0:Math.round(s.invert(l[0])),this.currentFrame[0]<0&&(this.currentFrame[0]=0),this.currentFrame[1]=void 0===l[1]?this.previewWidth:s.invert(l[1]),this.currentFrame[1]-this.currentFrame[0]<n.config.minimumFrameWidth&&(this.currentFrame[1]=(this.currentFrame[0]||0)+n.config.minimumFrameWidth),this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",!0).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0),this._renderDimming(),this._renderFrame(),this._renderGrippers(),this._renderHandles(),this._renderMiddle(),this._registerMouseEvents()},_renderDimming:function(){var t=this.svg.selectAll("path.dimming").data([null]);t.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",!0);var e="";e+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness,e+=" h "+this.previewWidth,e+=" v "+this.previewHeight,e+=" h "+-this.previewWidth,e+=" z ",e+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+Math.min(this.currentFrame[1]+2*this.config.frameHandleThickness,this.previewWidth+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderFrame:function(){var t=this.svg.selectAll("path.frame").data([null]);t.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",!0);var e="";e+=" M "+this.currentFrame[0]+" 0",e+=" H "+(this.currentFrame[1]+2*this.config.frameHandleThickness),e+=" V "+this.config.height,e+=" H "+this.currentFrame[0],e+=" z",e+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderGrippers:function(){var t=this.svg.selectAll("path.gripper").data([null]);t.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",!0);var e="";[.4,.6].forEach(function(t){e+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*t)+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height),e+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+t))+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height)}.bind(this)),t.attr("d",e)},_renderHandles:function(){var t=this.svg.selectAll("rect.left_handle").data([null]);t.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",!0),t.attr("x",this.currentFrame[0]).attr("height",this.config.height);var e=this.svg.selectAll("rect.right_handle").data([null]);e.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",!0),e.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var t=this.svg.selectAll("rect.middle_handle").data([null]);t.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",!0),t.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){function e(e,n){l.stop=c._getClientXFromEvent(t.event,l);var r=l.stop-l.start,i=c.frameBeforeDrag.slice(0),a=c.config.minimumFrameWidth;l.rigid&&(a=c.frameBeforeDrag[1]-c.frameBeforeDrag[0]),l.left&&(i[0]=Math.max(i[0]+r,0)),l.right&&(i[1]=Math.min(i[1]+r,c.previewWidth)),i[1]-i[0]<=a&&(l.left&&(i[0]=i[1]-a),l.right&&(i[1]=i[0]+a),i[0]<=0&&(i[1]-=i[0],i[0]=0),i[1]>=c.previewWidth&&(i[0]-=i[1]-c.previewWidth,i[1]=c.previewWidth)),c.graphs.forEach(function(e){var n=t.scale.linear().interpolate(t.interpolateNumber).domain([0,c.previewWidth]).range(e.dataDomain()),r=[n(i[0]),n(i[1])];c.slideCallbacks.forEach(function(t){t(e,r[0],r[1])}),0===i[0]&&(r[0]=void 0),i[1]===c.previewWidth&&(r[1]=void 0),e.window.xMin=r[0],e.window.xMax=r[1],e.update()})}function n(){l.target=t.event.target,l.start=c._getClientXFromEvent(t.event,l),c.frameBeforeDrag=c.currentFrame.slice(),t.event.preventDefault?t.event.preventDefault():t.event.returnValue=!1,t.select(document).on("mousemove.rickshaw_range_slider_preview",e),t.select(document).on("mouseup.rickshaw_range_slider_preview",o),t.select(document).on("touchmove.rickshaw_range_slider_preview",e),t.select(document).on("touchend.rickshaw_range_slider_preview",o),t.select(document).on("touchcancel.rickshaw_range_slider_preview",o)}function r(t,e){l.left=!0,n()}function i(t,e){l.right=!0,n()}function a(t,e){l.left=!0,l.right=!0,l.rigid=!0,n()}function o(e,n){t.select(document).on("mousemove.rickshaw_range_slider_preview",null),t.select(document).on("mouseup.rickshaw_range_slider_preview",null),t.select(document).on("touchmove.rickshaw_range_slider_preview",null),t.select(document).on("touchend.rickshaw_range_slider_preview",null),t.select(document).on("touchcancel.rickshaw_range_slider_preview",null),delete c.frameBeforeDrag,l.left=!1,l.right=!1,l.rigid=!1}var s=t.select(this.element),l={target:null,start:null,stop:null,left:!1,right:!1,rigid:!1},c=this;s.select("rect.left_handle").on("mousedown",r),s.select("rect.right_handle").on("mousedown",i),s.select("rect.middle_handle").on("mousedown",a),s.select("rect.left_handle").on("touchstart",r),s.select("rect.right_handle").on("touchstart",i),s.select("rect.middle_handle").on("touchstart",a)},_getClientXFromEvent:function(t,e){switch(t.type){case"touchstart":case"touchmove":for(var n=t.changedTouches,r=null,i=0;i<n.length;i++)if(n[i].target===e.target){r=n[i];break}return null!==r?r.clientX:void 0;default:return t.clientX}}}),e.namespace("Rickshaw.Graph.Renderer"),e.Graph.Renderer=e.Class.create({initialize:function(t){this.graph=t.graph,this.tension=t.tension||this.tension,this.configure(t)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(t){var e=t||this.graph.stackedData||this.graph.stackData(),n=1/0,r=-1/0,i=1/0,a=-1/0;return e.forEach(function(t){t.forEach(function(t){if(null!=t.y){var e=t.y+t.y0;e<i&&(i=e),e>a&&(a=e)}}),t.length&&(t[0].x<n&&(n=t[0].x),t[t.length-1].x>r&&(r=t[t.length-1].x))}),n-=(r-n)*this.padding.left,r+=(r-n)*this.padding.right,i="auto"===this.graph.min?i:this.graph.min||0,a=void 0===this.graph.max?a:this.graph.max,("auto"===this.graph.min||i<0)&&(i-=(a-i)*this.padding.bottom),void 0===this.graph.max&&(a+=(a-i)*this.padding.top),{x:[n,r],y:[i,a]}},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,r=t.vis||e.vis;r.selectAll("*").remove();var i=n.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),a=r.selectAll("path.path").data(i).enter().append("svg:path").classed("path",!0).attr("d",this.seriesPathFactory());if(this.stroke)var o=r.selectAll("path.stroke").data(i).enter().append("svg:path").classed("stroke",!0).attr("d",this.seriesStrokeFactory());var s=0;n.forEach(function(t){t.disabled||(t.path=a[0][s],this.stroke&&(t.stroke=o[0][s]),this._styleSeries(t),s++)},this)},_styleSeries:function(e){var n=this.fill?e.color:"none",r=this.stroke?e.color:"none";e.path.setAttribute("fill",n),e.path.setAttribute("stroke",r),e.path.setAttribute("stroke-width",this.strokeWidth),e.className&&t.select(e.path).classed(e.className,!0),e.className&&this.stroke&&t.select(e.stroke).classed(e.className,!0)},configure:function(t){t=t||{},e.keys(this.defaults()).forEach(function(n){if(!t.hasOwnProperty(n))return void(this[n]=this[n]||this.graph[n]||this.defaults()[n]);"object"==typeof this.defaults()[n]?e.keys(this.defaults()[n]).forEach(function(e){this[n][e]=void 0!==t[n][e]?t[n][e]:void 0!==this[n][e]?this[n][e]:this.defaults()[n][e]},this):this[n]=void 0!==t[n]?t[n]:void 0!==this[n]?this[n]:void 0!==this.graph[n]?this.graph[n]:this.defaults()[n]},this)},setStrokeWidth:function(t){void 0!==t&&(this.strokeWidth=t)},setTension:function(t){void 0!==t&&(this.tension=t)}}),e.namespace("Rickshaw.Graph.Renderer.Line"),e.Graph.Renderer.Line=e.Class.create(e.Graph.Renderer,{name:"line",defaults:function(t){return e.extend(t(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var e=this.graph,n=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)
}).interpolate(this.graph.interpolation).tension(this.tension);return n.defined&&n.defined(function(t){return null!==t.y}),n}}),e.namespace("Rickshaw.Graph.Renderer.Stack"),e.Graph.Renderer.Stack=e.Class.create(e.Graph.Renderer,{name:"stack",defaults:function(t){return e.extend(t(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var e=this.graph,n=t.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return n.defined&&n.defined(function(t){return null!==t.y}),n}}),e.namespace("Rickshaw.Graph.Renderer.Bar"),e.Graph.Renderer.Bar=e.Class.create(e.Graph.Renderer,{name:"bar",defaults:function(t){var n=e.extend(t(),{gapSize:.05,unstack:!1});return delete n.tension,n},initialize:function(t,e){e=e||{},this.gapSize=e.gapSize||this.gapSize,t(e)},domain:function(t){var e=t(),n=this._frequentInterval(this.graph.stackedData.slice(-1).shift());return e.x[1]+=Number(n.magnitude),e},barWidth:function(t){var e=this._frequentInterval(t.stack);return this.graph.x.magnitude(e.magnitude)*(1-this.gapSize)},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,r=t.vis||e.vis;r.selectAll("*").remove();var i=this.barWidth(n.active()[0]),a=0,o=n.filter(function(t){return!t.disabled}).length,s=this.unstack?i/o:i,l=function(t){return"matrix("+[1,0,0,t.y<0?-1:1,0,t.y<0?2*e.y.magnitude(Math.abs(t.y)):0].join(",")+")"};n.forEach(function(t){if(!t.disabled){var n=(this.barWidth(t),r.selectAll("path").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:rect").attr("x",function(t){return e.x(t.x)+a}).attr("y",function(t){return e.y(t.y0+Math.abs(t.y))*(t.y<0?-1:1)}).attr("width",s).attr("height",function(t){return e.y.magnitude(Math.abs(t.y))}).attr("transform",l));Array.prototype.forEach.call(n[0],function(e){e.setAttribute("fill",t.color)}),this.unstack&&(a+=s)}},this)},_frequentInterval:function(t){for(var n={},r=0;r<t.length-1;r++){var i=t[r+1].x-t[r].x;n[i]=n[i]||0,n[i]++}var a={count:0,magnitude:1};return e.keys(n).forEach(function(t){a.count<n[t]&&(a={count:n[t],magnitude:t})}),a}}),e.namespace("Rickshaw.Graph.Renderer.Area"),e.Graph.Renderer.Area=e.Class.create(e.Graph.Renderer,{name:"area",defaults:function(t){return e.extend(t(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var e=this.graph,n=t.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return n.defined&&n.defined(function(t){return null!==t.y}),n},seriesStrokeFactory:function(){var e=this.graph,n=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return n.defined&&n.defined(function(t){return null!==t.y}),n},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,r=t.vis||e.vis;r.selectAll("*").remove();var i=this.unstack?"append":"insert",a=n.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),o=r.selectAll("path").data(a).enter()[i]("svg:g","g");o.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&o.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var s=0;n.forEach(function(t){t.disabled||(t.path=o[0][s++],this._styleSeries(t))},this)},_styleSeries:function(e){e.path&&(t.select(e.path).select(".area").attr("fill",e.color),this.stroke&&t.select(e.path).select(".line").attr("fill","none").attr("stroke",e.stroke||t.interpolateRgb(e.color,"black")(.125)).attr("stroke-width",this.strokeWidth),e.className&&e.path.setAttribute("class",e.className))}}),e.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),e.Graph.Renderer.ScatterPlot=e.Class.create(e.Graph.Renderer,{name:"scatterplot",defaults:function(t){return e.extend(t(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function(t,e){t(e)},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,r=t.vis||e.vis,i=this.dotSize;r.selectAll("*").remove(),n.forEach(function(t){if(!t.disabled){var n=r.selectAll("path").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:i});t.className&&n.classed(t.className,!0),Array.prototype.forEach.call(n[0],function(e){e.setAttribute("fill",t.color)})}},this)}}),e.namespace("Rickshaw.Graph.Renderer.Multi"),e.Graph.Renderer.Multi=e.Class.create(e.Graph.Renderer,{name:"multi",initialize:function(t,e){t(e)},defaults:function(t){return e.extend(t(),{unstack:!0,fill:!1,stroke:!0})},configure:function(t,e){e=e||{},this.config=e,t(e)},domain:function(e){this.graph.stackData();var n=[],r=this._groups();return this._stack(r),r.forEach(function(t){var r=t.series.filter(function(t){return!t.disabled}).map(function(t){return t.stack});if(r.length){var i=null;i=t.renderer&&t.renderer.domain?t.renderer.domain(r):e(r),n.push(i)}}),{x:[t.min(n.map(function(t){return t.x[0]})),t.max(n.map(function(t){return t.x[1]}))],y:[t.min(n.map(function(t){return t.y[0]})),t.max(n.map(function(t){return t.y[1]}))]}},_groups:function(){var n=this.graph,r={};n.series.forEach(function(i){if(!i.disabled){if(!r[i.renderer]){var a=document.createElementNS("http://www.w3.org/2000/svg","g");n.vis[0][0].appendChild(a);var o=n._renderers[i.renderer],s={};[this.defaults(),o.defaults(),this.config,this.graph].forEach(function(t){e.extend(s,t)}),o.configure(s),r[i.renderer]={renderer:o,series:[],vis:t.select(a)}}r[i.renderer].series.push(i)}},this);var i=[];return Object.keys(r).forEach(function(t){var e=r[t];i.push(e)}),i},_stack:function(n){return n.forEach(function(n){var r=n.series.filter(function(t){return!t.disabled}),i=r.map(function(t){return t.stack});if(!n.renderer.unstack){var a=t.layout.stack(),o=e.clone(a(i));r.forEach(function(t,n){t._stack=e.clone(o[n])})}},this),n},render:function(){this.graph.series.forEach(function(t){if(!t.renderer)throw new Error("Each series needs a renderer for graph 'multi' renderer")}),this.graph.vis.selectAll("*").remove();var t=this._groups();t=this._stack(t),t.forEach(function(t){var e=t.series.filter(function(t){return!t.disabled});e.active=function(){return e},t.renderer.render({series:e,vis:t.vis}),e.forEach(function(t){t.stack=t._stack||t.stack||t.data})})}}),e.namespace("Rickshaw.Graph.Renderer.LinePlot"),e.Graph.Renderer.LinePlot=e.Class.create(e.Graph.Renderer,{name:"lineplot",defaults:function(t){return e.extend(t(),{unstack:!0,fill:!1,stroke:!0,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var e=this.graph,n=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return n.defined&&n.defined(function(t){return null!==t.y}),n},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,r=t.vis||e.vis,i=this.dotSize;r.selectAll("*").remove();var a=n.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),o=r.selectAll("path").data(a).enter().append("svg:path").attr("d",this.seriesPathFactory()),s=0;n.forEach(function(t){t.disabled||(t.path=o[0][s++],this._styleSeries(t))},this),n.forEach(function(t){if(!t.disabled){var n=r.selectAll("x").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:i});Array.prototype.forEach.call(n[0],function(e){e&&(e.setAttribute("data-color",t.color),e.setAttribute("fill","white"),e.setAttribute("stroke",t.color),e.setAttribute("stroke-width",this.strokeWidth))}.bind(this))}},this)}}),e.namespace("Rickshaw.Graph.Smoother"),e.Graph.Smoother=e.Class.create({initialize:function(t){this.graph=t.graph,this.element=t.element,this.aggregationScale=1,this.build(),this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var t=this,e=jQuery;this.element&&e(function(){e(t.element).slider({min:1,max:100,slide:function(e,n){t.setScale(n.value),t.graph.update()}})})},setScale:function(t){if(t<1)throw"scale out of range: "+t;this.aggregationScale=t,this.graph.update()},transformer:function(t){if(1==this.aggregationScale)return t;var e=[];return t.forEach(function(t){for(var n=[];t.length;){var r=0,i=0,a=t.splice(0,this.aggregationScale);a.forEach(function(t){r+=t.x/a.length,i+=t.y/a.length}),n.push({x:r,y:i})}e.push(n)}.bind(this)),e}}),e.namespace("Rickshaw.Graph.Socketio"),e.Graph.Socketio=e.Class.create(e.Graph.Ajax,{request:function(){var t=this;io.connect(this.dataURL).on("rickshaw",function(e){t.success(e)})}}),e.namespace("Rickshaw.Series"),e.Series=e.Class.create(Array,{initialize:function(t,n,r){r=r||{},this.palette=new e.Color.Palette(n),this.timeBase=void 0===r.timeBase?Math.floor((new Date).getTime()/1e3):r.timeBase;var i=void 0===r.timeInterval?1e3:r.timeInterval;this.setTimeInterval(i),t&&"object"==typeof t&&Array.isArray(t)&&t.forEach(function(t){this.addItem(t)},this)},addItem:function(t){if(void 0===t.name)throw"addItem() needs a name";t.color=t.color||this.palette.color(t.name),t.data=t.data||[],0===t.data.length&&this.length&&this.getIndex()>0?this[0].data.forEach(function(e){t.data.push({x:e.x,y:0})}):0===t.data.length&&t.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},addData:function(t,n){var r=this.getIndex();e.keys(t).forEach(function(t){this.itemByName(t)||this.addItem({name:t})},this),this.forEach(function(e){e.data.push({x:n||(r*this.timeInterval||1)+this.timeBase,y:t[e.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return this[e]},setTimeInterval:function(t){this.timeInterval=t/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var t={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(e){var n={color:e.color,name:e.name,data:[]};e.data.forEach(function(t){n.data.push({x:t.x,y:t.y})}),t.items.push(n)}),t},load:function(t){t.timeInterval&&(this.timeInterval=t.timeInterval),t.timeBase&&(this.timeBase=t.timeBase),t.items&&t.items.forEach(function(t){this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},this)}}),e.Series.zeroFill=function(t){e.Series.fill(t,0)},e.Series.fill=function(t,e){for(var n,r=0,i=t.map(function(t){return t.data});r<Math.max.apply(null,i.map(function(t){return t.length}));)n=Math.min.apply(null,i.filter(function(t){return t[r]}).map(function(t){return t[r].x})),i.forEach(function(t){t[r]&&t[r].x==n||t.splice(r,0,{x:n,y:e})}),r++},e.namespace("Rickshaw.Series.FixedDuration"),e.Series.FixedDuration=e.Class.create(e.Series,{initialize:function(t,n,r){if(r=r||{},void 0===r.timeInterval)throw new Error("FixedDuration series requires timeInterval");if(void 0===r.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new e.Color.Palette(n),this.timeBase=void 0===r.timeBase?Math.floor((new Date).getTime()/1e3):r.timeBase,this.setTimeInterval(r.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=r.maxDataPoints,t&&"object"==typeof t&&Array.isArray(t)&&(t.forEach(function(t){this.addItem(t)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,void 0!==this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var i=this.maxDataPoints-this.currentSize-1;i>1;i--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(t){t.data.unshift({x:((i-1)*this.timeInterval||1)+this.timeBase,y:0,i:i})},this)},addData:function(t,e,n){if(t(e,n),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(t){t.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}}),e}),function(t){"use strict";t(document).ready(function(){var e,n=new Skycons,r=["clear-day","clear-night","partly-cloudy-day","partly-cloudy-night","cloudy","rain","sleet","snow","wind","fog"];for(e=r.length;e--;)for(var i=r[e],a=document.getElementsByClassName(i),o=a.length;o--;)n.set(a[o],i);n.play(),function(){for(var e=[[],[],[]],n=new Rickshaw.Fixtures.RandomData(50),r=0;r<50;r++)n.addData(e);var i=new Rickshaw.Graph({element:document.querySelector(".widget-14-chart"),renderer:"area",padding:{top:.5,bottom:1},series:[{data:e[0],color:t.Pages.getColor("success-light",.5),name:"DB Server"},{data:e[1],color:t.Pages.getColor("master-light"),name:"Web Server"}]}),a=(new Rickshaw.Graph.Axis.Y({graph:i,orientation:"right",tickFormat:function(t){return t/10},element:document.querySelector(".widget-14-chart_y_axis")}),new Rickshaw.Graph.Legend({graph:i,element:document.querySelector(".widget-14-chart-legend")}));new Rickshaw.Graph.Behavior.Series.Toggle({graph:i,legend:a}),new Rickshaw.Graph.HoverDetail({graph:i});setInterval(function(){n.removeData(e),n.addData(e),i.update()},1e3),d3.selectAll(".widget-14-chart_y_axis .tick.major line").attr("x2","7"),d3.selectAll(".widget-14-chart_y_axis .tick.major text").attr("x","12"),t(window).resize(function(){i.configure({width:t(".widget-14-chart").width()}),i.render()}),t(".widget-14-chart").data("chart",i)}(),d3.json("http://revox.io/json/min_sales_chart.json",function(e){nv.addGraph(function(){var n=nv.models.lineChart().x(function(t){return t[0]}).y(function(t){return t[1]}).color(["#27cebc"]).useInteractiveGuideline(!0).margin({top:10,right:-10,bottom:10,left:-10}).showXAxis(!1).showYAxis(!1).showLegend(!1);return d3.select(".widget-16-chart svg").datum(e.siteVisits).call(n),nv.utils.windowResize(n.update),nv.utils.windowResize(function(){setTimeout(function(){t(".widget-16-chart .nvd3 circle.nv-point").attr("r","4")},500)}),n},function(){setTimeout(function(){t(".widget-16-chart .nvd3 circle.nv-point").attr("r","4")},500)}),nv.addGraph(function(){var t=nv.models.lineChart().x(function(t){return t[0]}).y(function(t){return t[1]}).color(["#fff"]).margin({top:10,right:-10,bottom:20,left:-10}).showXAxis(!1).showYAxis(!1).showLegend(!1).interactive(!1);return d3.select(".widget-7-chart svg").datum(e.premarket).call(t),nv.utils.windowResize(t.update),t},function(){setTimeout(function(){t(".widget-7-chart .nvd3 circle.nv-point:nth-child(4)").attr("r","5")},500)}),nv.addGraph(function(){var n=nv.models.lineChart().x(function(t){return t[0]}).y(function(t){return t[1]}).color(["#000"]).margin({top:10,right:-10,bottom:-13,left:-10}).showXAxis(!1).showYAxis(!1).showLegend(!1).interactive(!1);return d3.select(".widget-8-chart svg").datum(e.siteVisits).call(n),nv.utils.windowResize(n.update),nv.utils.windowResize(function(){setTimeout(function(){t(".widget-8-chart .nvd3 circle.nv-point").attr("r","3").css({"stroke-width":"2px"," stroke-opacity":.4})},500)}),n},function(){setTimeout(function(){t(".widget-8-chart .nvd3 circle.nv-point").attr("r","3").css({"stroke-width":"2px"," stroke-opacity":.4})},500)})}),t(".widget-13-map").mapplic({source:"http://revox.io/json/dashboard-map.json",height:465,sidebar:!1,minimap:!1,locations:!0,deeplinking:!0,fullscreen:!1,developer:!1,maxscale:3}),setTimeout(function(){location.hash="#usa",t(".mapplic-layer").unbind("mousewheel DOMMouseScroll")},1e3),t('.widget-13 a[data-toggle="tab"]').on("show.bs.tab",function(e){var n,r=t(e.target).text().trim();"fb"==r?n="#usa":"sa"==r?n="#af":"js"==r&&(n="#ru"),window.location.hash=n}),t(".widget-3 .metro").liveTile(),t(".widget-7 .metro").liveTile(),d3.json("http://revox.io/json/charts.json",function(e){!function(){nv.addGraph(function(){var n=nv.models.lineChart().x(function(t){return t[0]}).y(function(t){return t[1]}).color([t.Pages.getColor("success"),t.Pages.getColor("danger"),t.Pages.getColor("primary"),t.Pages.getColor("complete")]).showLegend(!1).margin({left:30,bottom:35}).useInteractiveGuideline(!0);return n.xAxis.tickFormat(function(t){return d3.time.format("%a")(new Date(t))}),n.yAxis.tickFormat(d3.format("d")),d3.select(".nvd3-line svg").datum(e.nvd3.line).transition().duration(500).call(n),nv.utils.windowResize(n.update),t(".nvd3-line").data("chart",n),n})}(),function(){nv.addGraph(function(){var n=nv.models.lineChart().interpolate("basis").x(function(t){return t[0]}).y(function(t){return t[1]/100}).color([t.Pages.getColor("success")]).useInteractiveGuideline(!0).margin({top:150,right:-10,bottom:-10,left:-10}).showXAxis(!1).showYAxis(!1).showLegend(!1);return d3.select(".widget-2-chart svg").datum(e.nvd3.interpolated).transition().duration(500).call(n),nv.utils.windowResize(n.update),t(".widget-2-chart").data("chart",n),n},function(){})}(),function(){nv.addGraph(function(){var n=nv.models.lineChart().x(function(t){return t[0]}).y(function(t){return t[1]/100}).color([t.Pages.getColor("success")]).forceY([0,2]).useInteractiveGuideline(!0).margin({top:60,right:-10,bottom:-10,left:-10}).showLegend(!1);return d3.select(".widget-4-chart svg").datum(e.nvd3.productRevenue).transition().duration(500).call(n),nv.utils.windowResize(function(){n.update()}),t(".widget-4-chart").data("chart",n),n},function(){})}(),function(){for(var e=[[],[]],n=new Rickshaw.Fixtures.RandomData(40),r=0;r<40;r++)n.addData(e);var i=new Rickshaw.Graph({renderer:"bar",element:document.querySelector(".widget-15-chart"),height:200,padding:{top:.5},series:[{data:e[0],color:t.Pages.getColor("complete-light"),name:"New users"},{data:e[1],color:t.Pages.getColor("master-lighter"),name:"Returning users"}]});new Rickshaw.Graph.HoverDetail({graph:i,formatter:function(t,e,n){var r='<span class="date">'+new Date(1e3*e).toUTCString()+"</span>";return'<span class="detail_swatch" style="background-color: '+t.color+'"></span>'+t.name+": "+parseInt(n)+"<br>"+r}});i.render(),t(window).resize(function(){i.configure({width:t(".widget-15-chart").width(),height:200}),i.render()}),t(".widget-15-chart").data("chart",i)}(),function(){for(var e=[[],[]],n=new Rickshaw.Fixtures.RandomData(40),r=0;r<40;r++)n.addData(e);var i=new Rickshaw.Graph({renderer:"bar",element:document.querySelector(".widget-15-chart2"),padding:{top:.5},series:[{data:e[0],color:t.Pages.getColor("complete-light"),name:"New users"},{data:e[1],color:t.Pages.getColor("master-lighter"),name:"Returning users"}]});new Rickshaw.Graph.HoverDetail({graph:i,formatter:function(t,e,n){var r='<span class="date">'+new Date(1e3*e).toUTCString()+"</span>";return'<span class="detail_swatch" style="background-color: '+t.color+'"></span>'+t.name+": "+parseInt(n)+"<br>"+r}});i.render(),t(window).resize(function(){i.configure({width:t(".widget-15-chart2").width(),height:200}),i.render()}),t(".widget-15-chart2").data("chart",i)}(),function(){for(var e=".widget-5-chart",n=[[],[]],r=new Rickshaw.Fixtures.RandomData(7),i=0;i<7;i++)r.addData(n);var a=new Rickshaw.Graph({element:document.querySelector(e),renderer:"bar",series:[{data:[{x:0,y:10},{x:1,y:8},{x:2,y:5},{x:3,y:9},{x:4,y:5},{x:5,y:8},{x:6,y:10}],color:t.Pages.getColor("danger")},{data:[{x:0,y:0},{x:1,y:2},{x:2,y:5},{x:3,y:1},{x:4,y:5},{x:5,y:2},{x:6,y:0}],color:t.Pages.getColor("master-light")}]}),o=Rickshaw.Class.create(Rickshaw.Graph.Renderer.Bar,{barWidth:function(t){return 7}});a.setRenderer(o),a.render(),t(window).resize(function(){a.configure({width:t(e).width(),height:t(e).height()}),a.render()}),t(e).data("chart",a)}()});var s=t(".widget-loader-bar"),l=t(".widget-loader-circle"),c=t(".widget-loader-circle-lg"),u=t(".widget-loader-circle-lg-master");s.each(function(){var e=t(this);e.portlet({progress:"bar",onRefresh:function(){setTimeout(function(){e.portlet({refresh:!1})}.bind(this),2e3)}})}),l.each(function(){var e=t(this);e.portlet({progress:"circle",onRefresh:function(){setTimeout(function(){e.portlet({refresh:!1})}.bind(this),2e3)}})}),c.each(function(){var e=t(this);e.portlet({progress:"circle-lg",progressColor:"white",overlayColor:"0,0,0",overlayOpacity:.6,onRefresh:function(){setTimeout(function(){e.portlet({refresh:!1})}.bind(this),2e3)}})}),u.each(function(){var e=t(this);e.portlet({progress:"circle-lg",progressColor:"master",overlayOpacity:.6,onRefresh:function(){setTimeout(function(){e.portlet({refresh:!1})}.bind(this),2e3)}})})})}(window.jQuery);